{"version":3,"sources":["lib/randInt.js","lib/clipboard.js","generator/modules/index.js","generator/modules/roll.js","generator/modules/rand.js","generator/modules/randInt.js","generator/modules/regex.js","generator/modules/isInRange.js","generator/modules/permutate.js","generator/modules/evalAtCtx.js","generator/modules/createExecutor.js","storage/Entry.js","storage/Table.js","generator/appendModifiers.js","storage/NpcSchema.js","storage/TableCollection.js","components/HeaderBarLink.jsx","components/HeaderBar.jsx","view/ViewContainer.jsx","view/HomeView.jsx","lib/str.js","components/StorageAccordion.jsx","components/NPC/EDisplayModes.js","storage/Filter.js","components/TableFilter.jsx","storage/GeneratedEntry.js","storage/NpcData.js","components/NPC/DetailViewEntry.jsx","components/NPC/ArticleContent.jsx","components/NPC/MenuBar.jsx","components/NPC/DetailView.jsx","components/NPC/ArticleView.jsx","view/NpcView.jsx","components/DataTableView.jsx","view/DataView.jsx","App.jsx","index.js","lib/rand.js","data sync /^/tables.*/.json$"],"names":["module","exports","min","max","Math","ceil","floor","random","html","container","document","createElement","innerHTML","style","position","pointerEvents","opacity","body","appendChild","window","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","err","removeChild","roll","tablePath","data","table","TableCollection","get","getTable","filter","rand","match","value","require","split","randInt","preset","undefined","params","map","str","parseInt","regex","RegExp","test","rangeParams","permutate","console","log","result","length","push","splice","VARIABLE_REGEX","PURE_VARIABLE_REGEX","inlineEval","text","context","replace","group","code","ctx","fullText","lodash","assign","Function","call","e","evalAtCtx","parseMacro","macro","execFunc","args","createExecutor","executor","evaledArgs","Execs","accumulateEntries","onUndefinedKey","reduce","accum","entryData","i","entry","Entry","from","key","getKey","this","weight","redirect","source","stringify","modifiers","children","canReroll","collection","idx","readFrom","index","childrenWithoutKeys","hasSource","tableCollection","evaluateWithData","getSourceTableKey","Object","keys","Table","events","EventTarget","valueMacro","entries","keyPath","obj","entriesWithoutKeys","rows","getKeyPathFromTablePath","values","dispatchOnChangedRowCount","indexOf","prev","next","dispatchEvent","CustomEvent","detail","callback","error","addEventListener","removeEventListener","getRows","hasFilter","type","getFilterType","getOptions","current","toAppend","cloneDeep","hasValueMacro","filterContext","getDefaultFilter","hasRedirector","redirector","getRedirector","rollable","Array","isArray","shift","presetEntry","find","totalWeight","row","getWeight","weight_sum","warn","chooseRandomWithWeight","includes","getKeyPath","hasGlobalModifiers","getGlobalModifiers","globalModifierEntry","matched","toPairs","modifier","hasOwnProperty","concat","mapValues","modifierList","targetProperty","curve","keyframes","currentIndex","nextIndex","valueInt","getInt","lowerIndex","higherIndex","lowerInput","higherInput","t","lerped","toIntOp","intOp","EVENT_ONCHANGEDFILTER","COLUMNS","accessor","Header","Field","category","NpcSchema","fields","fieldOrder","generationOrder","categories","schema","fieldData","field","addField","getCategory","sort","loadItem","directory","fileName","isIndex","content","itemPath","accumulator","itemPathSplit","slice","join","immediateDirectory","item","assignIn","mapKeys","_","loadTableEntry","TABLE_COLLECTION_CACHE","tables","npcSchema","loadTables","EVENT_ONCHANGED","initialize","event","missingKeyDatum","getTablePathFromKeyPath","set","HeaderBarLink","Menu","Item","as","Link","name","props","active","activeItem","path","onClick","to","React","Component","HeaderBar","clear","page","Button","color","onClearStorage","bind","Icon","ViewContainer","Container","HomeView","location","pathname","camelCaseToTitle","word","toUpperCase","substr","toLowerCase","StorageAccordion","storageKey","entryComponentType","useState","storage","expandedEntryKeys","setExpandedEntryKeys_state","setExpandedEntryKeys","remove","isEntryExpanded","handleAccordionClick","removeExpandedEntryKey","Accordion","margin","entryKey","entryProps","storageAccordianComponent","DISPLAY_MODES","Readable","Detailed","getDisplayIconForMode","displayMode","getNextDisplayMode","Filter","all","allFilters","TableFilter","tableKey","setValue","onDropdownChanged","isValueAValidFilter","defaultFilter","marginTop","marginBottom","minValue","maxValue","onChange","Dropdown","fluid","search","selection","multiple","placeholder","options","EntryLinker","owner","property","onEvent","subscribingTo","subscribed","entryPath","npc","getEntry","entryPaths","uniq","forEach","getEntryForPath","add","evt","appendArgsForEntry","a","linker","onEvt","GeneratedEntry","npcData","schemaEntry","stringifyLinker","onStringifyLinkerEvent","stringifyCached","generationDependencyLinker","onGenerationDependencyEvent","modifyingLinker","onModifiersChanged","collectionLinker","onCollectionEntriesChanged","modifierSources","totalModifyingValue","forcedFilter","postOperationModifiers","generated","generatedChildren","parent","getField","toPath","getSource","sourceTableKey","getCanReroll","globalData","getPreset","clearSaveState","dispatchToSubscriptions","getModifierFor","unsubscribe","getModifyingEntryKeys","getGenerationDependencies","getStringifyDependencies","getOurCollections","presetData","getFilterValue","redirectPath","getGenerationMacro","hasChildren","getChildren","child","clone","readEntry","updateString","subscribe","getModifiedData","writeSaveState","dispatchToSubscribers","regenerate","onChildGenerated","localValue","getModifiedValue","toString","asString","tmpValues","generatedObjValue","getModifyingEntryData_internal","getModifierInternal","rawModifier","localData","getChildModifiedData","multiplier","m","multiply","adder","getModifyingEntryData","v","applyModifier","objectEqualityDeepRecursive","b","Error","getRawValue","postOperations","retVal","genEntry","getGeneratedEntry","getStringifyTemplate","template","matchAll","getChild","localizedGlobalData","string","assert","deps","getSubscribedKeys","entryKeys","getCollectionEntryKeys","subpath","NpcData","sever","items","remaining","has","updateSaveState","saveState","getSaveState","NPC_TEMPORARY_DATA","fullKey","itemCount","status","EVENTS","EVENT_INITIALIZED","getNpcSchema","getSchema","getFields","addEntry","regenerateAll","stateString","JSON","getState","encoded","encodeURIComponent","href","getGenerationOrder","save","loop","forAllEntries","state","makeModifierPopup","title","popupTitle","itemMap","Popup","trigger","EntryView","propertyKey","parentEntry","npcModifiedData","isMissingSourceTable","k","refresh","useEffect","onChanged","details","shortid","addListenerOnChanged","addListenerOnUpdateString","addListenerOnModified","addListenerOnUpdateCollection","removeListenerOnChanged","removeListenerOnUpdateString","removeListenerOnModified","removeListenerOnUpdateCollection","rawValue","modifiedValue","modifiersFromEntry","hasModifiers","modifiersOfEntry","getModifiedByEntryKeys","isModified","stringifyDeps","stringifySubscribed","generationDependencies","generationDependedOnBy","canRegenerate","collectionEntryKeys","collectionEntryObj","collectionEntry","isValueEquivalentToNone","secondary","fitted","Title","icon","Content","borderLeft","paddingLeft","marginLeft","Form","Group","widths","hasValue","label","control","stringified","childKey","childEntry","DataViewEntry","toSentenceCase","sentence","getRenderedText","InlineEntryItem","rerollAs","renderedText","hoverable","fontWeight","size","getName","ArticleContent","usePlainText","createEntryItem","strength","dexterity","constitution","intelligence","wisdom","charisma","ethicalPositive","ethicalNeutral","ethicalNegative","moralPositive","moralNeutral","moralNegative","surname","pronouns","genderIdentity","genderExpression","sex","romanticIdentity","sexualIdentity","sexualOrientation","profession","age","eyeColor","height","face","race","hair","skin","physicalTraitsMap","physicalTraits","List","deity","worship","quirkList","getLink","bulleted","singular","n","realFeet","feet","toFeet","compact","striped","textAlign","Body","Row","Cell","MenuBar","switchDisplayMode","menuItemsRight","getEntryLink","borderless","pointing","copyToClipboard","renderToString","marginRight","corner","DetailViewCategory","categoryFields","fieldKey","DetailView","getCategories","getEntriesForCategory","ArticleView","CURRENT_DISPLAYMODE_STORAGE","NpcView","parsedNpcData","npcDataInUrl","queryString","parse","refreshWith","setDisplayMode","nextMode","onTableCollectionChanged","generate","addOnChanged","removeOnChanged","onNpcInitialized","toggleOnInitialized","Loader","getDataTable","getTableAtPath","DataTableView","dataTable","columns","useMemo","DataTable","rowCount","setRowCount","subscribeOnChangedRowCount","onChangedRowCount","unsubscribeOnChangedRowCount","useTable","getTableProps","getTableBodyProps","headerGroups","prepareRow","headerGroup","getHeaderGroupProps","headers","column","HeaderCell","getHeaderProps","render","getRowProps","cells","cell","getCellProps","DataView","getTableKey","renderContent","hasTableKey","getTableTree","makeTreeNode","pathItem","nodeDetails","allNodeProperties","subNodeProperties","hasTable","subnodes","propKey","App","refreshKey","onDataChanged","setState","id","exact","component","react","version","node","process","versions","ReactDOM","getElementById","webpackContext","req","webpackContextResolve","__webpack_require__","o","resolve"],"mappings":"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","file":"static/js/main.dfded703.chunk.js","sourcesContent":["/**\r\n * Returns a random integer between min (inclusive) and max (inclusive).\r\n * The value is no lower than min (or the next integer greater than min\r\n * if min isn't an integer) and no greater than max (or the next integer\r\n * lower than max if max isn't an integer).\r\n * Using Math.round() will give you a non-uniform distribution!\r\n */\r\nmodule.exports = (min, max) =>\r\n{\r\n\tmin = Math.ceil(min);\r\n\tmax = Math.floor(max);\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n}","\r\nfunction copyTextToClipboard(html)\r\n{\r\n\t// Create an iframe (isolated container) for the HTML\r\n  var container = document.createElement('div');\r\n  container.innerHTML = html;\r\n  \r\n  // Hide element\r\n  container.style.position = 'fixed';\r\n  container.style.pointerEvents = 'none';\r\n\tcontainer.style.opacity = 0;\r\n\t\r\n  // Mount the iframe to the DOM to make `contentWindow` available\r\n  document.body.appendChild(container);\r\n\r\n\t// Clear all selected nodes\r\n  window.getSelection().removeAllRanges();\r\n  \r\n  // Add the container as the only selected node\r\n  var range = document.createRange();\r\n  range.selectNode(container);\r\n  window.getSelection().addRange(range);\r\n\r\n  // Copy selected nodes to clipboard\r\n\ttry\r\n\t{\r\n\t\tvar successful = document.execCommand('copy');\r\n\t}\r\n\tcatch (err)\r\n\t{\r\n\t}\r\n  \r\n  // Remove the iframe\r\n  document.body.removeChild(container);\r\n}\r\n\r\nmodule.exports = copyTextToClipboard;","import roll from './roll';\r\nimport rand from './rand';\r\nimport randInt from './randInt';\r\nimport regex from './regex';\r\nimport isInRange from './isInRange';\r\nimport permutate from './permutate';\r\n\r\nexport default {\r\n\troll: roll,\r\n\trand: rand,\r\n\trandInt: randInt,\r\n\tregex: regex,\r\n\trange: isInRange,\r\n\tpermutate: permutate,\r\n};","import TableCollection from '../../storage/TableCollection';\r\n\r\nexport default function exec(tablePath, data)\r\n{\r\n\tconst table = TableCollection.get().getTable(tablePath);\r\n\tif (!table)\r\n\t{\r\n\t\t//console.error(`Could not find table for path ${tablePath}`);\r\n\t\treturn undefined;\r\n\t}\r\n\treturn table.roll(data.filter, data);\r\n}","export default function exec(match)\r\n{\r\n\treturn {\r\n\t\tvalue: require('../../lib/rand')(match.split(','))\r\n\t};\r\n}","export default function exec(match, {preset})\r\n{\r\n\tif (preset !== undefined) return { value: preset };\r\n\tconst params = match.split(',').map(str => parseInt(str, 10));\r\n\treturn {\r\n\t\tvalue: require('../../lib/randInt')(params[0], params[1])\r\n\t};\r\n}","export default function exec(match, data)\r\n{\r\n\tif (data === undefined) return false;\r\n\tconst value = `${data.value}`;\r\n\treturn new RegExp(match).test(value);\r\n}","export default function exec(match, data)\r\n{\r\n\tconst rangeParams = match.split(',').map((str) => parseInt(str, 10));\r\n\treturn data !== undefined\r\n\t\t&& typeof data.value === 'number'\r\n\t\t&& rangeParams[0] <= data.value\r\n\t\t&& data.value <= rangeParams[1];\r\n}","export default function exec(match)\r\n{\r\n\tconsole.log(match);\r\n\tconst params = match.split(',');\r\n\tconst result = [];\r\n\twhile (params.length > 0)\r\n\t{\r\n\t\t// remove a random item from params, and add to the end of result\r\n\t\tresult.push(params.splice(\r\n\t\t\t// index of the next value\r\n\t\t\tMath.floor(Math.random() * params.length),\r\n\t\t\t1\r\n\t\t)[0]);\r\n\t}\r\n\tconsole.log(result);\r\n\treturn {\r\n\t\tvalue: result\r\n\t};\r\n}","import lodash from 'lodash';\r\nimport randInt from '../../lib/randInt';\r\n\r\n// https://stackoverflow.com/questions/8403108/calling-eval-in-particular-context\r\n// https://stackoverflow.com/questions/543533/restricting-eval-to-a-narrow-scope\r\nfunction evalAtCtx(code, ctx, fullText)\r\n{\r\n\t// Ignore the eslint warning about the Function contructor just being eval.\r\n\t// Yes eval is 'evil', but this is a controlled usage with pre-approved input.\r\n\t/*eslint no-new-func: 0*/\r\n\tconst context = lodash.assign({}, ctx, {\r\n\t\trandInt: randInt\r\n\t});\r\n\ttry\r\n\t{\r\n\t\treturn (new Function(`with(this) { return ${code}; }`).call(context));\r\n\t}\r\n\tcatch (e)\r\n\t{\r\n\t\t//console.error(`Error parsing \"${code}\" in text \"${fullText}\" for context`, lodash.cloneDeep(context), e);\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n\r\n// if grouping has periods ('.'), then it definitely relies on another value external to the hierarchy\r\n// (all non-lineage values have at least a category and key, separated by a period)\r\nexport const VARIABLE_REGEX = new RegExp(/\\$\\((.*?)\\)/, 'g');\r\nexport const PURE_VARIABLE_REGEX = new RegExp(/\\$\\(([.a-zA-Z]*?)\\)/, 'g');\r\n\r\nexport function inlineEval(text, context)\r\n{\r\n\treturn text.replace(VARIABLE_REGEX, (match, group) => evalAtCtx(group, context, text));\r\n}","import Execs from './index';\r\nimport {inlineEval} from './evalAtCtx';\r\n\r\nexport function parseMacro(macro)\r\n{\r\n\tconst regex = new RegExp(`^\\\\{(.*):(.*)\\\\}$`);\r\n\tconst match = macro.match(regex);\r\n\tif (match && match.length >= 2)\r\n\t{\r\n\t\treturn {\r\n\t\t\texecFunc: match[1],\r\n\t\t\targs: match[2],\r\n\t\t};\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\nexport function createExecutor(macro)\r\n{\r\n\tconst executor = parseMacro(macro);\r\n\tif (executor)\r\n\t{\r\n\t\treturn (data) => {\r\n\t\t\tconst evaledArgs = inlineEval(executor.args, data);\r\n\t\t\treturn Execs[executor.execFunc](evaledArgs, data);\r\n\t\t};\r\n\t}\r\n\treturn undefined;\r\n}","import {parseMacro} from '../generator/modules/createExecutor';\r\n\r\nexport function accumulateEntries(data, context, onUndefinedKey=undefined)\r\n{\r\n\treturn data.reduce((accum, entryData, i) =>\r\n\t{\r\n\t\tconst entry = Entry.from(entryData, i);\r\n\t\tif (entry.key === undefined)\r\n\t\t{\r\n\t\t\tif (onUndefinedKey !== undefined && typeof onUndefinedKey === 'function')\r\n\t\t\t{\r\n\t\t\t\tonUndefinedKey(entry);\r\n\t\t\t}\r\n\t\t}\r\n\t\taccum[entry.getKey()] = entry;\r\n\t\treturn accum;\r\n\t}, {});\r\n}\r\n\r\nexport class Entry\r\n{\r\n\r\n\tstatic from(data, idx)\r\n\t{\r\n\t\tconst entry = new Entry();\r\n\t\tentry.readFrom(data, idx);\r\n\t\treturn entry;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.weight = undefined;\r\n\t\tthis.key = undefined;\r\n\r\n\t\tthis.redirect = undefined;\r\n\t\tthis.source = undefined;\r\n\r\n\t\tthis.value = undefined;\r\n\t\tthis.stringify = undefined;\r\n\t\tthis.modifiers = {};\r\n\r\n\t\tthis.children = [];\r\n\r\n\t\tthis.canReroll = undefined;\r\n\t\t/**\r\n\t\t * The key for another entry, whose value is an array,\r\n\t\t * which GeneratedEntries that this entry is a schema for,\r\n\t\t * are considered a part of during `GeneratedEntry#getModifiedData`.\r\n\t\t**/\r\n\t\tthis.collection = undefined;\r\n\t}\r\n\r\n\treadFrom(data, idx)\r\n\t{\r\n\t\tthis.weight = data.weight || 1;\r\n\t\tthis.key = data.key;\r\n\t\tthis.index = idx;\r\n\r\n\t\tthis.redirect = data.redirect;\r\n\t\tthis.source = data.source;\r\n\r\n\t\tthis.value = data.value;\r\n\t\tthis.stringify = data.stringify;\r\n\r\n\t\tthis.childrenWithoutKeys = [];\r\n\t\tthis.children = accumulateEntries(data.children || [], `entry '${this.key}'`, (i) => this.childrenWithoutKeys.push(i));\r\n\r\n\t\tthis.modifiers = data.modifiers || {};\r\n\r\n\t\tthis.canReroll = data.canReroll;\r\n\t\tthis.collection = data.collection;\r\n\t}\r\n\r\n\tgetKey()\r\n\t{\r\n\t\treturn this.key || this.index;\r\n\t}\r\n\r\n\thasSource()\r\n\t{\r\n\t\treturn typeof this.source === 'string';\r\n\t}\r\n\r\n\tgetSource()\r\n\t{\r\n\t\treturn this.source;\r\n\t}\r\n\r\n\tgetWeight()\r\n\t{\r\n\t\t// TODO: fetch from local storage\r\n\t\treturn this.weight;\r\n\t}\r\n\r\n\tgetSourceTableKey()\r\n\t{\r\n\t\tif (!this.hasSource()) return undefined;\r\n\t\tconst executor = parseMacro(this.source);\r\n\t\tif (executor.execFunc !== 'roll') return undefined;\r\n\t\treturn executor.args;\r\n\t}\r\n\r\n\tisMissingSourceTable(tableCollection, evaluateWithData)\r\n\t{\r\n\t\tif (!this.hasSource()) return false;\r\n\t\tconst tablePath = this.getSourceTableKey();\r\n\t\tif (!tablePath) return false;\r\n\t\treturn tableCollection.getTable(evaluateWithData(tablePath)) === undefined;\r\n\t}\r\n\r\n\thasRedirector()\r\n\t{\r\n\t\treturn typeof this.redirect === 'string';\r\n\t}\r\n\r\n\tgetRedirector()\r\n\t{\r\n\t\treturn this.redirect;\r\n\t}\r\n\r\n\thasChildren()\r\n\t{\r\n\t\treturn Object.keys(this.children).length > 0;\r\n\t}\r\n\r\n\tgetChildren() { return this.children; }\r\n\r\n\tgetStringifyTemplate()\r\n\t{\r\n\t\treturn this.stringify;\r\n\t}\r\n\r\n\tgetCanReroll()\r\n\t{\r\n\t\treturn this.canReroll === undefined || this.canReroll === true;\r\n\t}\r\n\r\n}","import lodash from 'lodash';\r\nimport { accumulateEntries, Entry } from './Entry';\r\nimport { createExecutor } from '../generator/modules/createExecutor';\r\nimport appendModifiers from '../generator/appendModifiers';\r\nimport { inlineEval } from '../generator/modules/evalAtCtx';\r\n\r\n/**\r\n * Picks a random item from `entries`, using `entry.getWeight()` to get the weight for any\r\n * given item (assuming a weight of 1 if the function returns a falsey value).\r\n * Returns null if it was unable to determine a value. Assumes `entries` is non-empty.\r\n*/\r\nfunction chooseRandomWithWeight(entries)\r\n{\r\n\tconst totalWeight = entries.reduce((accum, row) => accum + (row.getWeight() || 1), 0);\r\n\tconst randInt = require('../lib/randInt')(1, totalWeight);\r\n\r\n\tvar weight_sum = 0;\r\n\tvar i;\r\n\tfor (i = 0; i < entries.length; i++)\r\n\t{\r\n\t\tweight_sum += entries[i].getWeight() || 1;\r\n\t\tif (randInt <= weight_sum)\r\n\t\t{\r\n\t\t\treturn entries[i];\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.warn(`'Returning null from \\`chooseRandomWithWeight\\`. i=${i} weight_sum=${weight_sum}`, entries);\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * A READONLY collective of randomizable entries with modifiers. It is loaded by a TableCollection,\r\n * and can be used to get a weighted random entry that it contains (see the `roll` function).\r\n*/\r\nexport default class Table\r\n{\r\n\r\n\tstatic EVENT_ONCHANGEDFILTER = 'onChangedFilter';\r\n\r\n\tstatic getTablePathFromKeyPath(keyPath)\r\n\t{\r\n\t\treturn keyPath.replace(/\\./g, '/');\r\n\t}\r\n\r\n\tstatic getKeyPathFromTablePath(tablePath)\r\n\t{\r\n\t\treturn tablePath.replace(/\\//g, '.');\r\n\t}\r\n\r\n\t// takes a json object\r\n\tstatic from(obj, key)\r\n\t{\r\n\t\tconst table = new Table();\r\n\t\ttable.key = key;\r\n\t\ttable.filter = obj.filter;\r\n\t\t// turn json data for a table's entry rows into objects\r\n\t\ttable.entriesWithoutKeys = [];\r\n\t\tif (obj.valueMacro)\r\n\t\t{\r\n\t\t\ttable.valueMacro = obj.valueMacro;\r\n\t\t\ttable.entries = null;\r\n\t\t}\r\n\t\telse if (obj.rows)\r\n\t\t{\r\n\t\t\ttable.entries = accumulateEntries(obj.rows, `table '${key}'`, (i) => table.entriesWithoutKeys.push(i));\r\n\t\t}\r\n\t\ttable.modifiers = obj.modifiers;\r\n\t\ttable.redirect = obj.redirect;\r\n\t\ttable.entry = obj.entry !== undefined ? Entry.from(obj.entry, -1) : undefined;\r\n\t\treturn table;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.events = new EventTarget();\r\n\r\n\t\tthis.key = undefined;\r\n\t\tthis.filter = undefined;\r\n\t\t// The macro used to generate a value based on the filter\r\n\t\tthis.valueMacro = undefined;\r\n\t\t// All the possible options available for randomization (and filtering)\r\n\t\tthis.entries = {};\r\n\t\t// Global modifiers that can (and should) be applied to any entry after being rolled.\r\n\t\tthis.modifiers = {};\r\n\r\n\t\tthis.redirect = undefined;\r\n\t}\r\n\r\n\tgetKey()\r\n\t{\r\n\t\treturn this.key;\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\treturn Table.getKeyPathFromTablePath(this.getKey());\r\n\t}\r\n\r\n\thasValueMacro()\r\n\t{\r\n\t\treturn this.valueMacro !== undefined;\r\n\t}\r\n\r\n\tlength()\r\n\t{\r\n\t\treturn this.entries !== null ? Object.keys(this.entries).length : 1;\r\n\t}\r\n\r\n\tgetRows()\r\n\t{\r\n\t\treturn this.entries !== null ? Object.values(this.entries) : [];\r\n\t}\r\n\r\n\taddRow(entry)\r\n\t{\r\n\t\tif (this.entries === null) { return; }\r\n\t\tthis.entries.push(entry);\r\n\t\tthis.dispatchOnChangedRowCount(this.entries.length - 1, this.entries.length);\r\n\t}\r\n\r\n\tremoveRow(entry)\r\n\t{\r\n\t\tif (this.entries === null) { return; }\r\n\t\tthis.entries.splice(this.entries.indexOf(entry), 1);\r\n\t\tthis.dispatchOnChangedRowCount(this.entries.length, this.entries.length - 1);\r\n\t}\r\n\r\n\tdispatchOnChangedRowCount(prev, next)\r\n\t{\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChangedRowCount', {\r\n\t\t\tdetail: { prev, next }\r\n\t\t}));\r\n\t}\r\n\r\n\t// TODO: This will never work because Tables are deserialized from the local storage\r\n\tsubscribeOnChangedRowCount(callback)\r\n\t{\r\n\t\tconsole.error('Changed callbacks will never work on tables');\r\n\t\tthis.events.addEventListener('onChangedRowCount', callback);\r\n\t}\r\n\r\n\tunsubscribeOnChangedRowCount(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onChangedRowCount', callback);\r\n\t}\r\n\r\n\t// Viewing the table via react\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.getRows().map((entry) => ({\r\n\t\t\tkey: entry.getKey(), text: entry.getKey(), value: entry.getKey()\r\n\t\t}));\r\n\t}\r\n\r\n\thasFilter()\r\n\t{\r\n\t\treturn this.filter === undefined || this.filter !== false;\r\n\t}\r\n\r\n\tgetFilterType()\r\n\t{\r\n\t\treturn this.hasFilter() && this.filter !== undefined ? this.filter.type : undefined;\r\n\t}\r\n\r\n\tgetDefaultFilter()\r\n\t{\r\n\t\tswitch (this.getFilterType())\r\n\t\t{\r\n\t\t\tcase 'minMaxRange':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmin: this.filter.min,\r\n\t\t\t\t\tmax: this.filter.max,\r\n\t\t\t\t};\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.getOptions();\r\n\t\t}\r\n\t}\r\n\r\n\thasGlobalModifiers()\r\n\t{\r\n\t\treturn this.modifiers !== null && this.modifiers !== undefined && Object.keys(this.modifiers).length > 0;\r\n\t}\r\n\r\n\tgetGlobalModifiers()\r\n\t{\r\n\t\treturn this.modifiers;\r\n\t}\r\n\r\n\thasRedirector()\r\n\t{\r\n\t\treturn this.redirect !== undefined;\r\n\t}\r\n\r\n\tgetRedirector()\r\n\t{\r\n\t\treturn this.redirect;\r\n\t}\r\n\r\n\t// Performing ops\r\n\r\n\troll(filter, context)\r\n\t{\r\n\t\tlet result = { value: undefined, modifiers: {} };\r\n\t\t\r\n\t\tif (this.entry !== undefined)\r\n\t\t{\r\n\t\t\tresult.value = lodash.cloneDeep(this.entry.value.value);\r\n\t\t\tresult.modifiers = lodash.cloneDeep(this.entry.value.modifiers);\r\n\t\t\tresult.entry = this.entry;\r\n\t\t}\r\n\t\telse if (this.hasValueMacro())\r\n\t\t{\r\n\t\t\tconst filterContext = { ...context, filter: (filter || this.getDefaultFilter()) };\r\n\t\t\tconst macro = createExecutor(this.valueMacro);\r\n\t\t\tif (macro === undefined) result.value = inlineEval(this.valueMacro, filterContext);\r\n\t\t\telse result.value = macro(filterContext).value;\r\n\t\t}\r\n\t\telse if (this.hasRedirector())\r\n\t\t{\r\n\t\t\tlet redirector = this.getRedirector();\r\n\r\n\t\t\tconst macro = createExecutor(`{roll:${redirector}}`);\r\n\t\t\tif (macro)\r\n\t\t\t{\r\n\t\t\t\tresult = macro({...context, filter: undefined});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconst entry = (() => {\r\n\t\t\t\tconst rollable = this.getRows();\r\n\t\t\t\tif (context.preset !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst preset = Array.isArray(context.preset) ? context.preset.shift() : context.preset;\r\n\t\t\t\t\tconst presetEntry = rollable.find((entry) => entry.getKey() === preset);\r\n\t\t\t\t\tif (presetEntry !== undefined) return presetEntry;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.error(`Could not find entry with preset key ${preset} in table ${this.getKey()}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst filtered = filter === undefined ? rollable : rollable.filter((entry) => filter.includes(entry.getKey()));\r\n\t\t\t\treturn chooseRandomWithWeight(filtered);\r\n\t\t\t})();\r\n\t\t\tif (entry === null)\r\n\t\t\t{\r\n\t\t\t\tconsole.warn('Received null generated value. Maybe there are missing keys?', this.entriesWithoutKeys, this.getKeyPath());\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tresult.value = lodash.cloneDeep(entry.value);\r\n\t\t\tresult.modifiers = lodash.cloneDeep(entry.modifiers);\r\n\t\t\tresult.entry = entry;\r\n\t\t}\r\n\r\n\t\t// Modifiers which are determined based on scales or regexs on the generated value\r\n\t\tif (this.hasGlobalModifiers())\r\n\t\t{\r\n\t\t\tfor (let globalModifierEntry of this.getGlobalModifiers())\r\n\t\t\t{\r\n\t\t\t\tlet matched = false;\r\n\t\t\t\tconst macro = createExecutor(globalModifierEntry.match);\r\n\t\t\t\tif (macro)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet matchResult = macro({ ...context, value: result.value });\r\n\t\t\t\t\tmatched = matchResult === true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmatched = result.value === globalModifierEntry.match;\r\n\t\t\t\t}\r\n\t\t\t\tif (matched)\r\n\t\t\t\t{\r\n\t\t\t\t\tresult.modifiers = appendModifiers(result.modifiers, globalModifierEntry.modifiers);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tresult.modifiers = lodash.mapValues(result.modifiers, (modifierList, targetProperty) => {\r\n\t\t\tif (!Array.isArray(modifierList)) modifierList = [modifierList];\r\n\t\t\treturn modifierList.map((modifier) => {\r\n\t\t\t\t// Preprocess each modifier to ensure that the modifiers remaining are either numbers or strings\r\n\t\t\t\tif (typeof modifier === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tswitch (modifier.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'curve':\r\n\t\t\t\t\t\t\tswitch (modifier.curve)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcase 'step':\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tconst keyframes = Object.keys(modifier.values);\r\n\t\t\t\t\t\t\t\t\t\tlet currentIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\tlet nextIndex = keyframes.length > 0 ? 0 : undefined;\r\n\t\t\t\t\t\t\t\t\t\twhile (nextIndex !== undefined\r\n\t\t\t\t\t\t\t\t\t\t\t&& parseInt(result.value, 10) > parseInt(keyframes[nextIndex], 10))\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentIndex = nextIndex;\r\n\t\t\t\t\t\t\t\t\t\t\tnextIndex++;\r\n\t\t\t\t\t\t\t\t\t\t\tif (nextIndex >= keyframes.length) nextIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn currentIndex ? modifier.values[keyframes[currentIndex]] : 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcase 'lerp':\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tconst valueInt = parseInt(result.value, 10);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst keyframes = Object.keys(modifier.values);\r\n\t\t\t\t\t\t\t\t\t\tconst getInt = (i) => parseInt(keyframes[i], 10);\r\n\t\t\t\t\t\t\t\t\t\tlet lowerIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\tlet higherIndex = keyframes.length > 0 ? 0 : undefined;\r\n\t\t\t\t\t\t\t\t\t\twhile (higherIndex !== undefined\r\n\t\t\t\t\t\t\t\t\t\t\t&& valueInt > getInt(higherIndex))\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tlowerIndex = higherIndex;\r\n\t\t\t\t\t\t\t\t\t\t\thigherIndex++;\r\n\t\t\t\t\t\t\t\t\t\t\tif (higherIndex >= keyframes.length) higherIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (lowerIndex === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tlowerIndex = higherIndex;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse if (higherIndex === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\thigherIndex = lowerIndex;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst lowerInput = getInt(lowerIndex);\r\n\t\t\t\t\t\t\t\t\t\tconst higherInput = getInt(higherIndex);\r\n\t\t\t\t\t\t\t\t\t\tconst lowerMod = modifier.values[keyframes[lowerIndex]];\r\n\t\t\t\t\t\t\t\t\t\tconst higherMod = modifier.values[keyframes[higherIndex]];\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst t = (valueInt - lowerInput) / (higherInput !== lowerInput ? higherInput - lowerInput : higherInput);\r\n\t\t\t\t\t\t\t\t\t\tconst lerped = (1 - t) * lowerMod + (t * higherMod);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (modifier.toIntOp === undefined) return lerped;\r\n\t\t\t\t\t\t\t\t\t\tconst intOp = Math[modifier.toIntOp];\r\n\t\t\t\t\t\t\t\t\t\tif (intOp === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.warn('Encountered unimplemented curve int cast operator:', modifier.toIntOp);\r\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\treturn intOp(lerped);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdefault: break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault: break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn modifier;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n\r\nTable.COLUMNS = [\r\n\t{\r\n\t\taccessor: 'weight',\r\n\t\tHeader: 'Weight',\r\n\t},\r\n\t{\r\n\t\taccessor: 'key',\r\n\t\tHeader: 'Key',\r\n\t}\r\n];\r\n","import lodash from 'lodash';\r\n\r\nexport default function appendModifiers(current, toAppend) {\r\n\treturn lodash.toPairs(toAppend).reduce((accum, [key, modifier]) => {\r\n\t\t\r\n\t\tif (!accum.hasOwnProperty(key)) accum[key] = [];\r\n\t\telse if (!Array.isArray(accum[key])) accum[key] = [accum[key]];\r\n\t\t\r\n\t\tif (Array.isArray(modifier)) accum[key] = accum[key].concat(modifier);\r\n\t\telse accum[key].push(modifier);\r\n\r\n\t\treturn accum;\r\n\t}, current);\r\n};","import lodash from 'lodash';\r\nimport { Entry } from './Entry';\r\n\r\nclass Field extends Entry\r\n{\r\n\r\n\tstatic from(data)\r\n\t{\r\n\t\tconst entry = new Field();\r\n\t\tentry.readFrom(data);\r\n\t\tentry.category = data.category;\r\n\t\treturn entry;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t\tthis.category = undefined;\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\treturn `${this.category}.${this.getKey()}`;\r\n\t}\r\n\r\n\tgetCategory()\r\n\t{\r\n\t\treturn this.category;\r\n\t}\r\n\r\n}\r\n\r\nexport default class NpcSchema\r\n{\r\n\r\n\t// takes a json object\r\n\tstatic from(obj)\r\n\t{\r\n\t\tconst schema = new NpcSchema();\r\n\r\n\t\tschema.generationOrder = obj.generationOrder;\r\n\t\t\r\n\t\tfor (let fieldData of obj.fieldOrder)\r\n\t\t{\r\n\t\t\tconst field = schema.addField(fieldData);\r\n\t\t\tschema.fieldOrder.push(field.getKeyPath());\r\n\t\t}\r\n\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.fields = {};\r\n\t\tthis.fieldOrder = [];\r\n\t\tthis.generationOrder = [];\r\n\t\tthis.categories = {};\r\n\t}\r\n\r\n\taddField(data)\r\n\t{\r\n\t\tconst field = Field.from(data);\r\n\t\tthis.fields[field.getKeyPath()] = field;\r\n\t\tthis.categories[field.getCategory()] = (this.categories[field.getCategory()] || []).concat([field.getKey()]);\r\n\t\treturn field;\r\n\t}\r\n\r\n\tgetFields()\r\n\t{\r\n\t\treturn lodash.values(this.fields);\r\n\t}\r\n\r\n\tgetField(keyPath)\r\n\t{\r\n\t\treturn this.fields[keyPath];\r\n\t}\r\n\r\n\tgetCategories()\r\n\t{\r\n\t\treturn Object.keys(this.categories).sort();\r\n\t}\r\n\r\n\tgetFieldsForCategory(category)\r\n\t{\r\n\t\treturn (this.categories[category] || []).sort();\r\n\t}\r\n\r\n\tgetFieldForCategory(category, key)\r\n\t{\r\n\t\treturn this.categories[category][key];\r\n\t}\r\n\r\n\tgetGenerationOrder()\r\n\t{\r\n\t\treturn this.generationOrder;\r\n\t}\r\n\r\n}\r\n","import lodash from 'lodash';\r\nimport Table from './Table';\r\nimport NpcSchema from './NpcSchema';\r\n\r\nfunction loadItem(directory, fileName)\r\n{\r\n\tconst data = require(`../data/tables${directory}${fileName}.json`);\r\n\tconst isIndex = Array.isArray(data);\r\n\tlet content = !isIndex ? data : data.reduce((accum, itemPath) => loadTableEntry(accum, directory, itemPath), {});\r\n\treturn { content, isIndex };\r\n}\r\n\r\nfunction loadTableEntry(accumulator, directory, itemPath)\r\n{\r\n\tconst itemPathSplit = itemPath.split('/');\r\n\tconst fileName = itemPathSplit.slice(-1).join('/');\r\n\tconst immediateDirectory = itemPathSplit.slice(0, -1).join('/');\r\n\tconst fullDirectory = `${directory}${itemPath}`.split('/').slice(0, -1).join('/') + '/';\r\n\tconst item = loadItem(fullDirectory, fileName);\r\n\tif (item.isIndex)\r\n\t{\r\n\t\tlodash.assignIn(accumulator, lodash.mapKeys(item.content, (_, key) => `${immediateDirectory}/${key}`));\r\n\t}\r\n\telse\r\n\t{\r\n\t\taccumulator[itemPath] = item.content;\r\n\t}\r\n\treturn accumulator;\r\n}\r\n\r\nconst events = new EventTarget();\r\nlet TABLE_COLLECTION_CACHE = undefined;\r\n\r\n/**\r\n * A collection of Tables which is loaded once at application start (or on demand after initial load).\r\n * This data is meant to be READONLY at runtime and does not reliably support changing or adding data.\r\n*/\r\nexport default class TableCollection\r\n{\r\n\r\n\t/** Event key for when the table collection is finished loading - either at app launch or user initiated. */\r\n\tstatic EVENT_ONCHANGED = 'onChanged';\r\n\r\n\t/** Returns the current iteration/collection of tables loaded from data. */\r\n\tstatic get()\r\n\t{\r\n\t\treturn TABLE_COLLECTION_CACHE;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new table collection object and loads collection from data.\r\n\t*/\r\n\tstatic initialize()\r\n\t{\r\n\t\tconsole.log('Initializing table collection');\r\n\t\tTABLE_COLLECTION_CACHE = new TableCollection();\r\n\t\tTABLE_COLLECTION_CACHE.loadTables();\r\n\t\tTableCollection.dispatchEvent(TableCollection.EVENT_ONCHANGED, null, TABLE_COLLECTION_CACHE);\r\n\t}\r\n\r\n\t/**\r\n\t * Wipes the table collection singleton and immediately reinitializes.\r\n\t*/\r\n\tstatic clear()\r\n\t{\r\n\t\tconst prev = TableCollection.get();\r\n\t\tTABLE_COLLECTION_CACHE = null;\r\n\t\tTableCollection.dispatchEvent(TableCollection.EVENT_ONCHANGED, prev, null);\r\n\r\n\t\t// Re-Initialize\r\n\t\tTableCollection.initialize();\r\n\t}\r\n\r\n\tstatic addEventListener(event, callback)\r\n\t{\r\n\t\tevents.addEventListener(event, callback);\r\n\t}\r\n\r\n\tstatic removeEventListener(event, callback)\r\n\t{\r\n\t\tevents.removeEventListener(event, callback);\r\n\t}\r\n\r\n\tstatic addOnChanged(callback)\r\n\t{\r\n\t\tTableCollection.addEventListener(TableCollection.EVENT_ONCHANGED, callback);\r\n\t}\r\n\r\n\tstatic removeOnChanged(callback)\r\n\t{\r\n\t\tTableCollection.removeEventListener(TableCollection.EVENT_ONCHANGED, callback);\r\n\t}\r\n\r\n\t// NOTE: `prev` is outdated\r\n\tstatic dispatchEvent(event, prev, next)\r\n\t{\r\n\t\tevents.dispatchEvent(new CustomEvent(event, {\r\n\t\t\tdetail: { prev, next }\r\n\t\t}));\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.tables = {};\r\n\t\tthis.npcSchema = undefined;\r\n\t}\r\n\r\n\tloadTables()\r\n\t{\r\n\t\tthis.tables = lodash.mapValues(loadItem('/', 'index').content, Table.from);\r\n\t\tconsole.log(this.tables);\r\n\t\tconsole.log('Missing Keys:', lodash.values(this.tables).reduce((accum, table) => {\r\n\t\t\tconst missingKeyDatum = {};\r\n\t\t\tif (table.entriesWithoutKeys.length > 0)\r\n\t\t\t{\r\n\t\t\t\tmissingKeyDatum.entries = table.entriesWithoutKeys;\r\n\t\t\t}\r\n\t\t\tfor (let entry of lodash.values(table.entries))\r\n\t\t\t{\r\n\t\t\t\tif (entry.childrenWithoutKeys.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tmissingKeyDatum[entry.getKey()] = entry.childrenWithoutKeys;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (Object.keys(missingKeyDatum).length > 0)\r\n\t\t\t{\r\n\t\t\t\taccum[table.getKey()] = missingKeyDatum;\r\n\t\t\t}\r\n\t\t\treturn accum;\r\n\t\t}, {}))\r\n\r\n\t\tthis.npcSchema = NpcSchema.from(loadItem('/', 'npc').content);\r\n\t}\r\n\r\n\tgetNpcSchema()\r\n\t{\r\n\t\treturn this.npcSchema;\r\n\t}\r\n\r\n\tgetTableKeys()\r\n\t{\r\n\t\treturn Object.keys(this.tables).sort();\r\n\t}\r\n\r\n\tgetTable(key)\r\n\t{\r\n\t\treturn this.tables.hasOwnProperty(key) ? this.tables[key] : undefined\r\n\t}\r\n\r\n\tgetTableAtPath(keyPath)\r\n\t{\r\n\t\treturn this.getTable(Table.getTablePathFromKeyPath(keyPath));\r\n\t}\r\n\r\n\tgetTableTree()\r\n\t{\r\n\t\treturn Object.keys(this.tables).reduce((accum, key) => {\r\n\t\t\treturn lodash.set(accum, this.tables[key].getKeyPath() + '.table', this.tables[key]);\r\n\t\t}, {});\r\n\t}\r\n\r\n}","import React from 'react';\r\nimport { Menu } from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport class HeaderBarLink extends React.Component\r\n{\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Menu.Item\r\n\t\t\t\t\tas={Link}\r\n          name={this.props.name}\r\n          active={this.props.activeItem === this.props.path}\r\n\t\t\t\t\tonClick={this.props.onClick}\r\n\t\t\t\t\tto={this.props.path}\r\n        >\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</Menu.Item>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport { Menu, Button, Icon } from 'semantic-ui-react';\r\nimport { HeaderBarLink } from './HeaderBarLink';\r\nimport TableCollection from '../storage/TableCollection';\r\n\r\nexport class HeaderBar extends React.Component\r\n{\r\n\r\n\tonClearStorage()\r\n\t{\r\n\t\tconsole.log('Syncing tables');\r\n\t\tTableCollection.clear();\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Menu>\r\n\t\t\t\t<HeaderBarLink name={'home'} path={'/'} activeItem={this.props.page}>Home</HeaderBarLink>\r\n\t\t\t\t<HeaderBarLink name={'npc'} path={'/npc'} activeItem={this.props.page}>NPC</HeaderBarLink>\r\n\t\t\t\t<HeaderBarLink name={'data'} path={'/data'} activeItem={this.props.page}>Data</HeaderBarLink>\r\n\r\n\t\t\t\t<Menu.Item position='right'>\r\n\t\t\t\t\t<Button color='red' onClick={this.onClearStorage.bind(this)}>\r\n\t\t\t\t\t\t<Icon name='sync' /> Sync\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Menu.Item>\r\n      </Menu>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport { HeaderBar } from '../components/HeaderBar';\r\nimport { Container } from 'semantic-ui-react';\r\n\r\nexport class ViewContainer extends React.Component\r\n{\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Container>\r\n\t\t\t\t<HeaderBar page={this.props.page} />\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</Container>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { ViewContainer } from './ViewContainer';\r\nimport { Header } from 'semantic-ui-react';\r\n\r\nexport class HomeView extends React.Component\r\n{\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ViewContainer page={this.props.location.pathname}>\r\n\t\t\t\t<Header>HOME</Header>\r\n\t\t\t</ViewContainer>\r\n\t\t);\r\n\t}\r\n}","export function camelCaseToTitle(str)\r\n{\r\n\treturn str\r\n\t\t.split(/(?=[A-Z])/)\r\n\t\t.map(\r\n\t\t\t(word) => `${word[0].toUpperCase()}${word.substr(1).toLowerCase()}`\r\n\t\t).join(' ');\r\n}","import React, { useState } from 'react';\r\nimport storage from 'local-storage';\r\nimport lodash from 'lodash';\r\nimport { Accordion } from 'semantic-ui-react';\r\n\r\nexport function StorageAccordion({\r\n\tstorageKey,\r\n\tentryComponentType,\r\n\tentries,\r\n\tactive, // if the item the accordion is in is currently rendering (not collapsed)\r\n})\r\n{\r\n\tconst [expandedEntryKeys, setExpandedEntryKeys_state] = useState(storage.get(storageKey) || []);\r\n\tfunction setExpandedEntryKeys(keys)\r\n\t{\r\n\t\tif (keys.length > 0) storage.set(storageKey, keys);\r\n\t\telse storage.remove(storageKey);\r\n\t\tsetExpandedEntryKeys_state(keys);\r\n\t}\r\n\tfunction addExpandedEntryKey(key) { setExpandedEntryKeys(expandedEntryKeys.concat([key])); }\r\n\tfunction removeExpandedEntryKey(key) { setExpandedEntryKeys(expandedEntryKeys.filter((item) => item !== key)); }\r\n\tfunction isEntryExpanded(key) { return expandedEntryKeys.includes(key); }\r\n\r\n\tconst handleAccordionClick = (_, { index }) =>\r\n\t{\r\n\t\tif (!isEntryExpanded(index)) addExpandedEntryKey(index);\r\n\t\telse removeExpandedEntryKey(index);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Accordion style={{ margin: 0 }}>\r\n\t\t\t{lodash.toPairs(entries).map(([entryKey, entryProps]) => (\r\n\t\t\t\tReact.createElement(entryProps.storageAccordianComponent || entryComponentType, {\r\n\t\t\t\t\t...entryProps,\r\n\t\t\t\t\tkey: entryKey,\r\n\t\t\t\t\tactive: isEntryExpanded(entryKey) && (active === undefined || active === true),\r\n\t\t\t\t\tonClick: handleAccordionClick,\r\n\t\t\t\t})\r\n\t\t\t))}\r\n\t\t</Accordion>\r\n\t);\r\n}\r\n","\r\nexport const DISPLAY_MODES = {\r\n\tReadable: 'Readable',\r\n\tDetailed: 'Detailed',\r\n};\r\n\r\nexport function getDisplayIconForMode(displayMode)\r\n{\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return 'eye';\r\n\t\tcase DISPLAY_MODES.Detailed: return 'archive';\r\n\t\tdefault: return 'question';\r\n\t}\r\n}\r\n\r\nexport function getNextDisplayMode(displayMode)\r\n{\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return DISPLAY_MODES.Detailed;\r\n\t\tcase DISPLAY_MODES.Detailed: return DISPLAY_MODES.Readable;\r\n\t\tdefault: return DISPLAY_MODES.Detailed;\r\n\t}\r\n}\r\n\r\nexport function getDisplayModeSwitchLabel(displayMode)\r\n{\r\n\treturn `Switch to ${getNextDisplayMode(displayMode).toLowerCase()} mode`;\r\n}\r\n","import storage from 'local-storage';\r\n\r\nexport default class Filter\r\n{\r\n\r\n\tstatic all()\r\n\t{\r\n\t\treturn (storage.get('filters') || {});\r\n\t}\r\n\r\n\tstatic get(key)\r\n\t{\r\n\t\treturn Filter.all()[key];\r\n\t}\r\n\r\n\tstatic set(key, filter)\r\n\t{\r\n\t\tconst allFilters = Filter.all();\r\n\t\tallFilters[key] = filter;\r\n\t\tstorage.set('filters', allFilters);\r\n\t}\r\n\r\n\tstatic remove(key)\r\n\t{\r\n\t\tconst allFilters = Filter.all();\r\n\t\tdelete allFilters[key];\r\n\t\tstorage.set('filters', allFilters);\r\n\t}\r\n\r\n\tstatic clear()\r\n\t{\r\n\t\tstorage.set('filters', {});\r\n\t}\r\n\r\n}","import React, { useState } from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\nimport Filter from '../storage/Filter';\r\nimport InputRange from 'react-input-range';\r\nimport 'react-input-range/lib/css/index.css';\r\n\r\n// For ranges: https://github.com/davidchin/react-input-range\r\nexport function TableFilter({\r\n\ttableCollection, tableKey, storageKey\r\n})\r\n{\r\n\r\n\tfunction getTable()\r\n\t{\r\n\t\treturn tableCollection ? tableCollection.getTable(tableKey) : undefined;\r\n\t}\r\n\r\n\tconst [value, setValue] = useState(Filter.get(storageKey) || undefined);\r\n\r\n\tconst table = getTable();\r\n\tif (!table) return <div />;\r\n\r\n\tfunction isValueAValidFilter(value)\r\n\t{\r\n\t\tswitch (table.getFilterType())\r\n\t\t{\r\n\t\t\tcase 'minMaxRange':\r\n\t\t\t\treturn typeof value === 'object' && value.min && value.max;\r\n\t\t\tdefault:\r\n\t\t\t\treturn Array.isArray(value) && value.length > 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onDropdownChanged(value)\r\n\t{\r\n\t\tif (isValueAValidFilter(value))\r\n\t\t{\r\n\t\t\tFilter.set(storageKey, value);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tFilter.remove(storageKey);\r\n\t\t}\r\n\t\tsetValue(value);\r\n\t}\r\n\r\n\tswitch (table.getFilterType())\r\n\t{\r\n\t\tcase 'minMaxRange':\r\n\t\t\tconst defaultFilter = table.getDefaultFilter();\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{marginTop: '15px', marginBottom: '15px'}}>\r\n\t\t\t\t\t<InputRange\r\n\t\t\t\t\t\tminValue={defaultFilter.min}\r\n\t\t\t\t\t\tmaxValue={defaultFilter.max}\r\n\t\t\t\t\t\tvalue={value || defaultFilter}\r\n\t\t\t\t\t\tonChange={onDropdownChanged}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tfluid search selection multiple\r\n\t\t\t\t\tplaceholder={'No filter'}\r\n\t\t\t\t\toptions={table ? table.getDefaultFilter() : []}\r\n\t\t\t\t\tvalue={value || []}\r\n\t\t\t\t\tonChange={(_, { value }) => onDropdownChanged(value)}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t}\r\n}\r\n","import Filter from './Filter';\r\nimport lodash from 'lodash';\r\nimport { createExecutor } from '../generator/modules/createExecutor';\r\nimport { inlineEval, PURE_VARIABLE_REGEX } from '../generator/modules/evalAtCtx';\r\nimport NpcData from './NpcData';\r\n\r\nfunction objectEqualityDeepRecursive(a, b) {\r\n\tfor(const key in a) {\r\n\t\t\tif(!(key in b) || !objectEqualityDeepRecursive(a[key], b[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t}\r\n\tfor(var key in b) {\r\n\t\t\tif(!(key in a) || !objectEqualityDeepRecursive(a[key], b[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nclass EntryLinker\r\n{\r\n\r\n\tconstructor(owner, property, onEvent)\r\n\t{\r\n\t\tthis.owner = owner;\r\n\t\tthis.property = property;\r\n\t\t// entry keys that our owner has subscribed to\r\n\t\tthis.subscribingTo = [];\r\n\t\t// entry keys that have subscribed to our owner\r\n\t\tthis.subscribed = [];\r\n\t\tthis.onEvent = onEvent;\r\n\t}\r\n\r\n\tgetEntryForPath(entryPath)\r\n\t{\r\n\t\treturn this.owner.npc.getEntry(entryPath);\r\n\t}\r\n\r\n\tsubscribe(entryPaths)\r\n\t{\r\n\t\tthis.subscribingTo = lodash.uniq(entryPaths);\r\n\t\tentryPaths.forEach((path) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(path);\r\n\t\t\tif (entry) entry[this.property].add(this.owner);\r\n\t\t});\r\n\t}\r\n\r\n\tunsubscribe(entryPaths)\r\n\t{\r\n\t\tthis.subscribingTo = this.subscribingTo.filter((key) => !entryPaths.includes(key));\r\n\t\tentryPaths.forEach((path) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(path);\r\n\t\t\tif (entry) entry[this.property].remove(this.owner);\r\n\t\t});\r\n\t}\r\n\r\n\tadd(entry)\r\n\t{\r\n\t\tthis.subscribed.push(entry.getKeyPath());\r\n\t\tthis.subscribed = lodash.uniq(this.subscribed);\r\n\t}\r\n\r\n\tremove(entry)\r\n\t{\r\n\t\tconst entryKey = entry.getKeyPath();\r\n\t\tthis.subscribed = this.subscribed.filter((key) => key !== entryKey);\r\n\t}\r\n\r\n\tgetSubscribedKeys()\r\n\t{\r\n\t\treturn this.subscribed;\r\n\t}\r\n\r\n\tdispatchToSubscriptions(evt, args, appendArgsForEntry=(a)=>a)\r\n\t{\r\n\t\tthis.subscribingTo.forEach((entryPath) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(entryPath);\r\n\t\t\tconst linker = entry ? entry[this.property] : undefined;\r\n\t\t\tconst onEvt = linker ? linker.onEvent : undefined;\r\n\t\t\tif (onEvt) onEvt(evt, appendArgsForEntry(args, entryPath));\r\n\t\t});\r\n\t}\r\n\r\n\tdispatchToSubscribers(evt, args)\r\n\t{\r\n\t\tthis.subscribed.forEach((entryPath) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(entryPath);\r\n\t\t\tconst linker = entry ? entry[this.property] : undefined;\r\n\t\t\tconst onEvt = linker ? linker.onEvent : undefined;\r\n\t\t\tif (onEvt) onEvt(evt, args);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default class GeneratedEntry\r\n{\r\n\r\n\tconstructor(npcData)\r\n\t{\r\n\t\tthis.npc = npcData;\r\n\r\n\t\tthis.events = new EventTarget();\r\n\t\tthis.schemaEntry = undefined;\r\n\r\n\t\tthis.stringifyLinker = new EntryLinker(this, 'stringifyLinker', this.onStringifyLinkerEvent.bind(this));\r\n\t\tthis.stringifyCached = undefined;\r\n\r\n\t\tthis.generationDependencyLinker = new EntryLinker(this, 'generationDependencyLinker', this.onGenerationDependencyEvent.bind(this));\r\n\t\tthis.modifyingLinker = new EntryLinker(this, 'modifyingLinker', this.onModifiersChanged.bind(this));\r\n\t\tthis.collectionLinker = new EntryLinker(this, 'collectionLinker', this.onCollectionEntriesChanged.bind(this));\r\n\t\t\r\n\t\tthis.modifierSources = {};\r\n\t\tthis.totalModifyingValue = 0;\r\n\t\tthis.forcedFilter = {};\r\n\t\tthis.postOperationModifiers = {};\r\n\r\n\t\tthis.category = undefined;\r\n\t\tthis.key = undefined;\r\n\r\n\t\tthis.generated = undefined;\r\n\t\tthis.generatedChildren = undefined;\r\n\t}\r\n\r\n\treadEntry(entry)\r\n\t{\r\n\t\tthis.schemaEntry = entry;\r\n\t\tthis.key = entry.getKey();\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\tif (this.key === undefined) return undefined;\r\n\t\telse if (this.category !== undefined) return `${this.category}.${this.key}`;\r\n\t\telse if (this.parent !== undefined) return `${this.parent.getKeyPath()}.${this.key}`;\r\n\t\telse return this.key;\r\n\t}\r\n\r\n\tgetName()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tif (field.name !== undefined) return field.name;\r\n\t\tconst path = lodash.toPath(this.getKeyPath());\r\n\t\treturn path[path.length - 1]\r\n\t\t\t.split(/(?=[A-Z])/)\r\n\t\t\t.map(\r\n\t\t\t\t(word) => `${word[0].toUpperCase()}${word.substr(1).toLowerCase()}`\r\n\t\t\t).join(' ');\r\n\t}\r\n\r\n\tgetField()\r\n\t{\r\n\t\treturn this.schemaEntry;\r\n\t}\r\n\r\n\tgetGenerationMacro()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tif (!field.hasSource()) return undefined;\r\n\t\tconst macro = createExecutor(field.getSource());\r\n\t\tif (macro === undefined)\r\n\t\t{\r\n\t\t\tconsole.warn('Failed to find a valid exec source functor for field:', field);\r\n\t\t}\r\n\t\treturn macro;\r\n\t}\r\n\r\n\thasFilter(tableCollection)\r\n\t{\r\n\t\tconst sourceTableKey = this.getField().getSourceTableKey(tableCollection);\r\n\t\tconst table = sourceTableKey !== undefined ? tableCollection.getTable(sourceTableKey) : undefined;\r\n\t\treturn table ? table.hasFilter() : false;\r\n\t}\r\n\r\n\tgetFilterValue()\r\n\t{\r\n\t\tconst forcedFilter = Object.values(this.forcedFilter);\r\n\t\treturn forcedFilter.length > 0 ? forcedFilter : Filter.get(this.getKeyPath());\r\n\t}\r\n\r\n\tgetCanReroll()\r\n\t{\r\n\t\treturn this.schemaEntry.getCanReroll() && (!this.parent || this.parent.getCanReroll());\r\n\t}\r\n\r\n\tregenerate(globalData, getPreset)\r\n\t{\r\n\t\tthis.clearSaveState();\r\n\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t\tthis.modifyingLinker.unsubscribe(this.getModifyingEntryKeys());\r\n\t\tthis.generationDependencyLinker.unsubscribe(this.getGenerationDependencies());\r\n\t\tthis.stringifyLinker.unsubscribe(this.getStringifyDependencies());\r\n\t\t\r\n\t\tthis.collectionLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t});\r\n\t\tthis.collectionLinker.unsubscribe(this.getOurCollections());\r\n\r\n\t\tconst presetData = typeof getPreset === 'function' ? getPreset(this) : undefined;\r\n\r\n\t\t// TODO: filter out the current value so that we never \"regenerate\" into the same value.\r\n\t\t// unless of course its the only value possible, in which case, prevent generation entirely.\r\n\r\n\t\tconst context = {\r\n\t\t\t...globalData,\r\n\t\t\tfilter: this.getFilterValue(),\r\n\t\t\tpreset: presetData,\r\n\t\t};\r\n\t\tthis.generated = null;\r\n\r\n\t\tif (this.schemaEntry.value)\r\n\t\t{\r\n\t\t\tthis.generated = {\r\n\t\t\t\tvalue: presetData !== undefined ? presetData : this.schemaEntry.value\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet redirectPath = [];\r\n\t\t\tdo\r\n\t\t\t{\r\n\t\t\t\tlet macro = undefined;\r\n\t\t\t\t// grab the redirector from the previous generated entry\r\n\t\t\t\tlet redirector = this.generated && this.generated.entry && this.generated.entry.hasRedirector() ? this.generated.entry.getRedirector() : undefined;\r\n\t\t\t\tif (redirector !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tmacro = createExecutor(`{roll:${redirector}}`);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmacro = this.getGenerationMacro();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (macro === undefined) break;\r\n\t\t\t\t\r\n\t\t\t\tthis.generated = macro(redirector === undefined ? context : {...context, filter: undefined});\r\n\t\t\t\tif (this.generated && this.generated.entry && this.generated.entry.hasRedirector())\r\n\t\t\t\t{\r\n\t\t\t\t\tredirectPath.push(this.generated.entry.getKey());\r\n\t\t\t\t}\r\n\t\t\t} while (this.generated && this.generated.entry && this.generated.entry.hasRedirector());\r\n\t\t\tif (this.generated && redirectPath.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.generated.redirectPath = redirectPath;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.generatedChildren = this.generated && this.generated.entry && this.generated.entry.hasChildren()\r\n\t\t\t? lodash.mapValues(this.generated.entry.getChildren(), (child) =>\r\n\t\t\t{\r\n\t\t\t\tconst clone = new GeneratedEntry(this.npc);\r\n\t\t\t\tclone.readEntry(child);\r\n\t\t\t\tclone.parent = this;\r\n\t\t\t\treturn clone;\r\n\t\t\t}) : undefined;\r\n\t\tif (this.generatedChildren === undefined && this.schemaEntry && this.schemaEntry.hasChildren())\r\n\t\t{\r\n\t\t\tthis.generatedChildren = lodash.mapValues(this.schemaEntry.getChildren(), (child) =>\r\n\t\t\t{\r\n\t\t\t\tconst clone = new GeneratedEntry(this.npc);\r\n\t\t\t\tclone.readEntry(child);\r\n\t\t\t\tclone.parent = this;\r\n\t\t\t\treturn clone;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// TODO: Check to see if the entry actually changed at all (key may have changed of the underlying generated entry),\r\n\t\t// otherwise if the value hasn't changed, all of these updates are being processed for no reason.\r\n\r\n\t\tthis.updateString(globalData);\r\n\t\tthis.stringifyLinker.subscribe(this.getStringifyDependencies());\r\n\r\n\t\t// temporarily modify globalData until it can be accounted for later\r\n\t\t// we should probably just mark the data as dirty here instead of passing it through functions\r\n\t\tthis.getModifiedData(globalData);\r\n\t\tthis.writeSaveState();\r\n\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChanged', { detail: {} }));\r\n\r\n\t\tthis.collectionLinker.subscribe(this.getOurCollections());\r\n\t\tthis.collectionLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t});\r\n\r\n\t\tthis.stringifyLinker.dispatchToSubscribers('onChanged', { globalData });\r\n\r\n\t\tthis.generationDependencyLinker.subscribe(this.getGenerationDependencies());\r\n\t\tthis.generationDependencyLinker.dispatchToSubscribers('onChanged', { key: this.getKeyPath(), globalData });\r\n\r\n\t\tthis.modifyingLinker.subscribe(this.getModifyingEntryKeys());\r\n\r\n\t\tif (this.generatedChildren)\r\n\t\t{\r\n\t\t\tlodash.values(this.generatedChildren).forEach((child) => child.regenerate(globalData, getPreset));\r\n\t\t}\r\n\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\r\n\t\tif (this.parent) this.parent.onChildGenerated(this);\r\n\t}\r\n\r\n\tonChildGenerated(child)\r\n\t{\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChanged', { detail: {} }));\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t}\r\n\r\n\tgetGeneratedEntry()\r\n\t{\r\n\t\treturn this.generated ? this.generated.entry : undefined;\r\n\t}\r\n\r\n\tgetModifiedData(values)\r\n\t{\r\n\t\tconst localValue = this.getModifiedValue();\r\n\t\tlodash.set(values, this.getKeyPath(), lodash.assignIn(\r\n\t\t\ttypeof localValue === 'object' ? localValue : {},\r\n\t\t\t{\r\n\t\t\t\ttoString: () => typeof localValue === 'object' ? undefined : `${localValue}`,\r\n\t\t\t\tasString: this.toString(),\r\n\t\t\t}\r\n\t\t));\r\n\t\tif (this.hasChildren())\r\n\t\t{\r\n\t\t\tlodash.values(this.getChildren()).forEach(\r\n\t\t\t\t(child) => child.getModifiedData(values)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tgetChildModifiedData(values)\r\n\t{\r\n\t\tconst tmpValues = {};\r\n\t\tlodash.values(this.getChildren()).forEach(\r\n\t\t\t(child) => child.getModifiedData(tmpValues)\r\n\t\t);\r\n\t\tlodash.assign(values, lodash.get(tmpValues, this.getKeyPath()));\r\n\t}\r\n\r\n\taddListenerOnChanged(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onChanged', callback);\r\n\t}\r\n\r\n\tremoveListenerOnChanged(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onChanged', callback);\r\n\t}\r\n\r\n\t/**\r\n\t * If, when generated, the entry resulted in a tangible value (not just children and a stringify).\r\n\t**/\r\n\thasValue()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\treturn generated.value !== undefined;\r\n\t}\r\n\r\n\tgetRawValue()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\tconst generatedObjValue = generated.value !== undefined && generated.value.value !== undefined ? generated.value.value : generated.value;\r\n\t\tif (generatedObjValue !== undefined) return generatedObjValue;\r\n\t\treturn generated.entry !== undefined ? generated.entry.getKey() : undefined;\r\n\t}\r\n\r\n\tgetModifyingEntryData_internal()\r\n\t{\r\n\t\treturn (this.generated ? this.generated.modifiers : undefined) || {};\r\n\t}\r\n\r\n\tgetModifyingEntryData()\r\n\t{\r\n\t\treturn lodash.mapValues(this.getModifyingEntryData_internal(), (value, key) => this.getModifierFor(key));\r\n\t}\r\n\r\n\tgetModifierFor(keyPath)\r\n\t{\r\n\t\tconst getModifierInternal = (rawModifier) => {\r\n\t\t\tif (typeof rawModifier === 'object')\r\n\t\t\t{\r\n\t\t\t\tswitch (rawModifier.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'multiply':\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconst localData = {};\r\n\t\t\t\t\t\tthis.getChildModifiedData(localData);\r\n\t\t\t\t\t\tconst multiplier = inlineEval(rawModifier.value, localData);\r\n\t\t\t\t\t\tif (multiplier === undefined) return rawModifier;\r\n\t\t\t\t\t\tconst m = parseInt(multiplier, 10);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: rawModifier.type,\r\n\t\t\t\t\t\t\tmultiply: m,\r\n\t\t\t\t\t\t\ttoString: () => `*${m}`,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'multiplyAdd':\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconst localData = {};\r\n\t\t\t\t\t\tthis.getChildModifiedData(localData);\r\n\t\t\t\t\t\tconst multiplier = inlineEval(rawModifier.multiply, localData);\r\n\t\t\t\t\t\tconst adder = inlineEval(rawModifier.add, localData);\r\n\t\t\t\t\t\tif (multiplier === undefined || adder === undefined) return rawModifier;\r\n\t\t\t\t\t\tconst m = parseInt(multiplier, 10);\r\n\t\t\t\t\t\tconst a = parseInt(adder, 10);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: rawModifier.type,\r\n\t\t\t\t\t\t\tmultiply: m,\r\n\t\t\t\t\t\t\tadd: a,\r\n\t\t\t\t\t\t\ttoString: () => `*${m}+${a}`,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn rawModifier;\r\n\t\t};\r\n\r\n\t\tconst rawModifier = this.getModifyingEntryData_internal()[keyPath];\r\n\t\tif (Array.isArray(rawModifier)) return rawModifier.map(getModifierInternal);\r\n\t\telse return getModifierInternal(rawModifier);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the key paths of entries this item is currently modifying.\r\n\t**/\r\n\tgetModifyingEntryKeys()\r\n\t{\r\n\t\treturn Object.keys(this.getModifyingEntryData());\r\n\t}\r\n\r\n\t/**\r\n\t * Get the key paths of entries this item is currently being modified by.\r\n\t**/\r\n\tgetModifiedByEntryKeys()\r\n\t{\r\n\t\treturn {\r\n\t\t\t...this.modifierSources,\r\n\t\t\t...this.postOperationModifiers,\r\n\t\t\t...this.forcedFilter,\r\n\t\t}\r\n\t}\r\n\r\n\taddListenerOnModified(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onModified', callback);\r\n\t}\r\n\r\n\tremoveListenerOnModified(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onModified', callback);\r\n\t}\r\n\r\n\t/**\r\n\t * Called when some entry adds or removes their modifiers from the total list of things this item is modified by.\r\n\t**/\r\n\tonModifiersChanged(evt, args)\r\n\t{\r\n\t\tconst forcedFilter = lodash.cloneDeep(this.forcedFilter);\r\n\t\tif (Array.isArray(args.value)) args.value.forEach((v) => this.applyModifier(evt, args.source, v));\r\n\t\telse this.applyModifier(evt, args.source, args.value);\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onModified', { detail: {} }));\r\n\r\n\t\tconst globalData = this.npc.getModifiedData();\r\n\t\t// TODO: This check is very inefficient, but it works...\r\n\t\tif (!objectEqualityDeepRecursive(forcedFilter, this.forcedFilter))\r\n\t\t{\r\n\t\t\tthis.regenerate(globalData);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.updateString(globalData);\r\n\t\t}\r\n\t}\r\n\r\n\tapplyModifier(evt, source, value)\r\n\t{\r\n\t\tswitch (evt)\r\n\t\t{\r\n\t\t\tcase 'add':\r\n\t\t\t\t// These are forced value filters, where the value argument is the key of the desired value\r\n\t\t\t\tif (typeof value === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.forcedFilter[source] = value;\r\n\t\t\t\t}\r\n\t\t\t\t// A macro of sorts that is executed on compilation\r\n\t\t\t\telse if (typeof value === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.postOperationModifiers[source] = value;\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof value !== 'number') throw new Error(`Cannot use a modifier that is not a number: ${value}`);\r\n\t\t\t\telse if (value !== 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.modifierSources[source] = value;\r\n\t\t\t\t\tthis.totalModifyingValue += value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'remove':\r\n\t\t\t\t// These are forced value filters, where the value argument is the key of the desired value\r\n\t\t\t\tif (typeof value === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.forcedFilter[source];\r\n\t\t\t\t}\r\n\t\t\t\t// A macro of sorts that is executed on compilation\r\n\t\t\t\telse if (typeof value === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.postOperationModifiers[source];\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof value !== 'number') throw new Error(`Cannot use a modifier that is not a number: ${value}`);\r\n\t\t\t\telse if (value !== 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.modifierSources[source];\r\n\t\t\t\t\tthis.totalModifyingValue -= value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unknown modifiers changed event ${evt}, ${source}: ${value}`);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tgetModifiedValue()\r\n\t{\r\n\t\tlet value = this.getRawValue();\r\n\t\tif (typeof value === 'number')\r\n\t\t{\r\n\t\t\tconst postOperations = Object.values(this.postOperationModifiers);\r\n\t\t\tif (postOperations.length > 0)\r\n\t\t\t{\r\n\t\t\t\tvalue = postOperations.reduce((retVal, modifier) => {\r\n\t\t\t\t\tswitch (modifier.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'multiplyAdd':\r\n\t\t\t\t\t\t\treturn retVal * modifier.multiply + modifier.add;\r\n\t\t\t\t\t\tcase 'multiply':\r\n\t\t\t\t\t\t\treturn retVal;// * modifier.multiply;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthrow new Error('Cannot process modifier object', value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, value);\r\n\t\t\t}\r\n\t\t\tvalue += this.totalModifyingValue;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tgetStringifyTemplate()\r\n\t{\r\n\t\tconst genEntry = this.getGeneratedEntry();\r\n\t\treturn (genEntry ? genEntry.getStringifyTemplate() : undefined) || (this.schemaEntry.stringify);\r\n\t}\r\n\r\n\tgetStringifyDependencies()\r\n\t{\r\n\t\tconst template = this.getStringifyTemplate();\r\n\t\tif (!template) return [];\r\n\t\tconst allMatches = Array.from(template.matchAll(PURE_VARIABLE_REGEX));\r\n\t\tconst allNonlineageReplacements = allMatches.map((match) => match[1]).filter((key) => this.getChild(key) === undefined);\r\n\t\treturn allNonlineageReplacements;\r\n\t}\r\n\r\n\tupdateString(globalData)\r\n\t{\r\n\t\tconst localizedGlobalData = lodash.cloneDeep(globalData);\r\n\t\tthis.getChildModifiedData(localizedGlobalData);\r\n\r\n\t\tconst stringify = this.getStringifyTemplate();\r\n\t\tthis.stringifyCached = stringify ? inlineEval(stringify, localizedGlobalData) : `${this.getModifiedValue()}`;\r\n\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onUpdateString', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstring: this.stringifyCached\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tif (this.parent) this.parent.updateString(globalData);\r\n\t}\r\n\r\n\taddListenerOnUpdateString(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onUpdateString', callback);\r\n\t}\r\n\r\n\tremoveListenerOnUpdateString(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onUpdateString', callback);\r\n\t}\r\n\r\n\tisValueEquivalentToNone()\r\n\t{\r\n\t\treturn this.toString() === 'none';\r\n\t}\r\n\r\n\ttoString()\r\n\t{\r\n\t\treturn this.stringifyCached;\r\n\t}\r\n\r\n\tonStringifyLinkerEvent(evt, { globalData })\r\n\t{\r\n\t\tconsole.assert(evt === 'onChanged');\r\n\t\tthis.updateString(globalData);\r\n\t}\r\n\r\n\tgetGenerationDependencies()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tconst source = field.hasSource() ? field.getSource() : undefined;\r\n\t\tif (!source) return [];\r\n\t\tconst deps = [];\r\n\t\tfor (let match of source.matchAll(PURE_VARIABLE_REGEX))\r\n\t\t\tdeps.push(match[1]);\r\n\t\treturn deps;\r\n\t}\r\n\r\n\taddListenerOnUpdateCollection(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onUpdateCollection', callback);\r\n\t}\r\n\r\n\tremoveListenerOnUpdateCollection(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onUpdateCollection', callback);\r\n\t}\r\n\r\n\tonGenerationDependencyEvent(evt, { key, globalData })\r\n\t{\r\n\t\tconsole.assert(evt === 'onChanged');\r\n\t\tthis.regenerate(globalData);\r\n\t}\r\n\r\n\tgetOurCollections()\r\n\t{\r\n\t\treturn this.schemaEntry.collection !== undefined ? [this.schemaEntry.collection] : [];\r\n\t}\r\n\r\n\tgetCollectionEntryKeys()\r\n\t{\r\n\t\treturn this.collectionLinker.getSubscribedKeys();\r\n\t}\r\n\r\n\tonCollectionEntriesChanged(evt, {source})\r\n\t{\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onUpdateCollection', {\r\n\t\t\tdetail: {\r\n\t\t\t\tentryKeys: this.getCollectionEntryKeys()\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\r\n\thasChildren()\r\n\t{\r\n\t\treturn this.generatedChildren && Object.keys(this.generatedChildren).length > 0;\r\n\t}\r\n\r\n\tgetChildren()\r\n\t{\r\n\t\treturn this.hasChildren() ? this.generatedChildren : {};\r\n\t}\r\n\r\n\tgetChild(subpath)\r\n\t{\r\n\t\tconst { items, remaining } = NpcData.sever(subpath);\r\n\t\tconst children = this.getChildren();\r\n\t\tif (children.hasOwnProperty(items[0]))\r\n\t\t{\r\n\t\t\tconst child = children[items[0]];\r\n\t\t\treturn remaining.length > 0 ? child.getChild(remaining) : child;\r\n\t\t}\r\n\t\telse if (lodash.has(this.getRawValue(), subpath)) return this;\r\n\t\telse\r\n\t\t{\r\n\t\t\t//console.warn(`Could not find entry with subpath ${subpath} under entry ${this.getKeyPath()}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tgetSaveState()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\tif (generated.entry) return generated.entry.getKey();\r\n\t\telse if (typeof generated.value !== 'object') return generated.value;\r\n\t\telse return undefined;\r\n\t}\r\n\r\n\tclearSaveState()\r\n\t{\r\n\t\tthis.npc.updateSaveState(this.getKeyPath(), undefined);\r\n\t\tObject.values(this.getChildren()).forEach((child) => child.clearSaveState());\r\n\t}\r\n\r\n\twriteSaveState()\r\n\t{\r\n\t\tlet saveState = this.getSaveState();\r\n\t\tif (this.generated && Array.isArray(this.generated.redirectPath)) saveState = this.generated.redirectPath.concat([saveState]);\r\n\t\tthis.npc.updateSaveState(this.getKeyPath(), saveState);\r\n\t}\r\n\r\n}","import lodash from 'lodash';\r\nimport TableCollection from './TableCollection';\r\nimport GeneratedEntry from './GeneratedEntry';\r\nimport storage from 'local-storage';\r\n\r\nlet NPC_TEMPORARY_DATA = null;\r\n\r\nexport default class NpcData\r\n{\r\n\r\n\tstatic EVENTS = new EventTarget();\r\n\tstatic EVENT_INITIALIZED = 'onInitialized';\r\n\r\n\tstatic sever(fullKey, itemCount = 1)\r\n\t{\r\n\t\tconst path = lodash.toPath(fullKey);\r\n\t\treturn {\r\n\t\t\titems: path.slice(0, itemCount),\r\n\t\t\tremaining: path.slice(itemCount).join('.'),\r\n\t\t};\r\n\t}\r\n\r\n\tstatic toggleOnInitialized(status, callback)\r\n\t{\r\n\t\tswitch (status)\r\n\t\t{\r\n\t\t\tcase 'on':\r\n\t\t\t\tNpcData.EVENTS.addEventListener(NpcData.EVENT_INITIALIZED, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'off':\r\n\t\t\t\tNpcData.EVENTS.removeEventListener(NpcData.EVENT_INITIALIZED, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getSchema()\r\n\t{\r\n\t\tconst tableCollection = TableCollection.get();\r\n\t\treturn tableCollection ? tableCollection.getNpcSchema() : undefined;\r\n\t}\r\n\r\n\tstatic initialize(presetData)\r\n\t{\r\n\t\tconst schema = NpcData.getSchema();\r\n\t\tif (!schema) { return; }\r\n\t\t\r\n\t\tconsole.log('Initializing NPC data');\r\n\t\tconst data = new NpcData();\r\n\r\n\t\tconst fields = schema.getFields();\r\n\t\tfor (let field of fields)\r\n\t\t{\r\n\t\t\tdata.addEntry(field);\r\n\t\t}\r\n\r\n\t\tNPC_TEMPORARY_DATA = data;\r\n\r\n\t\tNpcData.EVENTS.dispatchEvent(new CustomEvent(this.EVENT_INITIALIZED, {\r\n\t\t\tdetail: { npc: NPC_TEMPORARY_DATA }\r\n\t\t}));\r\n\r\n\t\tNPC_TEMPORARY_DATA.regenerateAll(presetData);\r\n\t}\r\n\r\n\tstatic get()\r\n\t{\r\n\t\treturn NPC_TEMPORARY_DATA;\r\n\t}\r\n\r\n\tstatic clear()\r\n\t{\r\n\t\tNpcData.initialize();\r\n\t}\r\n\r\n\tstatic getState()\r\n\t{\r\n\t\treturn storage.get('npc');\r\n\t}\r\n\r\n\tstatic getLink()\r\n\t{\r\n\t\tconst stateString = JSON.stringify(NpcData.getState());\r\n\t\tconst encoded = encodeURIComponent(stateString);\r\n\t\treturn `${window.location.href.split(window.location.pathname)[0]}/npc?npc=${encoded}`;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.events = new EventTarget();\r\n\r\n\t\tthis.entries = {};\r\n\t\tthis.categories = {};\r\n\r\n\t\tthis.saveState = {};\r\n\t}\r\n\r\n\ttoggleListener(event, status, callback)\r\n\t{\r\n\t\tswitch (status)\r\n\t\t{\r\n\t\t\tcase 'on':\r\n\t\t\t\tthis.events.addEventListener(event, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'off':\r\n\t\t\t\tthis.events.removeEventListener(event, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\taddEntry(field)\r\n\t{\r\n\t\tconst entry = new GeneratedEntry(this);\r\n\t\tentry.readEntry(field);\r\n\t\tentry.category = field.getCategory();\r\n\t\tthis.entries[entry.getKeyPath()] = entry;\r\n\t\tthis.categories[field.category] = (this.categories[field.getCategory()] || []).concat([field.getKey()]);\r\n\t}\r\n\r\n\tgetEntry(keyPath)\r\n\t{\r\n\t\tconst { items, remaining } = NpcData.sever(keyPath, 2);\r\n\t\tconst entry = this.entries[`${items[0]}.${items[1]}`];\r\n\t\treturn remaining.length > 0 ? entry.getChild(remaining) : entry;\r\n\t}\r\n\r\n\tgetCategories()\r\n\t{\r\n\t\treturn Object.keys(this.categories).sort();\r\n\t}\r\n\r\n\tgetEntriesForCategory(category)\r\n\t{\r\n\t\treturn (this.categories[category] || []).sort();\r\n\t}\r\n\r\n\tregenerateAll(presetData)\r\n\t{\r\n\t\tconst schema = NpcData.getSchema();\r\n\t\tconst globalData = {};\r\n\t\tfor (let entryKey of schema.getGenerationOrder())\r\n\t\t{\r\n\t\t\tconst entry = this.entries[entryKey];\r\n\t\t\tconst getPreset = (e) => presetData !== undefined ? lodash.cloneDeep(presetData[e.getKeyPath()]) : undefined;\r\n\t\t\tentry.regenerate(globalData, getPreset);\r\n\t\t\tentry.getModifiedData(globalData);\r\n\t\t}\r\n\t\tthis.save();\r\n\t}\r\n\r\n\tforAllEntries(loop)\r\n\t{\r\n\t\tlodash.values(this.entries).forEach(loop);\r\n\t}\r\n\r\n\tgetModifiedData()\r\n\t{\r\n\t\tconst values = {}\r\n\t\tthis.forAllEntries((entry) => entry.getModifiedData(values));\r\n\t\treturn values;\r\n\t}\r\n\r\n\tupdateSaveState(key, state)\r\n\t{\r\n\t\tif (state === undefined) { delete this.saveState[key]; }\r\n\t\telse this.saveState[key] = state;\r\n\t}\r\n\r\n\tsave()\r\n\t{\r\n\t\tstorage.set('npc', this.saveState);\r\n\t}\r\n\r\n}"," /*eslint no-unused-vars: [0, {\"args\": \"after-used\", \"argsIgnorePattern\": \"^_\"}]*/\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { Accordion, Icon, Button, Menu, Form, Popup, Header } from 'semantic-ui-react';\r\nimport { TableFilter } from '../TableFilter';\r\nimport { StorageAccordion } from '../StorageAccordion';\r\nimport { camelCaseToTitle } from '../../lib/str';\r\nimport NpcData from '../../storage/NpcData';\r\nimport * as shortid from 'shortid';\r\nimport { inlineEval } from '../../generator/modules/evalAtCtx';\r\nimport lodash from 'lodash';\r\n\r\n/*\r\nfunction DataViewEntryCategory({\r\n\ttitleKey, description, children,\r\n\tactive, onClick\r\n})\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Accordion.Title\r\n\t\t\t\tindex={titleKey}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t>\r\n\t\t\t\t{camelCaseToTitle(titleKey)} <Icon name='dropdown' />\r\n\t\t\t</Accordion.Title>\r\n\t\t\t<Accordion.Content active={active}>\r\n\t\t\t\t{description}\r\n\t\t\t\t{children}\r\n\t\t\t</Accordion.Content>\r\n\t\t</div>\r\n\t);\r\n}\r\n//*/\r\n\r\nfunction makeModifierPopup(title, popupTitle, itemMap)\r\n{\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\ttrigger={<label>{title} ({Object.keys(itemMap).length})</label>}\r\n\t\t\tcontent={(\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Header as='h5'>{popupTitle}</Header>\r\n\t\t\t\t\t{Object.keys(itemMap).map((key) => (\r\n\t\t\t\t\t\t<div key={key}>\r\n\t\t\t\t\t\t\t{key}: {JSON.stringify(itemMap[key])}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction EntryView({\r\n\ttableCollection, npcSchema, npc,\r\n\tpropertyKey, storageKey,\r\n\tentry, parentEntry,\r\n\tactive, onClick, // from StorageAccordion\r\n})\r\n{\r\n\t// TODO: this is ineffecient, but it cant be passed in b/c passing through react copies objects, does not pass by ref.\r\n\t// maybe add functionality to cache data until it is marked as dirty.\r\n\tconst npcModifiedData = npc.getModifiedData();\r\n\tconst sourceTableKey = parentEntry.getSourceTableKey(tableCollection);\r\n\tconst isMissingSourceTable = parentEntry.isMissingSourceTable(tableCollection, (k) => inlineEval(k, npcModifiedData));\r\n\r\n\tconst refresh = React.useState(undefined)[1];\r\n\tuseEffect(() => {\r\n\t\tfunction onChanged({ details }) { refresh(shortid.generate()); }\r\n\t\tentry.addListenerOnChanged(onChanged);\r\n\t\tentry.addListenerOnUpdateString(onChanged);\r\n\t\tentry.addListenerOnModified(onChanged);\r\n\t\tentry.addListenerOnUpdateCollection(onChanged);\r\n\t\treturn () => {\r\n\t\t\tentry.removeListenerOnChanged(onChanged)\r\n\t\t\tentry.removeListenerOnUpdateString(onChanged);\r\n\t\t\tentry.removeListenerOnModified(onChanged);\r\n\t\t\tentry.removeListenerOnUpdateCollection(onChanged);\r\n\t\t};\r\n\t});\r\n\r\n\tconst rawValue = entry.getRawValue();\r\n\tconst modifiedValue = entry.getModifiedValue();\r\n\tconst hasFilter = entry.hasFilter(tableCollection);\r\n\tconst modifiersFromEntry = entry.getModifyingEntryData();\r\n\tconst modifiersFromEntryCount = entry.getModifyingEntryKeys().length;\r\n\tconst hasModifiers = modifiersFromEntryCount > 0;\r\n\tconst modifiersOfEntry = entry.getModifiedByEntryKeys();\r\n\tconst isModified = Object.keys(modifiersOfEntry).length > 0;\r\n\tconst stringifyDeps = entry.getStringifyDependencies();\r\n\tconst stringifySubscribed = entry.stringifyLinker.getSubscribedKeys();\r\n\tconst generationDependencies = entry.getGenerationDependencies();\r\n\tconst generationDependedOnBy = entry.generationDependencyLinker.getSubscribedKeys();\r\n\tconst canRegenerate = entry.getCanReroll();\r\n\tconst collectionEntryKeys = entry.getCollectionEntryKeys();\r\n\tconst collectionEntryObj = collectionEntryKeys.reduce((accum, entryKey) => {\r\n\t\tconst collectionEntry = npc.getEntry(entryKey);\r\n\t\tif (collectionEntry && !collectionEntry.isValueEquivalentToNone())\r\n\t\t\taccum[entryKey] = collectionEntry.toString();\r\n\t\treturn accum;\r\n\t}, {})\r\n\r\n\tif (active)\r\n\t{\r\n\t\t//console.log(entry, collectionEntryKeys);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Menu secondary style={{ marginBottom: 0 }}>\r\n\t\t\t\t<Menu.Item fitted>\r\n\t\t\t\t\t<Accordion.Title\r\n\t\t\t\t\t\tindex={propertyKey}\r\n\t\t\t\t\t\tactive={!isMissingSourceTable && active}\r\n\t\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isMissingSourceTable && <Icon name='dropdown' />}\r\n\t\t\t\t\t\t{camelCaseToTitle(propertyKey)}\r\n\t\t\t\t\t\t<span> - {entry.toString()}</span>\r\n\t\t\t\t\t\t{isMissingSourceTable && (\r\n\t\t\t\t\t\t\t<span> - No generator available</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Accordion.Title>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t{!isMissingSourceTable && canRegenerate && <Menu.Item fitted position='right'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ticon={'refresh'}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tentry.regenerate(npcModifiedData);\r\n\t\t\t\t\t\t\tnpc.save();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcontent={camelCaseToTitle(propertyKey)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Menu.Item>}\r\n\t\t\t</Menu>\r\n\t\t\t{!isMissingSourceTable && active && <Accordion.Content\r\n\t\t\t>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tborderLeft: '2px solid rgba(34,36,38,.15)',\r\n\t\t\t\t\tpaddingLeft: '10px',\r\n\t\t\t\t\tmarginLeft: '7px',\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Form.Group widths={'equal'} style={hasFilter && !entry.hasValue() ? {margin: 0} : {}}>\r\n\t\t\t\t\t\t\t{hasFilter && (\r\n\t\t\t\t\t\t\t\t<Form.Field\r\n\t\t\t\t\t\t\t\t\tlabel={'Filter'}\r\n\t\t\t\t\t\t\t\t\tcontrol={TableFilter}\r\n\t\t\t\t\t\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\t\t\t\t\t\ttableKey={sourceTableKey !== undefined ? inlineEval(sourceTableKey, npcModifiedData) : undefined}\r\n\t\t\t\t\t\t\t\t\tstorageKey={entry.getKeyPath()}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{entry.hasValue() && <Form.Field>\r\n\t\t\t\t\t\t\t\t<label>Generated Value</label>\r\n\t\t\t\t\t\t\t\t{rawValue !== undefined ? rawValue : (\r\n\t\t\t\t\t\t\t\t\t<span style={{ color: 'red' }}>Not Generated</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t\t{entry.hasValue() && <Form.Field>\r\n\t\t\t\t\t\t\t\t<label>Value with Modifiers</label>\r\n\t\t\t\t\t\t\t\t{modifiedValue !== undefined ? modifiedValue : (\r\n\t\t\t\t\t\t\t\t\t<span style={{ color: 'red' }}>Not Generated</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group widths={'equal'} style={\r\n\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\thasModifiers\r\n\t\t\t\t\t\t\t\t|| isModified\r\n\t\t\t\t\t\t\t\t|| stringifyDeps.length > 0\r\n\t\t\t\t\t\t\t\t|| stringifySubscribed.length > 0\r\n\t\t\t\t\t\t\t\t|| generationDependencies.length > 0\r\n\t\t\t\t\t\t\t\t|| generationDependedOnBy.length > 0\r\n\t\t\t\t\t\t\t) ? {margin: 0} : {}\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t{hasModifiers && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Modifies', 'Modifies Entries', modifiersFromEntry\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{isModified && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Modified By', 'Modified by Entries', modifiersOfEntry\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{stringifyDeps.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'String Dependencies', 'String Dependencies', stringifyDeps\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{stringifySubscribed.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'String Subscriptions', 'String Subscriptions', stringifySubscribed\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{generationDependencies.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Dependencies', 'Generation Dependencies', generationDependencies\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{generationDependedOnBy.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Depended On By', 'Generations That Depend on entry', generationDependedOnBy\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{collectionEntryKeys.length > 0 && <Form.Field>\r\n\t\t\t\t\t\t\t\t{makeModifierPopup('Other Values', 'Collective Values', collectionEntryObj)}\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t{lodash.toPairs(collectionEntryObj).map(([entryKey, stringified]) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={entryKey}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Popup key={entryKey}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttrigger={(<p>{stringified}</p>)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent={(`Source: ${entryKey}`)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t{entry.hasChildren() && <StorageAccordion\r\n\t\t\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\t\t\tentryComponentType={EntryView}\r\n\t\t\t\t\t\tentries={lodash.toPairs(entry.getChildren()).reduce((accum, [childKey, childEntry]) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taccum[childKey] = {\r\n\t\t\t\t\t\t\t\ttableCollection: tableCollection,\r\n\t\t\t\t\t\t\t\tnpcSchema: npcSchema,\r\n\t\t\t\t\t\t\t\tnpc: npc,\r\n\t\t\t\t\t\t\t\tnpcModifiedData: npcModifiedData,\r\n\t\t\t\t\t\t\t\tpropertyKey: childKey,\r\n\t\t\t\t\t\t\t\tstorageKey: `${storageKey}.${childKey}`,\r\n\t\t\t\t\t\t\t\tentry: childEntry,\r\n\t\t\t\t\t\t\t\tparentEntry: childEntry.schemaEntry,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn accum;\r\n\t\t\t\t\t\t}, {})}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t</Accordion.Content>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DataViewEntry({\r\n\tpropertyKey, tableCollection, entryKey, storageKey,\r\n\tactive, onClick,\r\n})\r\n{\r\n\tconst npcSchema = tableCollection ? tableCollection.getNpcSchema() : null;\r\n\tconst npc = NpcData.get();\r\n\tconst entry = npc.getEntry(entryKey);\r\n\r\n\tconst parentEntry = entry.getField();\r\n\r\n\treturn (\r\n\t\t<EntryView\r\n\t\t\ttableCollection={tableCollection} npcSchema={npcSchema} npc={npc}\r\n\r\n\t\t\tpropertyKey={propertyKey} storageKey={storageKey}\r\n\t\t\tentry={entry} parentEntry={parentEntry}\r\n\r\n\t\t\tactive={active} onClick={onClick}\r\n\t\t/>\r\n\t)\r\n}\r\n","import React from 'react';\r\nimport NpcData from '../../storage/NpcData';\r\nimport lodash from 'lodash';\r\nimport { Header, Button, List, Popup, Table, Grid, Divider } from 'semantic-ui-react';\r\nimport * as shortid from 'shortid';\r\n\r\nfunction toFeet(n)\r\n{\r\n\tconst realFeet = ((n * 0.393700) / 12);\r\n\tconst feet = Math.floor(realFeet);\r\n\tconst inches = Math.floor((realFeet - feet) * 12);\r\n\treturn feet + \"'\" + inches + '\"';\r\n}\r\n\r\nfunction toSentenceCase(sentence)\r\n{\r\n\treturn sentence.length <= 0 ? '' : (\r\n\t\tsentence[0].toUpperCase() + sentence.slice(1)\r\n\t);\r\n}\r\n\r\nfunction getRenderedText(text, entry)\r\n{\r\n\tif (typeof text === 'function')\r\n\t{\r\n\t\treturn text(entry);\r\n\t}\r\n\telse if (text !== undefined)\r\n\t{\r\n\t\treturn text;\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn entry.toString();\r\n\t}\r\n}\r\n\r\nfunction InlineEntryItem({\r\n\tentry, rerollAs, globalData, text,\r\n})\r\n{\r\n\tconst refresh = React.useState(undefined)[1];\r\n\tReact.useEffect(() => {\r\n\t\tfunction onChanged(evt) { refresh(shortid.generate()); }\r\n\t\tentry.addListenerOnChanged(onChanged);\r\n\t\tentry.addListenerOnUpdateString(onChanged);\r\n\t\tentry.addListenerOnModified(onChanged);\r\n\t\tentry.addListenerOnUpdateCollection(onChanged);\r\n\t\treturn () => {\r\n\t\t\tentry.removeListenerOnChanged(onChanged)\r\n\t\t\tentry.removeListenerOnUpdateString(onChanged);\r\n\t\t\tentry.removeListenerOnModified(onChanged);\r\n\t\t\tentry.removeListenerOnUpdateCollection(onChanged);\r\n\t\t};\r\n\t});\r\n\tconst renderedText = getRenderedText(text, entry);\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\thoverable={true}\r\n\t\t\ttrigger={(<span style={{\r\n\t\t\t\tcolor: \"#4400ff\",\r\n\t\t\t\tfontWeight: 'bold'\r\n\t\t\t}}>{renderedText}</span>)}\r\n\t\t\tcontent={(\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tpath={rerollAs || entry.getKeyPath()} size='mini' icon='refresh'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tentry.regenerate(globalData);\r\n\t\t\t\t\t\t\tentry.npc.save();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label>{entry.getName()}: {renderedText}</label>\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport function ArticleContent({ usePlainText })\r\n{\r\n\tconst npc = NpcData.get();\r\n\tconst globalData = npc.getModifiedData();\r\n\r\n\t\r\n\tconst createEntryItem = (entry, text=undefined, rerollAs=undefined) =>\r\n\t{\r\n\t\tif (!entry) { return <div />; }\r\n\t\tif (usePlainText || !entry.getCanReroll())\r\n\t\t{\r\n\t\t\treturn getRenderedText(text, entry);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<InlineEntryItem\r\n\t\t\t\tentry={entry}\r\n\t\t\t\trerollAs={rerollAs}\r\n\t\t\t\tglobalData={globalData}\r\n\t\t\t\ttext={text}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\t\r\n\tconst strength = npc.getEntry('stats.abilityScores.strength');\r\n\tconst dexterity = npc.getEntry('stats.abilityScores.dexterity');\r\n\tconst constitution = npc.getEntry('stats.abilityScores.constitution');\r\n\tconst intelligence = npc.getEntry('stats.abilityScores.intelligence');\r\n\tconst wisdom = npc.getEntry('stats.abilityScores.wisdom');\r\n\tconst charisma = npc.getEntry('stats.abilityScores.charisma');\r\n\tconst ethicalPositive = npc.getEntry('stats.alignmentTendancies.ethical.positive');\r\n\tconst ethicalNeutral = npc.getEntry('stats.alignmentTendancies.ethical.neutral');\r\n\tconst ethicalNegative = npc.getEntry('stats.alignmentTendancies.ethical.negative');\r\n\tconst moralPositive = npc.getEntry('stats.alignmentTendancies.moral.positive');\r\n\tconst moralNeutral = npc.getEntry('stats.alignmentTendancies.moral.neutral');\r\n\tconst moralNegative = npc.getEntry('stats.alignmentTendancies.moral.negative');\r\n\r\n\tconst name = npc.getEntry('identity.name');\r\n\tconst surname = npc.getEntry('identity.surname');\r\n\tconst pronouns = npc.getEntry('identity.pronouns');\r\n\tconst genderIdentity = npc.getEntry('identity.genderIdentity');\r\n\tconst genderExpression = npc.getEntry('identity.genderExpression');\r\n\tconst sex = npc.getEntry('identity.sex');\r\n\tconst romanticIdentity = npc.getEntry('identity.romanticIdentity');\r\n\tconst sexualIdentity = npc.getEntry('identity.sexualIdentity');\r\n\tconst sexualOrientation = npc.getEntry('identity.sexualOrientation');\r\n\r\n\tconst profession = npc.getEntry('occupation.profession');\r\n\r\n\tconst age = npc.getEntry('description.age');\r\n\tconst eyeColor = npc.getEntry('description.eyeColor');\r\n\tconst height = npc.getEntry('description.height');\r\n\tconst weight = npc.getEntry('description.weight');\r\n\tconst face = npc.getEntry('description.face');\r\n\tconst race = npc.getEntry('description.race');\r\n\tconst hair = npc.getEntry('description.race.hair');\r\n\tconst skin = npc.getEntry('description.race.skin');\r\n\r\n\tconst physicalTraitsMap = npc.getEntry('description.specialPhysical').getChildren();\r\n\tconst physicalTraits = lodash.values(physicalTraitsMap).map((entry) => (\r\n\t\t<List.Item key={entry.getKeyPath()} as='li'>\r\n\t\t\t{createEntryItem(entry, (e) => toSentenceCase(e.toString()))}\r\n\t\t</List.Item>\r\n\t));\r\n\r\n\tconst deity = npc.getEntry('personality.religion.deity');\r\n\tconst worship = npc.getEntry('personality.religion.worship');\r\n\tconst quirks = npc.getEntry('personality.quirks');\r\n\tconst quirkList = quirks.getCollectionEntryKeys()\r\n\t\t.map((entryKey) => npc.getEntry(entryKey))\r\n\t\t.filter((entry) => !entry.isValueEquivalentToNone())\r\n\t\t.map((entry) => (\r\n\t\t\t<List.Item key={entry.getKeyPath()} as='li'>\r\n\t\t\t\t{createEntryItem(entry, (e) => toSentenceCase(e.toString()))}\r\n\t\t\t</List.Item>\r\n\t\t));\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{usePlainText && (\r\n\t\t\t\t<p>View generation at <a href={NpcData.getLink()}>D&amp;D-Generator</a></p>\r\n\t\t\t)}\r\n\r\n\t\t\t<Header as='h1' content='Description' />\r\n\t\t\t<List bulleted as='ul'>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{createEntryItem(name)}{surname.hasValue() && createEntryItem(surname, (e) => ` ${e.toString()}`)}\r\n\t\t\t\t\t&nbsp; is a &nbsp;\r\n\t\t\t\t\t{createEntryItem(age)} year old &nbsp;\r\n\t\t\t\t\t{createEntryItem(genderIdentity)} &nbsp;\r\n\t\t\t\t\t{createEntryItem(race)} &nbsp;\r\n\t\t\t\t\t{createEntryItem(profession, undefined, 'occupation.type')}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; has &nbsp;\r\n\t\t\t\t\t{createEntryItem(eyeColor, (e) => `${e.toString()} eyes`)}\r\n\t\t\t\t\t&nbsp; and &nbsp;\r\n\t\t\t\t\t{createEntryItem(hair)}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; has &nbsp;\r\n\t\t\t\t\t{createEntryItem(skin)}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; stands &nbsp;\r\n\t\t\t\t\t{createEntryItem(height, (e) => `${e.toString()}cm (${toFeet(e.getModifiedValue())})`)}\r\n\t\t\t\t\t&nbsp; tall and has a &nbsp;\r\n\t\t\t\t\t{createEntryItem(weight)} build.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; has an &nbsp;\r\n\t\t\t\t\t{createEntryItem(face)} face.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t{physicalTraits}\r\n\t\t\t</List>\r\n\r\n\t\t\t<Header as='h1' content='Identity' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Pronouns</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(pronouns)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Gender Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(genderIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Gender Expression</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(genderExpression)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sex</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sex)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Romantic Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(romanticIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sexual Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sexualIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sexual Orientation</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sexualOrientation)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\r\n\t\t\t<Header as='h1' content='Personality' />\r\n\t\t\t<List bulleted as='ul'>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; {createEntryItem(worship)} worships {createEntryItem(deity)}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t{quirkList}\r\n\t\t\t</List>\r\n\r\n\t\t\t<Header as='h1' content='Stats' />\r\n\r\n\t\t\t<Header as='h2' content='Ability Scores' />\r\n\t\t\t<Table striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Strength</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{strength.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Dexterity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{dexterity.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Constitution</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{constitution.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Intelligence</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{intelligence.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Wisdom</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{wisdom.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Charisma</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{charisma.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t\t\r\n\t\t\t<Header as='h2' content='Alignment Tendencies' />\r\n\t\t\t<Header as='h3' content='Ethical' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Lawful</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalPositive)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Neutral</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalNeutral)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Chaotic</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalNegative)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t\t<Header as='h3' content='Moral' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Good</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralPositive)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Neutral</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralNeutral)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Evil</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralNegative)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\r\n\t\t\t{/*<Header as='h1' content='Plot Hook' />*/}\r\n\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport { Header, Button, Icon, Popup, Menu, Dropdown } from 'semantic-ui-react';\r\nimport {\r\n\tgetDisplayIconForMode,\r\n\tgetDisplayModeSwitchLabel,\r\n} from './EDisplayModes';\r\nimport NpcData from '../../storage/NpcData';\r\nimport copyToClipboard from '../../lib/clipboard';\r\nimport Filter from '../../storage/Filter';\r\nimport { renderToString } from 'react-dom/server';\r\nimport { ArticleContent } from './ArticleContent';\r\n\r\nexport function MenuBar({\r\n\tswitchDisplayMode,\r\n\tdisplayMode,\r\n\tmenuItemsRight,\r\n\tgetEntryLink,\r\n})\r\n{\r\n\t// TODO: Figure out how to keep the switch view mode popup open when the item is clicked\r\n\treturn (\r\n\t\t<Menu borderless pointing secondary>\r\n\t\t\t<Menu.Item onClick={switchDisplayMode}>\r\n\t\t\t\t<Popup\r\n\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\tcontent={'Switch view mode'/*getDisplayModeSwitchLabel(displayMode)*/}\r\n\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t<Header>\r\n\t\t\t\t\t\t\t<Icon name={getDisplayIconForMode(displayMode)} />\r\n\t\t\t\t\t\t\t<Header.Content>NPC</Header.Content>\r\n\t\t\t\t\t\t</Header>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Menu.Item>\r\n\t\t\t<Menu.Menu position='right'>\r\n\t\t\t\t{menuItemsRight || []}\r\n\t\t\t\t<Dropdown key='export' item text={'Copy To Clipboard'}>\r\n\t\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t\t<Dropdown.Item icon='linkify' text='Generator Link' onClick={() => copyToClipboard(NpcData.getLink())} />\r\n\t\t\t\t\t\t<Dropdown.Item icon='file text' text='Article' onClick={() => {\r\n\t\t\t\t\t\t\tcopyToClipboard(renderToString(\r\n\t\t\t\t\t\t\t\t<ArticleContent usePlainText={true} />\r\n\t\t\t\t\t\t\t));\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t<Dropdown.Item icon='code' text='JSON' onClick={() => copyToClipboard(JSON.stringify(NpcData.getState()))} />\r\n\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t\t<Menu.Item>\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\t\tcontent={'Clear All Filters'}\r\n\t\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\t\tonClick={Filter.clear}\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 2, marginRight: 2, }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon.Group>\r\n\t\t\t\t\t\t\t\t\t<Icon name='filter' />\r\n\t\t\t\t\t\t\t\t\t<Icon name='cancel' corner='bottom right' />\r\n\t\t\t\t\t\t\t\t</Icon.Group>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\t\tcontent={'Delete generated data'}\r\n\t\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon={'trash'}\r\n\t\t\t\t\t\t\t\tonClick={NpcData.clear}\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 2, marginRight: 2, }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t</Menu.Menu>\r\n\t\t</Menu>\r\n\t);\r\n}","import React from 'react';\r\nimport { Accordion, Icon } from 'semantic-ui-react';\r\nimport { camelCaseToTitle } from '../../lib/str';\r\nimport { StorageAccordion } from '../StorageAccordion';\r\nimport { DISPLAY_MODES } from './EDisplayModes';\r\nimport { DataViewEntry } from './DetailViewEntry';\r\nimport NpcData from '../../storage/NpcData';\r\nimport { ViewContainer } from '../../view/ViewContainer';\r\nimport { MenuBar } from './MenuBar';\r\n\r\nfunction DetailViewCategory({\r\n\tpropertyKey, tableCollection,\r\n\tcategoryFields, storageKey,\r\n\tactive, onClick,\r\n})\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Accordion.Title\r\n\t\t\t\tindex={propertyKey}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\tstyle={{ marginBottom: 0 }}\r\n\t\t\t>\r\n\t\t\t\t<Icon name='dropdown' />\r\n\t\t\t\t{camelCaseToTitle(propertyKey)}\r\n\t\t\t</Accordion.Title>\r\n\t\t\t<Accordion.Content\r\n\t\t\t\tactive={active}\r\n\t\t\t>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tpaddingLeft: '1em'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<StorageAccordion\r\n\t\t\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\t\t\tentryComponentType={DataViewEntry}\r\n\t\t\t\t\t\tactive={active}\r\n\t\t\t\t\t\tentries={categoryFields.reduce((accum, fieldKey) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taccum[fieldKey] = {\r\n\t\t\t\t\t\t\t\tpropertyKey: fieldKey,\r\n\t\t\t\t\t\t\t\ttableCollection: tableCollection,\r\n\t\t\t\t\t\t\t\tentryKey: `${propertyKey}.${fieldKey}`,\r\n\t\t\t\t\t\t\t\tstorageKey: `${storageKey}.${fieldKey}`,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn accum;\r\n\t\t\t\t\t\t}, {})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</Accordion.Content>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DetailView(props)\r\n{\r\n\tconst npcSchema = props.tableCollection.getNpcSchema();\r\n\tconst storageKey = `npc.${DISPLAY_MODES.Detailed}.expandedEntries`;\r\n\tconsole.log(props.tableCollection, npcSchema, NpcData.get());\r\n\tconst npc = NpcData.get();\r\n\treturn (\r\n\t\t<ViewContainer page={props.location.pathname}>\r\n\t\t\t<MenuBar\r\n\t\t\t\tswitchDisplayMode={props.switchDisplayMode}\r\n\t\t\t\tdisplayMode={props.displayMode}\r\n\t\t\t/>\r\n\r\n\t\t\t<StorageAccordion\r\n\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\tentryComponentType={DetailViewCategory}\r\n\t\t\t\tentries={npc.getCategories().reduce((accum, category) =>\r\n\t\t\t\t{\r\n\t\t\t\t\taccum[category] = {\r\n\t\t\t\t\t\tpropertyKey: category,\r\n\t\t\t\t\t\ttableCollection: props.tableCollection,\r\n\t\t\t\t\t\tcategoryFields: npc.getEntriesForCategory(category),\r\n\t\t\t\t\t\tstorageKey: `${storageKey}.${category}`,\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn accum;\r\n\t\t\t\t}, {})}\r\n\t\t\t/>\r\n\r\n\t\t</ViewContainer>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { ViewContainer } from '../../view/ViewContainer';\r\nimport { MenuBar } from './MenuBar';\r\nimport { ArticleContent } from './ArticleContent';\r\n\r\nexport function ArticleView(props)\r\n{\r\n\treturn (\r\n\t\t<ViewContainer page={props.location.pathname}>\r\n\t\t\t<MenuBar\r\n\t\t\t\tswitchDisplayMode={props.switchDisplayMode}\r\n\t\t\t\tdisplayMode={props.displayMode}\r\n\t\t\t/>\r\n\t\t\t<ArticleContent/>\r\n\t\t</ViewContainer>\r\n\t);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ViewContainer } from './ViewContainer';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport { Loader, Icon } from 'semantic-ui-react';\r\nimport shortid from 'shortid';\r\nimport { DetailView } from '../components/NPC/DetailView';\r\nimport storage from 'local-storage';\r\nimport {\r\n\tDISPLAY_MODES,\r\n\tgetNextDisplayMode,\r\n} from '../components/NPC/EDisplayModes';\r\nimport NpcData from '../storage/NpcData';\r\nimport { ArticleView } from '../components/NPC/ArticleView';\r\nimport * as queryString from 'query-string';\r\n\r\nconst CURRENT_DISPLAYMODE_STORAGE = `npc.displayMode`;\r\n\r\nexport function NpcView(props)\r\n{\r\n\tconst parsedNpcData = (() => {\r\n\t\tconst npcDataInUrl = queryString.parse(props.location.search);\r\n\t\tif (typeof npcDataInUrl.npc === 'string') \r\n\t\t{\r\n\t\t\treturn JSON.parse(npcDataInUrl.npc);\r\n\t\t}\r\n\t\treturn undefined;\r\n\t})();\r\n\r\n\tconst refreshWith = useState(0)[1];\r\n\tconst [displayMode, setDisplayMode] = useState(storage.get(CURRENT_DISPLAYMODE_STORAGE) || DISPLAY_MODES.Readable);\r\n\tconst switchDisplayMode = () => {\r\n\t\tconst nextMode = getNextDisplayMode(displayMode);\r\n\t\tstorage.set(CURRENT_DISPLAYMODE_STORAGE, nextMode);\r\n\t\tsetDisplayMode(nextMode);\r\n\t};\r\n\r\n\tuseEffect(() =>\r\n\t{\r\n\t\tfunction onTableCollectionChanged({ detail })\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tTableCollection.addOnChanged(onTableCollectionChanged);\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tTableCollection.removeOnChanged(onTableCollectionChanged);\r\n\t\t}\r\n\t});\r\n\r\n\tuseEffect(() =>\r\n\t{\r\n\t\tfunction onNpcInitialized({ detail })\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tNpcData.toggleOnInitialized('on', onNpcInitialized);\r\n\t\tif (!NpcData.get())\r\n\t\t{\r\n\t\t\tNpcData.initialize(parsedNpcData);\r\n\t\t}\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tNpcData.toggleOnInitialized('off', onNpcInitialized);\r\n\t\t}\r\n\t});\r\n\r\n\tconst tableCollection = TableCollection.get();\r\n\tconst npcData = NpcData.get();\r\n\tif (!tableCollection || !npcData)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ViewContainer page={props.location.pathname}>\r\n\t\t\t\t<Loader active>Loading</Loader>\r\n\t\t\t</ViewContainer>\r\n\t\t);\r\n\t}\r\n\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return (\r\n\t\t\t<ArticleView\r\n\t\t\t\tlocation={props.location}\r\n\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\tswitchDisplayMode={switchDisplayMode}\r\n\t\t\t\tdisplayMode={displayMode}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tcase DISPLAY_MODES.Detailed: return (\r\n\t\t\t<DetailView\r\n\t\t\t\tlocation={props.location}\r\n\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\tswitchDisplayMode={switchDisplayMode}\r\n\t\t\t\tdisplayMode={displayMode}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tdefault: return (\r\n\t\t\t<div>\r\n\t\t\t\tSomething went wrong, I'm confused... <Icon name='question' />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport {useTable} from 'react-table';\r\nimport { Table, Header, Container } from 'semantic-ui-react';\r\nimport * as DataTable from '../storage/Table';\r\n\r\nfunction getDataTable(tableKey)\r\n{\r\n\tconst tableCollection = TableCollection.get();\r\n\tif (!tableCollection) { return undefined; }\r\n\treturn tableKey !== undefined ? tableCollection.getTableAtPath(tableKey) : undefined;\r\n}\r\n\r\n// ReactHooks: https://reactjs.org/docs/hooks-effect.html\r\n// Memos: https://reactjs.org/docs/hooks-reference.html#usememo\r\nexport default function DataTableView({ tableKey })\r\n{\r\n\tconst dataTable = getDataTable(tableKey);\r\n\t\r\n\tconst columns = React.useMemo(() => DataTable.default.COLUMNS, []);\r\n\r\n\tconst [rowCount, setRowCount] = React.useState(dataTable === undefined ? 0 : dataTable.length());\r\n\tReact.useEffect(() => {\r\n\r\n\t\tif (dataTable === undefined) { return; }\r\n\r\n\t\tfunction onChangedRowCount({ details })\r\n\t\t{\r\n\t\t\tsetRowCount(details.next);\r\n\t\t}\r\n\r\n\t\tdataTable.subscribeOnChangedRowCount(onChangedRowCount);\r\n\r\n\t\treturn () => {\r\n\t\t\tdataTable.unsubscribeOnChangedRowCount(onChangedRowCount);\r\n\t\t};\r\n\t});\r\n\r\n\tconst data = React.useMemo(() => {\r\n\t\tconst table = getDataTable(tableKey);\r\n\t\tif (table === undefined) { return []; }\r\n\t\treturn table.getRows();\r\n\t}, [tableKey]);\r\n\r\n\t// React-Table API: https://github.com/tannerlinsley/react-table/blob/master/docs/api.md#usetable\r\n\t// React-Table Examples: https://github.com/tannerlinsley/react-table/blob/master/docs/examples.md\r\n\tconst {\r\n\t\tgetTableProps,\r\n\t\tgetTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n\t} = useTable({\r\n\t\tcolumns, data,\r\n\t});\r\n\r\n\tif (dataTable === undefined)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t403: No table found\r\n\t\t\t</Header>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Header>{dataTable.getKey()} ({rowCount} rows)</Header>\r\n\t\t\t<Table {...getTableProps()}>\r\n\t\t\t\t<Table.Header>\r\n\t\t\t\t\t{headerGroups.map((headerGroup) => (\r\n\t\t\t\t\t\t<Table.Row {...headerGroup.getHeaderGroupProps()}>\r\n\t\t\t\t\t\t\t{headerGroup.headers.map((column) => (\r\n\t\t\t\t\t\t\t\t<Table.HeaderCell {...column.getHeaderProps()}>\r\n\t\t\t\t\t\t\t\t\t{column.render('Header')}\r\n\t\t\t\t\t\t\t\t</Table.HeaderCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Table.Header>\r\n\t\t\t\t<Table.Body {...getTableBodyProps()}>\r\n\t\t\t\t\t{rows.map((row, i) => prepareRow(row) || (\r\n\t\t\t\t\t\t<Table.Row {...row.getRowProps()}>\r\n\t\t\t\t\t\t\t{row.cells.map(cell => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Table.Cell {...cell.getCellProps()}>\r\n\t\t\t\t\t\t\t\t\t\t{cell.render('Cell')}\r\n\t\t\t\t\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t</Container>\r\n\t);\r\n}\r\n\r\n/*\r\nexport class DataTableView extends React.Component\r\n{\r\n\tgetTableData()\r\n\t{\r\n\t\tconst tableCollection = TableCollection.get();\r\n\t\tif (!tableCollection) { return undefined; }\r\n\t\tconst tableKey = this.props.tableKey;\r\n\t\treturn tableKey !== undefined ? tableCollection.getTable(tableKey) : undefined;\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconsole.log(DataTable.default.COLUMNS);\r\n\t\treturn 'T2';\r\n\t\tconsole.log(COLUMNS);\r\n\r\n\t\tconst tableData = this.getTableData();\r\n\t\tif (tableData === undefined)\r\n\t\t{\r\n\t\t}\r\n\r\n\t\tconsole.log(tableData);\r\n\r\n\t}\r\n\r\n}\r\n\t\t//*/\r\n","import React from 'react';\r\nimport lodash from 'lodash';\r\nimport { ViewContainer } from './ViewContainer';\r\nimport DataTableView from '../components/DataTableView';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport Tree from 'react-animated-tree';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport class DataView extends React.Component\r\n{\r\n\r\n\tgetTableKey()\r\n\t{\r\n\t\treturn this.props.match.params.table;\r\n\t}\r\n\r\n\thasTableKey()\r\n\t{\r\n\t\treturn this.getTableKey() !== undefined;\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<ViewContainer page={this.props.location.pathname}>\r\n\t\t\t\t{this.renderContent()}\r\n\t\t\t</ViewContainer>\r\n\t\t);\r\n\t}\r\n\r\n\trenderContent()\r\n\t{\r\n\t\tif (!this.hasTableKey())\r\n\t\t{\r\n\t\t\tfunction makeTreeNode([pathItem, nodeDetails])\r\n\t\t\t{\r\n\t\t\t\tconst allNodeProperties = Object.keys(nodeDetails);\r\n\t\t\t\tconst subNodeProperties = allNodeProperties.filter((item) => item !== 'table');\r\n\t\t\t\tconst hasTable = allNodeProperties.includes('table');\r\n\t\t\t\tconst content = !hasTable ? pathItem : (\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<Link to={`data/${nodeDetails.table.getKeyPath()}`}>{pathItem}</Link>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t\tif (subNodeProperties.length === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (hasTable)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// Just a leaf for an actual table\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Tree key={pathItem}\r\n\t\t\t\t\t\t\t\tcontent={content}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn <Tree key={pathItem} content={`Unknown: ${pathItem}`} />;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tconst subnodes = subNodeProperties.reduce((accum, propKey) => {\r\n\t\t\t\t\t\taccum[propKey] = nodeDetails[propKey];\r\n\t\t\t\t\t\treturn accum;\r\n\t\t\t\t\t}, {});\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Tree key={pathItem} content={content} >\r\n\t\t\t\t\t\t\t{lodash.toPairs(subnodes).map(makeTreeNode)}\r\n\t\t\t\t\t\t</Tree>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst tableCollection = TableCollection.get();\r\n\t\t\tif (tableCollection)\r\n\t\t\t{\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tree\r\n\t\t\t\t\t\tcontent={'Tables'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{lodash.toPairs(tableCollection.getTableTree()).map(makeTreeNode)}\r\n\t\t\t\t\t</Tree>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<DataTableView tableKey={this.getTableKey()} />\r\n\t\t);\r\n\t}\r\n\r\n}","import React from 'react';\r\nimport TableCollection from './storage/TableCollection';\r\nimport shortid from 'shortid';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport { Container } from \"semantic-ui-react\";\r\nimport { HomeView } from './view/HomeView';\r\nimport { NpcView } from './view/NpcView';\r\nimport { DataView } from './view/DataView';\r\n\r\nclass App extends React.Component\r\n{\r\n\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props);\r\n\t\tthis.state = { refreshKey: undefined };\r\n\t\tTableCollection.addOnChanged(this.onDataChanged.bind(this));\r\n\t}\r\n\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tconst tables = TableCollection.get();\r\n\t\tif (!tables)\r\n\t\t{\r\n\t\t\tTableCollection.initialize();\r\n\t\t\tthis.setState({ refreshKey: shortid.generate() });\r\n\t\t}\r\n\t}\r\n\r\n\tonDataChanged({ detail })\r\n\t{\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Container id={'App'} fluid>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route key='home' exact path='/' component={HomeView} />\r\n\t\t\t\t\t<Route key='npc' path='/npc' component={NpcView} />\r\n\t\t\t\t\t<Route key='data' path='/data/:table?' component={DataView} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</Container>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport 'semantic-ui-css/semantic.min.css';\r\n\r\n// https://www.npmjs.com/package/semver\r\nconsole.log('Versions:', {\r\n\treact: React.version,\r\n\tnode: process.versions.node,\r\n});\r\n\r\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));","module.exports = (values) =>\r\n{\r\n\treturn values[Math.floor(Math.random() * values.length)];\r\n}","var map = {\n\t\"./tables/bonus/ability/cha/high.json\": 234,\n\t\"./tables/bonus/ability/cha/index.json\": 235,\n\t\"./tables/bonus/ability/cha/low.json\": 236,\n\t\"./tables/bonus/ability/cha/medium.json\": 237,\n\t\"./tables/bonus/ability/const/high.json\": 238,\n\t\"./tables/bonus/ability/const/index.json\": 239,\n\t\"./tables/bonus/ability/const/low.json\": 240,\n\t\"./tables/bonus/ability/const/medium.json\": 241,\n\t\"./tables/bonus/ability/dex/high.json\": 242,\n\t\"./tables/bonus/ability/dex/index.json\": 243,\n\t\"./tables/bonus/ability/dex/low.json\": 244,\n\t\"./tables/bonus/ability/dex/medium.json\": 245,\n\t\"./tables/bonus/ability/index.json\": 246,\n\t\"./tables/bonus/ability/int/high.json\": 247,\n\t\"./tables/bonus/ability/int/index.json\": 248,\n\t\"./tables/bonus/ability/int/low.json\": 249,\n\t\"./tables/bonus/ability/int/medium.json\": 250,\n\t\"./tables/bonus/ability/str/high.json\": 251,\n\t\"./tables/bonus/ability/str/index.json\": 252,\n\t\"./tables/bonus/ability/str/low.json\": 253,\n\t\"./tables/bonus/ability/str/medium.json\": 254,\n\t\"./tables/bonus/ability/wis/high.json\": 255,\n\t\"./tables/bonus/ability/wis/index.json\": 256,\n\t\"./tables/bonus/ability/wis/low.json\": 257,\n\t\"./tables/bonus/ability/wis/medium.json\": 258,\n\t\"./tables/bonus/index.json\": 259,\n\t\"./tables/common/color.json\": 260,\n\t\"./tables/common/frequency.json\": 261,\n\t\"./tables/common/index.json\": 262,\n\t\"./tables/common/language.json\": 263,\n\t\"./tables/common/rightLeft.json\": 264,\n\t\"./tables/common/rightLeftBoth.json\": 265,\n\t\"./tables/deity/archdevil.json\": 266,\n\t\"./tables/deity/demon.json\": 267,\n\t\"./tables/deity/dragon.json\": 268,\n\t\"./tables/deity/drow.json\": 269,\n\t\"./tables/deity/dwarf.json\": 270,\n\t\"./tables/deity/elf.json\": 271,\n\t\"./tables/deity/evil.json\": 272,\n\t\"./tables/deity/gnome.json\": 273,\n\t\"./tables/deity/good.json\": 274,\n\t\"./tables/deity/halfling.json\": 275,\n\t\"./tables/deity/index.json\": 276,\n\t\"./tables/deity/orc.json\": 277,\n\t\"./tables/filters.json\": 278,\n\t\"./tables/hooks.json\": 279,\n\t\"./tables/hooks/index.json\": 280,\n\t\"./tables/identity/genderExpression.json\": 281,\n\t\"./tables/identity/genderIdentity.json\": 282,\n\t\"./tables/identity/index.json\": 283,\n\t\"./tables/identity/pronouns/index.json\": 284,\n\t\"./tables/identity/pronouns/man.json\": 285,\n\t\"./tables/identity/pronouns/nonbinary.json\": 286,\n\t\"./tables/identity/pronouns/woman.json\": 287,\n\t\"./tables/identity/romanticIdentity.json\": 288,\n\t\"./tables/identity/sex.json\": 289,\n\t\"./tables/identity/sexualIdentity.json\": 290,\n\t\"./tables/identity/sexualOrientation.json\": 291,\n\t\"./tables/identity/sexualOrientation/gayLesbian/index.json\": 292,\n\t\"./tables/identity/sexualOrientation/gayLesbian/man.json\": 293,\n\t\"./tables/identity/sexualOrientation/gayLesbian/nonbinary.json\": 294,\n\t\"./tables/identity/sexualOrientation/gayLesbian/woman.json\": 295,\n\t\"./tables/identity/sexualOrientation/index.json\": 296,\n\t\"./tables/index.json\": 297,\n\t\"./tables/items/aliment.json\": 298,\n\t\"./tables/items/index.json\": 299,\n\t\"./tables/items/mundanePlural.json\": 300,\n\t\"./tables/items/precious.json\": 301,\n\t\"./tables/items/preciousPrefixed.json\": 302,\n\t\"./tables/items/weapon.json\": 303,\n\t\"./tables/items/weapon/index.json\": 304,\n\t\"./tables/items/weapon/martialfinesse.json\": 305,\n\t\"./tables/items/weapon/martialranged.json\": 306,\n\t\"./tables/items/weapon/martialweapon.json\": 307,\n\t\"./tables/items/weapon/simplefinesse.json\": 308,\n\t\"./tables/items/weapon/simpleranged.json\": 309,\n\t\"./tables/items/weapon/simpleweapon.json\": 310,\n\t\"./tables/misc/abstractWord.json\": 311,\n\t\"./tables/misc/index.json\": 312,\n\t\"./tables/misc/monster.json\": 313,\n\t\"./tables/npc-full.json\": 314,\n\t\"./tables/npc.json\": 315,\n\t\"./tables/occupation/Class/Caster.json\": 316,\n\t\"./tables/occupation/Class/Category.json\": 317,\n\t\"./tables/occupation/Class/Martial.json\": 318,\n\t\"./tables/occupation/Class/Misc.json\": 319,\n\t\"./tables/occupation/Class/index.json\": 320,\n\t\"./tables/occupation/Job/Category.json\": 321,\n\t\"./tables/occupation/Job/Entertainer.json\": 322,\n\t\"./tables/occupation/Job/Learned.json\": 323,\n\t\"./tables/occupation/Job/Lesser Nobility.json\": 324,\n\t\"./tables/occupation/Job/Martial.json\": 325,\n\t\"./tables/occupation/Job/Professional.json\": 326,\n\t\"./tables/occupation/Job/Underclass.json\": 327,\n\t\"./tables/occupation/Job/Working Class.json\": 328,\n\t\"./tables/occupation/Job/index.json\": 329,\n\t\"./tables/occupation/index.json\": 330,\n\t\"./tables/occupation/type.json\": 331,\n\t\"./tables/personality/index.json\": 332,\n\t\"./tables/personality/worship.json\": 333,\n\t\"./tables/quirks.json\": 334,\n\t\"./tables/quirks/general.json\": 335,\n\t\"./tables/quirks/index.json\": 336,\n\t\"./tables/quirks/military.json\": 337,\n\t\"./tables/quirks/modifier/collection.json\": 338,\n\t\"./tables/quirks/modifier/index.json\": 339,\n\t\"./tables/quirks/modifier/inheritance.json\": 340,\n\t\"./tables/quirks/modifier/pet/animal.json\": 341,\n\t\"./tables/quirks/modifier/pet/index.json\": 342,\n\t\"./tables/quirks/modifier/pet/name.json\": 343,\n\t\"./tables/quirks/modifier/raceAllergy.json\": 344,\n\t\"./tables/quirks/modifier/relation.json\": 345,\n\t\"./tables/quirks/modifier/relation/familyMember.json\": 346,\n\t\"./tables/quirks/modifier/relation/index.json\": 347,\n\t\"./tables/quirks/modifier/size.json\": 348,\n\t\"./tables/quirks/nature.json\": 349,\n\t\"./tables/quirks/poor.json\": 350,\n\t\"./tables/quirks/religious.json\": 351,\n\t\"./tables/quirks/rich.json\": 352,\n\t\"./tables/quirks/traits-1.json\": 353,\n\t\"./tables/quirks/traits-2.json\": 354,\n\t\"./tables/quirks/weird.json\": 355,\n\t\"./tables/race.json\": 356,\n\t\"./tables/race/Aasimar/deity.json\": 357,\n\t\"./tables/race/Aasimar/index.json\": 358,\n\t\"./tables/race/Aasimar/name-man.json\": 359,\n\t\"./tables/race/Aasimar/name-nonbinary.json\": 360,\n\t\"./tables/race/Aasimar/name-woman.json\": 361,\n\t\"./tables/race/Aasimar/quirk-evil.json\": 362,\n\t\"./tables/race/Aasimar/quirk-good.json\": 363,\n\t\"./tables/race/Dragonborn/color.json\": 364,\n\t\"./tables/race/Dragonborn/deity.json\": 365,\n\t\"./tables/race/Dragonborn/hair.json\": 366,\n\t\"./tables/race/Dragonborn/index.json\": 367,\n\t\"./tables/race/Dragonborn/name-man.json\": 368,\n\t\"./tables/race/Dragonborn/name-nonbinary.json\": 369,\n\t\"./tables/race/Dragonborn/name-woman.json\": 370,\n\t\"./tables/race/Dragonborn/quirks.json\": 371,\n\t\"./tables/race/Dwarf.json\": 372,\n\t\"./tables/race/Dwarf/beard.json\": 373,\n\t\"./tables/race/Dwarf/deity.json\": 374,\n\t\"./tables/race/Dwarf/index.json\": 375,\n\t\"./tables/race/Dwarf/name-man.json\": 376,\n\t\"./tables/race/Dwarf/name-nonbinary.json\": 377,\n\t\"./tables/race/Dwarf/name-woman.json\": 378,\n\t\"./tables/race/Dwarf/quirks.json\": 379,\n\t\"./tables/race/Dwarf/skin.json\": 380,\n\t\"./tables/race/Dwarf/surname.json\": 381,\n\t\"./tables/race/Elf.json\": 382,\n\t\"./tables/race/Elf/Drow/index.json\": 383,\n\t\"./tables/race/Elf/Drow/quirks.json\": 384,\n\t\"./tables/race/Elf/deity.json\": 385,\n\t\"./tables/race/Elf/index.json\": 386,\n\t\"./tables/race/Elf/name-man.json\": 387,\n\t\"./tables/race/Elf/name-nonbinary.json\": 388,\n\t\"./tables/race/Elf/name-woman.json\": 389,\n\t\"./tables/race/Elf/quirks.json\": 390,\n\t\"./tables/race/Elf/skin.json\": 391,\n\t\"./tables/race/Elf/skin/color.json\": 392,\n\t\"./tables/race/Elf/skin/index.json\": 393,\n\t\"./tables/race/Elf/surname.json\": 394,\n\t\"./tables/race/Firbolg/deity.json\": 395,\n\t\"./tables/race/Firbolg/index.json\": 396,\n\t\"./tables/race/Firbolg/name-man.json\": 397,\n\t\"./tables/race/Firbolg/name-nonbinary.json\": 398,\n\t\"./tables/race/Firbolg/name-woman.json\": 399,\n\t\"./tables/race/Firbolg/quirks.json\": 400,\n\t\"./tables/race/Firbolg/skin.json\": 401,\n\t\"./tables/race/Gnome.json\": 402,\n\t\"./tables/race/Gnome/deity.json\": 403,\n\t\"./tables/race/Gnome/index.json\": 404,\n\t\"./tables/race/Gnome/name-man.json\": 405,\n\t\"./tables/race/Gnome/name-nonbinary.json\": 406,\n\t\"./tables/race/Gnome/name-woman.json\": 407,\n\t\"./tables/race/Gnome/name/any.json\": 408,\n\t\"./tables/race/Gnome/name/index.json\": 409,\n\t\"./tables/race/Gnome/name/man-1.json\": 410,\n\t\"./tables/race/Gnome/name/man-2.json\": 411,\n\t\"./tables/race/Gnome/name/man-3.json\": 412,\n\t\"./tables/race/Gnome/name/man-4.json\": 413,\n\t\"./tables/race/Gnome/name/man.json\": 414,\n\t\"./tables/race/Gnome/name/woman-1.json\": 415,\n\t\"./tables/race/Gnome/name/woman-2.json\": 416,\n\t\"./tables/race/Gnome/name/woman-3.json\": 417,\n\t\"./tables/race/Gnome/name/woman-4.json\": 418,\n\t\"./tables/race/Gnome/name/woman.json\": 419,\n\t\"./tables/race/Gnome/quirks.json\": 420,\n\t\"./tables/race/Goblin/deity.json\": 421,\n\t\"./tables/race/Goblin/index.json\": 422,\n\t\"./tables/race/Goblin/name-man.json\": 423,\n\t\"./tables/race/Goblin/name-nonbinary.json\": 424,\n\t\"./tables/race/Goblin/name-woman.json\": 425,\n\t\"./tables/race/Goliath/deity.json\": 426,\n\t\"./tables/race/Goliath/hair.json\": 427,\n\t\"./tables/race/Goliath/hairTattoos.json\": 428,\n\t\"./tables/race/Goliath/index.json\": 429,\n\t\"./tables/race/Goliath/name-man.json\": 430,\n\t\"./tables/race/Goliath/name-nonbinary.json\": 431,\n\t\"./tables/race/Goliath/name-woman.json\": 432,\n\t\"./tables/race/Goliath/names/adjective.json\": 433,\n\t\"./tables/race/Goliath/names/animal-action.json\": 434,\n\t\"./tables/race/Goliath/names/animal-noun.json\": 435,\n\t\"./tables/race/Goliath/names/craft-action.json\": 436,\n\t\"./tables/race/Goliath/names/craft-noun.json\": 437,\n\t\"./tables/race/Goliath/names/fighting-action.json\": 438,\n\t\"./tables/race/Goliath/names/fighting-noun.json\": 439,\n\t\"./tables/race/Goliath/names/index.json\": 440,\n\t\"./tables/race/Goliath/names/mystic-action.json\": 441,\n\t\"./tables/race/Goliath/names/mystic-noun.json\": 442,\n\t\"./tables/race/Goliath/names/noun.json\": 443,\n\t\"./tables/race/Goliath/quirks-1.json\": 444,\n\t\"./tables/race/Goliath/quirks-2.json\": 445,\n\t\"./tables/race/Half-Dwarf/deity.json\": 446,\n\t\"./tables/race/Half-Dwarf/index.json\": 447,\n\t\"./tables/race/Half-Dwarf/name-man.json\": 448,\n\t\"./tables/race/Half-Dwarf/name-nonbinary.json\": 449,\n\t\"./tables/race/Half-Dwarf/name-woman.json\": 450,\n\t\"./tables/race/Half-Dwarf/skin.json\": 451,\n\t\"./tables/race/Half-Elf/deity.json\": 452,\n\t\"./tables/race/Half-Elf/index.json\": 453,\n\t\"./tables/race/Half-Elf/name-man.json\": 454,\n\t\"./tables/race/Half-Elf/name-nonbinary.json\": 455,\n\t\"./tables/race/Half-Elf/name-woman.json\": 456,\n\t\"./tables/race/Half-Elf/skin.json\": 457,\n\t\"./tables/race/Half-Orc/deity.json\": 458,\n\t\"./tables/race/Half-Orc/index.json\": 459,\n\t\"./tables/race/Half-Orc/name-man.json\": 460,\n\t\"./tables/race/Half-Orc/name-nonbinary.json\": 461,\n\t\"./tables/race/Half-Orc/name-woman.json\": 462,\n\t\"./tables/race/Half-Orc/skin.json\": 463,\n\t\"./tables/race/Halfling.json\": 464,\n\t\"./tables/race/Halfling/deity.json\": 465,\n\t\"./tables/race/Halfling/index.json\": 466,\n\t\"./tables/race/Halfling/name-man.json\": 467,\n\t\"./tables/race/Halfling/name-nonbinary.json\": 468,\n\t\"./tables/race/Halfling/name-woman.json\": 469,\n\t\"./tables/race/Halfling/quirks.json\": 470,\n\t\"./tables/race/Halfling/surname.json\": 471,\n\t\"./tables/race/Human/deity.json\": 472,\n\t\"./tables/race/Human/index.json\": 473,\n\t\"./tables/race/Human/name-man.json\": 474,\n\t\"./tables/race/Human/name-nonbinary.json\": 475,\n\t\"./tables/race/Human/name-woman.json\": 476,\n\t\"./tables/race/Human/surname.json\": 477,\n\t\"./tables/race/Kenku/deity.json\": 478,\n\t\"./tables/race/Kenku/index.json\": 479,\n\t\"./tables/race/Kenku/name-man.json\": 480,\n\t\"./tables/race/Kenku/name-nonbinary.json\": 481,\n\t\"./tables/race/Kenku/name-woman.json\": 482,\n\t\"./tables/race/Kenku/names/index.json\": 483,\n\t\"./tables/race/Kenku/names/kenkunameanimal.json\": 484,\n\t\"./tables/race/Kenku/names/kenkunamefighting.json\": 485,\n\t\"./tables/race/Kenku/names/kenkunamemetal.json\": 486,\n\t\"./tables/race/Kenku/names/kenkunamequiet.json\": 487,\n\t\"./tables/race/Kenku/quirks.json\": 488,\n\t\"./tables/race/Kenku/skin.json\": 489,\n\t\"./tables/race/Kenku/skin/color.json\": 490,\n\t\"./tables/race/Kenku/skin/featherTexture.json\": 491,\n\t\"./tables/race/Kenku/skin/index.json\": 492,\n\t\"./tables/race/Lizardfolk/deity.json\": 493,\n\t\"./tables/race/Lizardfolk/index.json\": 494,\n\t\"./tables/race/Lizardfolk/name-man.json\": 495,\n\t\"./tables/race/Lizardfolk/name-nonbinary.json\": 496,\n\t\"./tables/race/Lizardfolk/name-woman.json\": 497,\n\t\"./tables/race/Lizardfolk/quirks-1.json\": 498,\n\t\"./tables/race/Lizardfolk/quirks-2.json\": 499,\n\t\"./tables/race/Orc/deity.json\": 500,\n\t\"./tables/race/Orc/index.json\": 501,\n\t\"./tables/race/Orc/name-man.json\": 502,\n\t\"./tables/race/Orc/name-nonbinary.json\": 503,\n\t\"./tables/race/Orc/name-woman.json\": 504,\n\t\"./tables/race/Orc/skin.json\": 505,\n\t\"./tables/race/Orc/skin/color.json\": 506,\n\t\"./tables/race/Orc/skin/index.json\": 507,\n\t\"./tables/race/Orc/surname.json\": 508,\n\t\"./tables/race/Tabaxi/deity.json\": 509,\n\t\"./tables/race/Tabaxi/index.json\": 510,\n\t\"./tables/race/Tabaxi/name-man.json\": 511,\n\t\"./tables/race/Tabaxi/name-nonbinary.json\": 512,\n\t\"./tables/race/Tabaxi/name-woman.json\": 513,\n\t\"./tables/race/Tabaxi/name/first.json\": 514,\n\t\"./tables/race/Tabaxi/name/index.json\": 515,\n\t\"./tables/race/Tabaxi/name/last.json\": 516,\n\t\"./tables/race/Tabaxi/name/noun.json\": 517,\n\t\"./tables/race/Tabaxi/name/number.json\": 518,\n\t\"./tables/race/Tabaxi/quirkObsession.json\": 519,\n\t\"./tables/race/Tabaxi/quirks.json\": 520,\n\t\"./tables/race/Tabaxi/skin.json\": 521,\n\t\"./tables/race/Tabaxi/skin/color.json\": 522,\n\t\"./tables/race/Tabaxi/skin/index.json\": 523,\n\t\"./tables/race/Tabaxi/skin/pattern.json\": 524,\n\t\"./tables/race/Tabaxi/skin/texture.json\": 525,\n\t\"./tables/race/Tiefling/deity.json\": 526,\n\t\"./tables/race/Tiefling/index.json\": 527,\n\t\"./tables/race/Tiefling/name-evil.json\": 528,\n\t\"./tables/race/Tiefling/name-good.json\": 529,\n\t\"./tables/race/Tiefling/name-man.json\": 530,\n\t\"./tables/race/Tiefling/name-nonbinary.json\": 531,\n\t\"./tables/race/Tiefling/name-woman.json\": 532,\n\t\"./tables/race/Tiefling/name/evil.json\": 533,\n\t\"./tables/race/Tiefling/name/good.json\": 534,\n\t\"./tables/race/Tiefling/name/index.json\": 535,\n\t\"./tables/race/Tiefling/name/neutral.json\": 536,\n\t\"./tables/race/Tiefling/name/unaligned.json\": 537,\n\t\"./tables/race/Tiefling/skin.json\": 538,\n\t\"./tables/race/Triton/deity.json\": 539,\n\t\"./tables/race/Triton/hair-color.json\": 540,\n\t\"./tables/race/Triton/hair.json\": 541,\n\t\"./tables/race/Triton/index.json\": 542,\n\t\"./tables/race/Triton/name-man.json\": 543,\n\t\"./tables/race/Triton/name-nonbinary.json\": 544,\n\t\"./tables/race/Triton/name-woman.json\": 545,\n\t\"./tables/race/Triton/skin.json\": 546,\n\t\"./tables/race/Triton/surname.json\": 547,\n\t\"./tables/race/Troglodyte/deity.json\": 548,\n\t\"./tables/race/Troglodyte/index.json\": 549,\n\t\"./tables/race/Troglodyte/name-man.json\": 550,\n\t\"./tables/race/Troglodyte/name-nonbinary.json\": 551,\n\t\"./tables/race/Troglodyte/name-woman.json\": 552,\n\t\"./tables/race/common/index.json\": 553,\n\t\"./tables/race/common/name-nonbinary.json\": 554,\n\t\"./tables/race/index.json\": 555,\n\t\"./tables/relationship/index.json\": 556,\n\t\"./tables/relationship/relative.json\": 557,\n\t\"./tables/todo/contest.json\": 558,\n\t\"./tables/todo/evilworship.json\": 559,\n\t\"./tables/todo/furniture.json\": 560,\n\t\"./tables/todo/highattractiveness.json\": 561,\n\t\"./tables/todo/hooks1.json\": 562,\n\t\"./tables/todo/hooks2.json\": 563,\n\t\"./tables/todo/index.json\": 564,\n\t\"./tables/todo/organisation.json\": 565,\n\t\"./tables/todo/personality.json\": 566,\n\t\"./tables/todo/profession.json\": 567,\n\t\"./tables/todo/racedwarf.json\": 568,\n\t\"./tables/todo/raceelf.json\": 569,\n\t\"./tables/todo/racegnome.json\": 570,\n\t\"./tables/todo/racehalfling.json\": 571,\n\t\"./tables/todo/relationshipstatus.json\": 572,\n\t\"./tables/todo/tritonquirks.json\": 573,\n\t\"./tables/todo/werebeast.json\": 574,\n\t\"./tables/traits/age.json\": 575,\n\t\"./tables/traits/age/additive.json\": 576,\n\t\"./tables/traits/age/bonusRegular.json\": 577,\n\t\"./tables/traits/age/bonusSmall.json\": 578,\n\t\"./tables/traits/age/index.json\": 579,\n\t\"./tables/traits/age/multiplier3.json\": 580,\n\t\"./tables/traits/age/multiplier6.json\": 581,\n\t\"./tables/traits/alignment/index.json\": 582,\n\t\"./tables/traits/alignment/tendancy.json\": 583,\n\t\"./tables/traits/alignmentMoral.json\": 584,\n\t\"./tables/traits/bodyPart.json\": 585,\n\t\"./tables/traits/bodyPart/extra/finger.json\": 586,\n\t\"./tables/traits/bodyPart/extra/index.json\": 587,\n\t\"./tables/traits/bodyPart/head.json\": 588,\n\t\"./tables/traits/bodyPart/head/index.json\": 589,\n\t\"./tables/traits/bodyPart/head/sided.json\": 590,\n\t\"./tables/traits/bodyPart/head/sidedPlural.json\": 591,\n\t\"./tables/traits/bodyPart/head/unsided.json\": 592,\n\t\"./tables/traits/bodyPart/index.json\": 593,\n\t\"./tables/traits/bodyPart/missing/eye.json\": 594,\n\t\"./tables/traits/bodyPart/missing/fingers.json\": 595,\n\t\"./tables/traits/bodyPart/missing/index.json\": 596,\n\t\"./tables/traits/bodyPart/missing/limb.json\": 597,\n\t\"./tables/traits/bodyPart/sided.json\": 598,\n\t\"./tables/traits/bodyPart/sidedPlural.json\": 599,\n\t\"./tables/traits/bodyPart/unsided.json\": 600,\n\t\"./tables/traits/brand.json\": 601,\n\t\"./tables/traits/degree/degree.json\": 602,\n\t\"./tables/traits/degree/degree2.json\": 603,\n\t\"./tables/traits/degree/index.json\": 604,\n\t\"./tables/traits/descriptor.json\": 605,\n\t\"./tables/traits/eyecolor.json\": 606,\n\t\"./tables/traits/face/attractiveness.json\": 607,\n\t\"./tables/traits/face/beard.json\": 608,\n\t\"./tables/traits/face/beard/index.json\": 609,\n\t\"./tables/traits/face/beard/length.json\": 610,\n\t\"./tables/traits/face/beard/shape.json\": 611,\n\t\"./tables/traits/face/index.json\": 612,\n\t\"./tables/traits/face/looks/bad.json\": 613,\n\t\"./tables/traits/face/looks/badModifier.json\": 614,\n\t\"./tables/traits/face/looks/good.json\": 615,\n\t\"./tables/traits/face/looks/goodModifier.json\": 616,\n\t\"./tables/traits/face/looks/index.json\": 617,\n\t\"./tables/traits/face/looks/normal.json\": 618,\n\t\"./tables/traits/face/looks/normalModifier.json\": 619,\n\t\"./tables/traits/face/shape.json\": 620,\n\t\"./tables/traits/hair.json\": 621,\n\t\"./tables/traits/hair/color.json\": 622,\n\t\"./tables/traits/hair/index.json\": 623,\n\t\"./tables/traits/hair/length.json\": 624,\n\t\"./tables/traits/hair/style.json\": 625,\n\t\"./tables/traits/height.json\": 626,\n\t\"./tables/traits/index.json\": 627,\n\t\"./tables/traits/modifier.json\": 628,\n\t\"./tables/traits/physical.json\": 629,\n\t\"./tables/traits/physical/index.json\": 630,\n\t\"./tables/traits/physical/piercingAmount.json\": 631,\n\t\"./tables/traits/physical/traits-1.json\": 632,\n\t\"./tables/traits/physical/traits-2.json\": 633,\n\t\"./tables/traits/skin/human.json\": 634,\n\t\"./tables/traits/skin/humanColor.json\": 635,\n\t\"./tables/traits/skin/index.json\": 636,\n\t\"./tables/traits/skin/nonhuman.json\": 637,\n\t\"./tables/traits/skin/nonhumanColor.json\": 638,\n\t\"./tables/traits/skin/scales.json\": 639,\n\t\"./tables/traits/skin/scalesColor.json\": 640,\n\t\"./tables/traits/skin/scalesTexture.json\": 641,\n\t\"./tables/traits/skin/textureSkin.json\": 642,\n\t\"./tables/traits/skin/tone.json\": 643,\n\t\"./tables/traits/smell/bad.json\": 644,\n\t\"./tables/traits/smell/good.json\": 645,\n\t\"./tables/traits/smell/index.json\": 646,\n\t\"./tables/traits/tattoo.json\": 647,\n\t\"./tables/traits/tattoo/animal.json\": 648,\n\t\"./tables/traits/tattoo/index.json\": 649,\n\t\"./tables/traits/tattoo/tattooadj.json\": 650,\n\t\"./tables/traits/tattoo/text.json\": 651,\n\t\"./tables/traits/weight.json\": 652\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 233;"],"sourceRoot":""}