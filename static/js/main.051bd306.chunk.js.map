{"version":3,"sources":["lib/pluralize.js","lib/randInt.js","lib/clipboard.js","generator/modules/index.js","generator/modules/roll.js","generator/modules/rand.js","generator/modules/randInt.js","generator/modules/regex.js","generator/modules/isInRange.js","generator/modules/permutate.js","generator/modules/evalAtCtx.js","generator/modules/createExecutor.js","storage/Entry.js","storage/Table.js","generator/appendModifiers.js","storage/NpcSchema.js","storage/TableCollection.js","lib/str.js","components/StorageAccordion.jsx","components/NPC/EDisplayModes.js","storage/Filter.js","components/TableFilter.jsx","storage/GeneratedEntry.js","storage/NpcData.js","components/NPC/DetailViewEntry.jsx","components/NPC/ArticleContent.jsx","components/NPC/MenuBar.jsx","components/NPC/DetailView.jsx","components/NPC/ArticleView.jsx","view/NpcView.jsx","storage/Session.js","components/DataTableView.jsx","view/DataView.jsx","view/HomeView.jsx","routes.js","components/HeaderBarLink.jsx","components/HeaderBar.jsx","view/ViewContainer.jsx","App.jsx","index.js","lib/rand.js","data sync /^/tables.*/.json$"],"names":["module","exports","singular","plural","isPlural","min","max","Math","ceil","floor","random","html","container","document","createElement","innerHTML","style","position","pointerEvents","opacity","body","appendChild","window","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","err","console","error","removeChild","roll","tablePath","data","table","TableCollection","get","getTable","filter","ignore","rand","match","value","require","split","randInt","preset","undefined","params","map","str","parseInt","ret","includes","regex","RegExp","test","rangeParams","permutate","log","result","length","push","splice","VARIABLE_REGEX","MACRO_REGEX","PURE_VARIABLE_REGEX","inlineEval","text","context","extendedContenxt","lodash","assign","pluralize","reduce","formattedText","replace","group","code","ctx","fullText","Function","call","e","evalAtCtx","parseMacro","macro","execFunc","args","createExecutor","executor","evaledArgs","Execs","accumulateEntries","onUndefinedKey","accum","entryData","i","entry","Entry","from","key","getKey","this","weight","redirect","source","modifiers","stringify","description","articleContent","children","canReroll","collection","idx","readFrom","index","childrenWithoutKeys","hasSource","tableCollection","evaluateWithData","getSourceTableKey","Object","keys","Table","events","EventTarget","valueMacro","entries","keyPath","obj","entriesWithoutKeys","rows","getKeyPathFromTablePath","values","dispatchOnChangedRowCount","indexOf","prev","next","dispatchEvent","CustomEvent","detail","callback","addEventListener","removeEventListener","getRows","hasFilter","type","getFilterType","getOptions","current","toAppend","cloneDeep","hasValueMacro","filterContext","getDefaultFilter","hasRedirector","redirector","getRedirector","rollable","Array","isArray","shift","presetEntry","find","totalWeight","row","getWeight","weight_sum","warn","chooseRandomWithWeight","getKeyPath","hasGlobalModifiers","getGlobalModifiers","globalModifierEntry","matched","toPairs","modifier","hasOwnProperty","concat","mapValues","modifierList","targetProperty","curve","keyframes","currentIndex","nextIndex","valueInt","getInt","lowerIndex","higherIndex","lowerInput","higherInput","t","lerped","toIntOp","intOp","EVENT_ONCHANGEDFILTER","COLUMNS","accessor","Header","Field","category","NpcSchema","fields","fieldOrder","generationOrder","categories","schema","fieldData","field","addField","getCategory","sort","loadItem","directory","fileName","isIndex","content","itemPath","accumulator","itemPathSplit","slice","join","immediateDirectory","item","assignIn","mapKeys","_","loadTableEntry","TABLE_COLLECTION_CACHE","tables","npcSchema","loadTables","EVENT_ONCHANGED","initialize","event","missingKeyDatum","getTablePathFromKeyPath","getTableKeys","set","camelCaseToTitle","word","toUpperCase","substr","toLowerCase","StorageAccordion","storageKey","entryComponentType","active","useState","storage","expandedEntryKeys","setExpandedEntryKeys_state","setExpandedEntryKeys","remove","removeExpandedEntryKey","isEntryExpanded","handleAccordionClick","Accordion","margin","entryKey","entryProps","React","storageAccordianComponent","onClick","forceCollapse","DISPLAY_MODES","Readable","Detailed","getDisplayIconForMode","displayMode","getNextDisplayMode","Filter","all","allFilters","TableFilter","tableKey","setValue","onDropdownChanged","isValueAValidFilter","defaultFilter","marginTop","marginBottom","minValue","maxValue","onChange","Dropdown","fluid","search","selection","multiple","placeholder","options","EntryLinker","owner","property","onEvent","subscribingTo","subscribed","entryPath","npc","getEntry","entryPaths","uniq","forEach","path","getEntryForPath","add","evt","appendArgsForEntry","a","linker","onEvt","GeneratedEntry","npcData","schemaEntry","stringifyLinker","onStringifyLinkerEvent","bind","stringifyCached","generationDependencyLinker","onGenerationDependencyEvent","modifyingLinker","onModifiersChanged","collectionLinker","onCollectionEntriesChanged","modifierSources","totalModifyingValue","forcedFilter","postOperationModifiers","generated","generatedChildren","parent","getField","name","toPath","getSource","globalData","sourceTableKey","getCanReroll","dispatchToSubscriptions","getModifierFor","unsubscribe","getModifyingEntryKeys","getGenerationDependencies","getStringifyDependencies","getOurCollections","clearLinking","getPreset","clearSaveState","child","dispose","presetData","prevValueOrKey","hasKey","getFilterValue","redirectPath","getGenerationMacro","hasChildren","getChildren","clone","readEntry","updateString","subscribe","getModifiedData","writeSaveState","dispatchToSubscribers","regenerateChildren","onChildGenerated","regenerate","localValue","getModifiedValue","toString","asString","tmpValues","generatedObjValue","getModifyingEntryData_internal","getModifierInternal","rawModifier","localData","getChildModifiedData","multiplier","m","multiply","adder","getModifyingEntryData","v","applyModifier","objectEqualityDeepRecursive","b","Error","getRawValue","postOperations","retVal","genEntry","getGeneratedEntry","getStringifyTemplate","getDescription","template","matchAll","getChild","localizedGlobalData","string","getArticleContent","assert","deps","getSubscribedKeys","entryKeys","getCollectionEntryKeys","subpath","NpcData","sever","items","remaining","has","updateSaveState","saveState","getSaveState","NPC_TEMPORARY_DATA","state","save","fullKey","itemCount","status","EVENTS","EVENT_INITIALIZED","getNpcSchema","onInitialized","getSchema","getFields","addEntry","sessionStorage","removeItem","regenerateAll","getState","JSON","parse","getItem","npcDataInUrl","queryString","location","stateString","encoded","encodeURIComponent","href","getGenerationOrder","loop","forAllEntries","setItem","makeModifierPopup","title","popupTitle","itemMap","Popup","trigger","as","EntryView","propertyKey","parentEntry","npcModifiedData","isMissingSourceTable","k","refresh","useEffect","onChanged","shortid","onDispose","addListenerOnChanged","addListenerOnUpdateString","addListenerOnModified","addListenerOnUpdateCollection","addListenerOnDispose","removeListenerOnChanged","removeListenerOnUpdateString","removeListenerOnModified","removeListenerOnUpdateCollection","removeListenerOnDispose","rawValue","modifiedValue","modifiersFromEntry","hasModifiers","modifiersOfEntry","getModifiedByEntryKeys","isModified","stringifyDeps","stringifySubscribed","generationDependencies","generationDependedOnBy","canRegenerate","collectionEntryKeys","collectionEntryObj","collectionEntry","isValueEquivalentToNone","Menu","secondary","Item","fitted","Title","Icon","Button","icon","Content","borderLeft","paddingLeft","marginLeft","Form","Group","widths","hasValue","label","control","color","stringified","childKey","childEntry","DataViewEntry","toSentenceCase","sentence","getRenderedText","InlineEntryComponent","getComponent","InlineEntryItem","rerollAs","renderedText","hoverable","fontWeight","size","getName","ArticleContent","usePlainText","createEntryItem","strength","dexterity","constitution","intelligence","wisdom","charisma","ethicalPositive","ethicalNeutral","ethicalNegative","moralPositive","moralNeutral","moralNegative","surname","pronouns","genderIdentity","genderExpression","sex","romanticIdentity","sexualIdentity","sexualOrientation","profession","occupationalArea","age","eyeColor","height","face","race","hair","skin","beard","physicalTraitsMap","physicalTraits","List","deity","worship","quirkList","hooks","relationshipStatus","getLink","bulleted","desc","getDescriptionString","n","realFeet","feet","toFeet","compact","striped","textAlign","Body","Row","Cell","MenuBar","switchDisplayMode","menuItemsRight","getEntryLink","borderless","pointing","copyToClipboard","renderToString","clear","marginRight","corner","DetailViewCategory","categoryFields","fieldKey","DetailView","props","getCategories","getEntriesForCategory","ArticleView","CURRENT_DISPLAYMODE_STORAGE","NpcView","parsedNpcData","getCurrentLinkData","protocol","host","pathname","refreshWith","setDisplayMode","nextMode","onTableCollectionChanged","generate","addOnChanged","removeOnChanged","onNpcInitialized","toggleOnInitialized","setState","Loader","View","view","getDataTable","getTableAtPath","DataTableView","dataTable","columns","useMemo","DataTable","rowCount","setRowCount","subscribeOnChangedRowCount","onChangedRowCount","unsubscribeOnChangedRowCount","details","useTable","getTableProps","getTableBodyProps","headerGroups","prepareRow","Container","headerGroup","getHeaderGroupProps","headers","column","HeaderCell","getHeaderProps","render","getRowProps","cells","cell","getCellProps","DataView","urlParams","getTableTree","makeTreeNode","pathItem","nodeDetails","allNodeProperties","subNodeProperties","hasTable","propKey","HomeView","Component","routes","HeaderBarLink","HeaderBar","onClearStorage","ViewContainer","page","App","onViewChanged","subscribeOnChanged","unsubscribeOnChanged","id","Routes","react","version","node","process","versions","ReactDOM","getElementById","webpackContext","req","webpackContextResolve","__webpack_require__","o","resolve"],"mappings":"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","file":"static/js/main.051bd306.chunk.js","sourcesContent":["module.exports = ({isPlural}, singular, plural) => !isPlural ? singular : plural;","/**\r\n * Returns a random integer between min (inclusive) and max (inclusive).\r\n * The value is no lower than min (or the next integer greater than min\r\n * if min isn't an integer) and no greater than max (or the next integer\r\n * lower than max if max isn't an integer).\r\n * Using Math.round() will give you a non-uniform distribution!\r\n */\r\nmodule.exports = (min, max) =>\r\n{\r\n\tmin = Math.ceil(min);\r\n\tmax = Math.floor(max);\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n}","\r\nfunction copyTextToClipboard(html)\r\n{\r\n\t// Create an iframe (isolated container) for the HTML\r\n  var container = document.createElement('div');\r\n  container.innerHTML = html;\r\n  \r\n  // Hide element\r\n  container.style.position = 'fixed';\r\n  container.style.pointerEvents = 'none';\r\n\tcontainer.style.opacity = 0;\r\n\t\r\n  // Mount the iframe to the DOM to make `contentWindow` available\r\n  document.body.appendChild(container);\r\n\r\n\t// Clear all selected nodes\r\n  window.getSelection().removeAllRanges();\r\n  \r\n  // Add the container as the only selected node\r\n  var range = document.createRange();\r\n  range.selectNode(container);\r\n  window.getSelection().addRange(range);\r\n\r\n  // Copy selected nodes to clipboard\r\n\ttry\r\n\t{\r\n\t\tdocument.execCommand('copy');\r\n\t}\r\n\tcatch (err)\r\n\t{\r\n\t\tconsole.error(err);\r\n\t}\r\n  \r\n  // Remove the iframe\r\n  document.body.removeChild(container);\r\n}\r\n\r\nmodule.exports = copyTextToClipboard;","import roll from './roll';\r\nimport rand from './rand';\r\nimport randInt from './randInt';\r\nimport regex from './regex';\r\nimport isInRange from './isInRange';\r\nimport permutate from './permutate';\r\n\r\nexport default {\r\n\troll: roll,\r\n\trand: rand,\r\n\trandInt: randInt,\r\n\tregex: regex,\r\n\trange: isInRange,\r\n\tpermutate: permutate,\r\n};","import TableCollection from '../../storage/TableCollection';\r\n\r\nexport default function exec(tablePath, data)\r\n{\r\n\tconst table = TableCollection.get().getTable(tablePath);\r\n\tif (!table)\r\n\t{\r\n\t\t//console.error(`Could not find table for path ${tablePath}`);\r\n\t\treturn undefined;\r\n\t}\r\n\treturn table.roll(data.filter, data, data.ignore);\r\n}","export default function exec(match)\r\n{\r\n\treturn {\r\n\t\tvalue: require('../../lib/rand')(match.split(','))\r\n\t};\r\n}","export default function exec(match, {preset, ignore})\r\n{\r\n\tif (preset !== undefined) return { value: preset };\r\n\tconst randInt = require('../../lib/randInt');\r\n\tconst params = match.split(',').map(str => parseInt(str, 10));\r\n\tlet ret = undefined;\r\n\tdo\r\n\t{\r\n\t\tret = randInt(params[0], params[1]);\r\n\t} while (ignore !== undefined && ignore.includes(ret))\r\n\treturn { value: ret };\r\n}","export default function exec(match, data)\r\n{\r\n\tif (data === undefined) return false;\r\n\tconst value = `${data.value}`;\r\n\treturn new RegExp(match).test(value);\r\n}","export default function exec(match, data)\r\n{\r\n\tconst rangeParams = match.split(',').map((str) => parseInt(str, 10));\r\n\treturn data !== undefined\r\n\t\t&& typeof data.value === 'number'\r\n\t\t&& rangeParams[0] <= data.value\r\n\t\t&& data.value <= rangeParams[1];\r\n}","export default function exec(match)\r\n{\r\n\tconsole.log(match);\r\n\tconst params = match.split(',');\r\n\tconst result = [];\r\n\twhile (params.length > 0)\r\n\t{\r\n\t\t// remove a random item from params, and add to the end of result\r\n\t\tresult.push(params.splice(\r\n\t\t\t// index of the next value\r\n\t\t\tMath.floor(Math.random() * params.length),\r\n\t\t\t1\r\n\t\t)[0]);\r\n\t}\r\n\tconsole.log(result);\r\n\treturn {\r\n\t\tvalue: result\r\n\t};\r\n}","import lodash from 'lodash';\r\nimport randInt from '../../lib/randInt';\r\nimport pluralize from '../../lib/pluralize';\r\n\r\n// https://stackoverflow.com/questions/8403108/calling-eval-in-particular-context\r\n// https://stackoverflow.com/questions/543533/restricting-eval-to-a-narrow-scope\r\nfunction evalAtCtx(code, ctx, fullText)\r\n{\r\n\t// Ignore the eslint warning about the Function contructor just being eval.\r\n\t// Yes eval is 'evil', but this is a controlled usage with pre-approved input.\r\n\t/*eslint no-new-func: 0*/\r\n\ttry\r\n\t{\r\n\t\treturn (new Function(`with(this) { return ${code}; }`).call(ctx));\r\n\t}\r\n\tcatch (e)\r\n\t{\r\n\t\t//console.error(`Error parsing \"${code}\" in text \"${fullText}\" for context`, lodash.cloneDeep(context), e);\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n\r\n// if grouping has periods ('.'), then it definitely relies on another value external to the hierarchy\r\n// (all non-lineage values have at least a category and key, separated by a period)\r\nexport const VARIABLE_REGEX = new RegExp(/\\$\\((.*?)\\)/, 'g');\r\nexport const MACRO_REGEX = new RegExp(/\\$#(.*?)#/, 'g');\r\nexport const PURE_VARIABLE_REGEX = new RegExp(/\\$\\(([.a-zA-Z]*?)\\)/, 'g');\r\n\r\nexport function inlineEval(text, context)\r\n{\r\n\tconst extendedContenxt = lodash.assign({}, context, {\r\n\t\trandInt: randInt,\r\n\t\tpluralize: pluralize,\r\n\t});\r\n\treturn [VARIABLE_REGEX, MACRO_REGEX].reduce((formattedText, regex) => (\r\n\t\tformattedText.replace(regex, (match, group) => evalAtCtx(group, extendedContenxt, formattedText))\r\n\t), text);\r\n}","import Execs from './index';\r\nimport {inlineEval} from './evalAtCtx';\r\n\r\nexport function parseMacro(macro)\r\n{\r\n\tconst regex = new RegExp(`^\\\\{(.*):(.*)\\\\}$`);\r\n\tconst match = macro.match(regex);\r\n\tif (match && match.length >= 2)\r\n\t{\r\n\t\treturn {\r\n\t\t\texecFunc: match[1],\r\n\t\t\targs: match[2],\r\n\t\t};\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\nexport function createExecutor(macro)\r\n{\r\n\tconst executor = parseMacro(macro);\r\n\tif (executor)\r\n\t{\r\n\t\treturn (data) => {\r\n\t\t\tconst evaledArgs = inlineEval(executor.args, data);\r\n\t\t\treturn Execs[executor.execFunc](evaledArgs, data);\r\n\t\t};\r\n\t}\r\n\treturn undefined;\r\n}","import {parseMacro} from '../generator/modules/createExecutor';\r\n\r\nexport function accumulateEntries(data, context, onUndefinedKey=undefined)\r\n{\r\n\treturn data.reduce((accum, entryData, i) =>\r\n\t{\r\n\t\tconst entry = Entry.from(entryData, i);\r\n\t\tif (entry.key === undefined)\r\n\t\t{\r\n\t\t\tif (onUndefinedKey !== undefined && typeof onUndefinedKey === 'function')\r\n\t\t\t{\r\n\t\t\t\tonUndefinedKey(entry);\r\n\t\t\t}\r\n\t\t}\r\n\t\taccum[entry.getKey()] = entry;\r\n\t\treturn accum;\r\n\t}, {});\r\n}\r\n\r\nexport class Entry\r\n{\r\n\r\n\tstatic from(data, idx)\r\n\t{\r\n\t\tconst entry = new Entry();\r\n\t\tentry.readFrom(data, idx);\r\n\t\treturn entry;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.weight = undefined;\r\n\t\tthis.key = undefined;\r\n\r\n\t\tthis.redirect = undefined;\r\n\t\tthis.source = undefined;\r\n\r\n\t\tthis.value = undefined;\r\n\t\tthis.modifiers = {};\r\n\r\n\t\tthis.stringify = undefined;\r\n\t\tthis.description = undefined;\r\n\t\tthis.articleContent = undefined;\r\n\r\n\t\tthis.children = [];\r\n\r\n\t\tthis.canReroll = undefined;\r\n\t\t/**\r\n\t\t * The key for another entry, whose value is an array,\r\n\t\t * which GeneratedEntries that this entry is a schema for,\r\n\t\t * are considered a part of during `GeneratedEntry#getModifiedData`.\r\n\t\t**/\r\n\t\tthis.collection = undefined;\r\n\t}\r\n\r\n\treadFrom(data, idx)\r\n\t{\r\n\t\tthis.weight = data.weight || 1;\r\n\t\tthis.key = data.key;\r\n\t\tthis.index = idx;\r\n\r\n\t\tthis.redirect = data.redirect;\r\n\t\tthis.source = data.source;\r\n\r\n\t\tthis.value = data.value;\r\n\t\tthis.modifiers = data.modifiers || {};\r\n\r\n\t\tthis.stringify = data.stringify;\r\n\t\tthis.description = data.description;\r\n\t\tthis.articleContent = data.articleContent;\r\n\r\n\t\tthis.childrenWithoutKeys = [];\r\n\t\tthis.children = accumulateEntries(data.children || [], `entry '${this.key}'`, (i) => this.childrenWithoutKeys.push(i));\r\n\r\n\t\tthis.canReroll = data.canReroll;\r\n\t\tthis.collection = data.collection;\r\n\t}\r\n\r\n\thasKey()\r\n\t{\r\n\t\treturn this.key !== undefined;\r\n\t}\r\n\r\n\tgetKey()\r\n\t{\r\n\t\treturn this.key || this.index;\r\n\t}\r\n\r\n\thasSource()\r\n\t{\r\n\t\treturn typeof this.source === 'string';\r\n\t}\r\n\r\n\tgetSource()\r\n\t{\r\n\t\treturn this.source;\r\n\t}\r\n\r\n\tgetWeight()\r\n\t{\r\n\t\t// TODO: fetch from local storage\r\n\t\treturn this.weight;\r\n\t}\r\n\r\n\tgetSourceTableKey()\r\n\t{\r\n\t\tif (!this.hasSource()) return undefined;\r\n\t\tconst executor = parseMacro(this.source);\r\n\t\tif (executor.execFunc !== 'roll') return undefined;\r\n\t\treturn executor.args;\r\n\t}\r\n\r\n\tisMissingSourceTable(tableCollection, evaluateWithData)\r\n\t{\r\n\t\tif (!this.hasSource()) return false;\r\n\t\tconst tablePath = this.getSourceTableKey();\r\n\t\tif (!tablePath) return false;\r\n\t\treturn tableCollection.getTable(evaluateWithData(tablePath)) === undefined;\r\n\t}\r\n\r\n\thasRedirector()\r\n\t{\r\n\t\treturn typeof this.redirect === 'string';\r\n\t}\r\n\r\n\tgetRedirector()\r\n\t{\r\n\t\treturn this.redirect;\r\n\t}\r\n\r\n\thasChildren()\r\n\t{\r\n\t\treturn Object.keys(this.children).length > 0;\r\n\t}\r\n\r\n\tgetChildren() { return this.children; }\r\n\r\n\tgetStringifyTemplate()\r\n\t{\r\n\t\treturn this.stringify;\r\n\t}\r\n\r\n\tgetArticleContent()\r\n\t{\r\n\t\treturn this.articleContent;\r\n\t}\r\n\r\n\tgetDescription()\r\n\t{\r\n\t\treturn this.description;\r\n\t}\r\n\r\n\tgetCanReroll()\r\n\t{\r\n\t\treturn this.canReroll === undefined || this.canReroll === true;\r\n\t}\r\n\r\n}","import lodash from 'lodash';\r\nimport { accumulateEntries, Entry } from './Entry';\r\nimport { createExecutor } from '../generator/modules/createExecutor';\r\nimport appendModifiers from '../generator/appendModifiers';\r\nimport { inlineEval } from '../generator/modules/evalAtCtx';\r\n\r\n/**\r\n * Picks a random item from `entries`, using `entry.getWeight()` to get the weight for any\r\n * given item (assuming a weight of 1 if the function returns a falsey value).\r\n * Returns null if it was unable to determine a value. Assumes `entries` is non-empty.\r\n*/\r\nfunction chooseRandomWithWeight(entries)\r\n{\r\n\tconst totalWeight = entries.reduce((accum, row) => accum + (row.getWeight() || 1), 0);\r\n\tconst randInt = require('../lib/randInt')(1, totalWeight);\r\n\r\n\tvar weight_sum = 0;\r\n\tvar i;\r\n\tfor (i = 0; i < entries.length; i++)\r\n\t{\r\n\t\tweight_sum += entries[i].getWeight() || 1;\r\n\t\tif (randInt <= weight_sum)\r\n\t\t{\r\n\t\t\treturn entries[i];\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.warn(`'Returning null from \\`chooseRandomWithWeight\\`. i=${i} weight_sum=${weight_sum}`, entries);\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * A READONLY collective of randomizable entries with modifiers. It is loaded by a TableCollection,\r\n * and can be used to get a weighted random entry that it contains (see the `roll` function).\r\n*/\r\nexport default class Table\r\n{\r\n\r\n\tstatic EVENT_ONCHANGEDFILTER = 'onChangedFilter';\r\n\r\n\tstatic getTablePathFromKeyPath(keyPath)\r\n\t{\r\n\t\treturn keyPath.replace(/\\./g, '/');\r\n\t}\r\n\r\n\tstatic getKeyPathFromTablePath(tablePath)\r\n\t{\r\n\t\treturn tablePath.replace(/\\//g, '.');\r\n\t}\r\n\r\n\t// takes a json object\r\n\tstatic from(obj, key)\r\n\t{\r\n\t\tconst table = new Table();\r\n\t\ttable.key = key;\r\n\t\ttable.filter = obj.filter;\r\n\t\t// turn json data for a table's entry rows into objects\r\n\t\ttable.entriesWithoutKeys = [];\r\n\t\tif (obj.valueMacro)\r\n\t\t{\r\n\t\t\ttable.valueMacro = obj.valueMacro;\r\n\t\t\ttable.entries = null;\r\n\t\t}\r\n\t\telse if (obj.rows)\r\n\t\t{\r\n\t\t\ttable.entries = accumulateEntries(obj.rows, `table '${key}'`, (i) => table.entriesWithoutKeys.push(i));\r\n\t\t}\r\n\t\ttable.modifiers = obj.modifiers;\r\n\t\ttable.redirect = obj.redirect;\r\n\t\ttable.entry = obj.entry !== undefined ? Entry.from(obj.entry, -1) : undefined;\r\n\t\treturn table;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.events = new EventTarget();\r\n\r\n\t\tthis.key = undefined;\r\n\t\tthis.filter = undefined;\r\n\t\t// The macro used to generate a value based on the filter\r\n\t\tthis.valueMacro = undefined;\r\n\t\t// All the possible options available for randomization (and filtering)\r\n\t\tthis.entries = {};\r\n\t\t// Global modifiers that can (and should) be applied to any entry after being rolled.\r\n\t\tthis.modifiers = {};\r\n\r\n\t\tthis.redirect = undefined;\r\n\t}\r\n\r\n\tgetKey()\r\n\t{\r\n\t\treturn this.key;\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\treturn Table.getKeyPathFromTablePath(this.getKey());\r\n\t}\r\n\r\n\thasValueMacro()\r\n\t{\r\n\t\treturn this.valueMacro !== undefined;\r\n\t}\r\n\r\n\tlength()\r\n\t{\r\n\t\treturn this.entries !== null ? Object.keys(this.entries).length : 1;\r\n\t}\r\n\r\n\tgetRows()\r\n\t{\r\n\t\treturn this.entries !== null ? Object.values(this.entries) : [];\r\n\t}\r\n\r\n\taddRow(entry)\r\n\t{\r\n\t\tif (this.entries === null) { return; }\r\n\t\tthis.entries.push(entry);\r\n\t\tthis.dispatchOnChangedRowCount(this.entries.length - 1, this.entries.length);\r\n\t}\r\n\r\n\tremoveRow(entry)\r\n\t{\r\n\t\tif (this.entries === null) { return; }\r\n\t\tthis.entries.splice(this.entries.indexOf(entry), 1);\r\n\t\tthis.dispatchOnChangedRowCount(this.entries.length, this.entries.length - 1);\r\n\t}\r\n\r\n\tdispatchOnChangedRowCount(prev, next)\r\n\t{\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChangedRowCount', {\r\n\t\t\tdetail: { prev, next }\r\n\t\t}));\r\n\t}\r\n\r\n\t// TODO: This will never work because Tables are deserialized from the local storage\r\n\tsubscribeOnChangedRowCount(callback)\r\n\t{\r\n\t\tconsole.error('Changed callbacks will never work on tables');\r\n\t\tthis.events.addEventListener('onChangedRowCount', callback);\r\n\t}\r\n\r\n\tunsubscribeOnChangedRowCount(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onChangedRowCount', callback);\r\n\t}\r\n\r\n\t// Viewing the table via react\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.getRows().map((entry) => ({\r\n\t\t\tkey: entry.getKey(), text: entry.getKey(), value: entry.getKey()\r\n\t\t}));\r\n\t}\r\n\r\n\thasFilter()\r\n\t{\r\n\t\treturn this.filter === undefined || this.filter !== false;\r\n\t}\r\n\r\n\tgetFilterType()\r\n\t{\r\n\t\treturn this.hasFilter() && this.filter !== undefined ? this.filter.type : undefined;\r\n\t}\r\n\r\n\tgetDefaultFilter()\r\n\t{\r\n\t\tswitch (this.getFilterType())\r\n\t\t{\r\n\t\t\tcase 'minMaxRange':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmin: this.filter.min,\r\n\t\t\t\t\tmax: this.filter.max,\r\n\t\t\t\t};\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.getOptions();\r\n\t\t}\r\n\t}\r\n\r\n\thasGlobalModifiers()\r\n\t{\r\n\t\treturn this.modifiers !== null && this.modifiers !== undefined && Object.keys(this.modifiers).length > 0;\r\n\t}\r\n\r\n\tgetGlobalModifiers()\r\n\t{\r\n\t\treturn this.modifiers;\r\n\t}\r\n\r\n\thasRedirector()\r\n\t{\r\n\t\treturn this.redirect !== undefined;\r\n\t}\r\n\r\n\tgetRedirector()\r\n\t{\r\n\t\treturn this.redirect;\r\n\t}\r\n\r\n\t// Performing ops\r\n\r\n\troll(filter, context, ignore)\r\n\t{\r\n\t\tlet result = { value: undefined, modifiers: {} };\r\n\t\t\r\n\t\tif (this.entry !== undefined)\r\n\t\t{\r\n\t\t\tresult.value = lodash.cloneDeep(this.entry.value.value);\r\n\t\t\tresult.modifiers = lodash.cloneDeep(this.entry.value.modifiers);\r\n\t\t\tresult.entry = this.entry;\r\n\t\t}\r\n\t\telse if (this.hasValueMacro())\r\n\t\t{\r\n\t\t\tconst filterContext = { ...context, filter: (filter || this.getDefaultFilter()) };\r\n\t\t\tconst macro = createExecutor(this.valueMacro);\r\n\t\t\tif (macro === undefined) result.value = inlineEval(this.valueMacro, filterContext);\r\n\t\t\telse result.value = macro(filterContext).value;\r\n\t\t}\r\n\t\telse if (this.hasRedirector())\r\n\t\t{\r\n\t\t\tlet redirector = this.getRedirector();\r\n\r\n\t\t\tconst macro = createExecutor(`{roll:${redirector}}`);\r\n\t\t\tif (macro)\r\n\t\t\t{\r\n\t\t\t\tresult = macro({...context, filter: undefined});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconst entry = (() => {\r\n\t\t\t\tconst rollable = this.getRows();\r\n\t\t\t\tif (context.preset !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst preset = Array.isArray(context.preset) ? context.preset.shift() : context.preset;\r\n\t\t\t\t\tconst presetEntry = rollable.find((entry) => entry.getKey() === preset);\r\n\t\t\t\t\tif (presetEntry !== undefined) return presetEntry;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.error(`Could not find entry with preset key ${preset} in table ${this.getKey()}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn chooseRandomWithWeight(\r\n\t\t\t\t\trollable.filter((entry) => (\r\n\t\t\t\t\t\t(filter === undefined || filter.includes(entry.getKey()))\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t(ignore === undefined || !ignore.includes(entry.getKey()))\r\n\t\t\t\t\t))\r\n\t\t\t\t);\r\n\t\t\t})();\r\n\t\t\tif (entry === null)\r\n\t\t\t{\r\n\t\t\t\tconsole.warn('Received null generated value. Maybe there are missing keys?', this.entriesWithoutKeys, this.getKeyPath());\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tresult.value = lodash.cloneDeep(entry.value);\r\n\t\t\tresult.modifiers = lodash.cloneDeep(entry.modifiers);\r\n\t\t\tresult.entry = entry;\r\n\t\t}\r\n\r\n\t\t// Modifiers which are determined based on scales or regexs on the generated value\r\n\t\tif (this.hasGlobalModifiers())\r\n\t\t{\r\n\t\t\tfor (let globalModifierEntry of this.getGlobalModifiers())\r\n\t\t\t{\r\n\t\t\t\tlet matched = globalModifierEntry.match === undefined;\r\n\t\t\t\tconst macro = globalModifierEntry.match !== undefined ? createExecutor(globalModifierEntry.match) : undefined;\r\n\t\t\t\tif (macro)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet matchResult = macro({ ...context, value: result.value });\r\n\t\t\t\t\tmatched = matchResult === true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmatched = result.value === globalModifierEntry.match;\r\n\t\t\t\t}\r\n\t\t\t\tif (matched)\r\n\t\t\t\t{\r\n\t\t\t\t\tresult.modifiers = appendModifiers(result.modifiers, globalModifierEntry.modifiers);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tresult.modifiers = lodash.mapValues(result.modifiers, (modifierList, targetProperty) => {\r\n\t\t\tif (!Array.isArray(modifierList)) modifierList = [modifierList];\r\n\t\t\treturn modifierList.map((modifier) => {\r\n\t\t\t\t// Preprocess each modifier to ensure that the modifiers remaining are either numbers or strings\r\n\t\t\t\tif (typeof modifier === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tswitch (modifier.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'curve':\r\n\t\t\t\t\t\t\tswitch (modifier.curve)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcase 'step':\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tconst keyframes = Object.keys(modifier.values);\r\n\t\t\t\t\t\t\t\t\t\tlet currentIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\tlet nextIndex = keyframes.length > 0 ? 0 : undefined;\r\n\t\t\t\t\t\t\t\t\t\twhile (nextIndex !== undefined\r\n\t\t\t\t\t\t\t\t\t\t\t&& parseInt(result.value, 10) > parseInt(keyframes[nextIndex], 10))\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentIndex = nextIndex;\r\n\t\t\t\t\t\t\t\t\t\t\tnextIndex++;\r\n\t\t\t\t\t\t\t\t\t\t\tif (nextIndex >= keyframes.length) nextIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn currentIndex ? modifier.values[keyframes[currentIndex]] : 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcase 'lerp':\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tconst valueInt = parseInt(result.value, 10);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst keyframes = Object.keys(modifier.values);\r\n\t\t\t\t\t\t\t\t\t\tconst getInt = (i) => parseInt(keyframes[i], 10);\r\n\t\t\t\t\t\t\t\t\t\tlet lowerIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\tlet higherIndex = keyframes.length > 0 ? 0 : undefined;\r\n\t\t\t\t\t\t\t\t\t\twhile (higherIndex !== undefined\r\n\t\t\t\t\t\t\t\t\t\t\t&& valueInt > getInt(higherIndex))\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tlowerIndex = higherIndex;\r\n\t\t\t\t\t\t\t\t\t\t\thigherIndex++;\r\n\t\t\t\t\t\t\t\t\t\t\tif (higherIndex >= keyframes.length) higherIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (lowerIndex === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tlowerIndex = higherIndex;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse if (higherIndex === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\thigherIndex = lowerIndex;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst lowerInput = getInt(lowerIndex);\r\n\t\t\t\t\t\t\t\t\t\tconst higherInput = getInt(higherIndex);\r\n\t\t\t\t\t\t\t\t\t\tconst lowerMod = modifier.values[keyframes[lowerIndex]];\r\n\t\t\t\t\t\t\t\t\t\tconst higherMod = modifier.values[keyframes[higherIndex]];\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst t = (valueInt - lowerInput) / (higherInput !== lowerInput ? higherInput - lowerInput : higherInput);\r\n\t\t\t\t\t\t\t\t\t\tconst lerped = (1 - t) * lowerMod + (t * higherMod);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (modifier.toIntOp === undefined) return lerped;\r\n\t\t\t\t\t\t\t\t\t\tconst intOp = Math[modifier.toIntOp];\r\n\t\t\t\t\t\t\t\t\t\tif (intOp === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.warn('Encountered unimplemented curve int cast operator:', modifier.toIntOp);\r\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\treturn intOp(lerped);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdefault: break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault: break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn modifier;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n\r\nTable.COLUMNS = [\r\n\t{\r\n\t\taccessor: 'weight',\r\n\t\tHeader: 'Weight',\r\n\t},\r\n\t{\r\n\t\taccessor: 'key',\r\n\t\tHeader: 'Key',\r\n\t}\r\n];\r\n","import lodash from 'lodash';\r\n\r\nexport default function appendModifiers(current, toAppend) {\r\n\treturn lodash.toPairs(toAppend).reduce((accum, [key, modifier]) => {\r\n\t\t\r\n\t\tif (!accum.hasOwnProperty(key)) accum[key] = [];\r\n\t\telse if (!Array.isArray(accum[key])) accum[key] = [accum[key]];\r\n\t\t\r\n\t\tif (Array.isArray(modifier)) accum[key] = accum[key].concat(modifier);\r\n\t\telse accum[key].push(modifier);\r\n\r\n\t\treturn accum;\r\n\t}, current);\r\n};","import lodash from 'lodash';\r\nimport { Entry } from './Entry';\r\n\r\nclass Field extends Entry\r\n{\r\n\r\n\tstatic from(data)\r\n\t{\r\n\t\tconst entry = new Field();\r\n\t\tentry.readFrom(data);\r\n\t\tentry.category = data.category;\r\n\t\treturn entry;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t\tthis.category = undefined;\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\treturn `${this.category}.${this.getKey()}`;\r\n\t}\r\n\r\n\tgetCategory()\r\n\t{\r\n\t\treturn this.category;\r\n\t}\r\n\r\n}\r\n\r\nexport default class NpcSchema\r\n{\r\n\r\n\t// takes a json object\r\n\tstatic from(obj)\r\n\t{\r\n\t\tconst schema = new NpcSchema();\r\n\r\n\t\tschema.generationOrder = obj.generationOrder;\r\n\t\t\r\n\t\tfor (let fieldData of obj.fieldOrder)\r\n\t\t{\r\n\t\t\tconst field = schema.addField(fieldData);\r\n\t\t\tschema.fieldOrder.push(field.getKeyPath());\r\n\t\t}\r\n\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.fields = {};\r\n\t\tthis.fieldOrder = [];\r\n\t\tthis.generationOrder = [];\r\n\t\tthis.categories = {};\r\n\t}\r\n\r\n\taddField(data)\r\n\t{\r\n\t\tconst field = Field.from(data);\r\n\t\tthis.fields[field.getKeyPath()] = field;\r\n\t\tthis.categories[field.getCategory()] = (this.categories[field.getCategory()] || []).concat([field.getKey()]);\r\n\t\treturn field;\r\n\t}\r\n\r\n\tgetFields()\r\n\t{\r\n\t\treturn lodash.values(this.fields);\r\n\t}\r\n\r\n\tgetField(keyPath)\r\n\t{\r\n\t\treturn this.fields[keyPath];\r\n\t}\r\n\r\n\tgetCategories()\r\n\t{\r\n\t\treturn Object.keys(this.categories).sort();\r\n\t}\r\n\r\n\tgetFieldsForCategory(category)\r\n\t{\r\n\t\treturn (this.categories[category] || []).sort();\r\n\t}\r\n\r\n\tgetFieldForCategory(category, key)\r\n\t{\r\n\t\treturn this.categories[category][key];\r\n\t}\r\n\r\n\tgetGenerationOrder()\r\n\t{\r\n\t\treturn this.generationOrder;\r\n\t}\r\n\r\n}\r\n","import lodash from 'lodash';\r\nimport Table from './Table';\r\nimport NpcSchema from './NpcSchema';\r\n\r\nfunction loadItem(directory, fileName)\r\n{\r\n\tconst data = require(`../data/tables${directory}${fileName}.json`);\r\n\tconst isIndex = Array.isArray(data);\r\n\tlet content = !isIndex ? data : data.reduce((accum, itemPath) => loadTableEntry(accum, directory, itemPath), {});\r\n\treturn { content, isIndex };\r\n}\r\n\r\nfunction loadTableEntry(accumulator, directory, itemPath)\r\n{\r\n\tconst itemPathSplit = itemPath.split('/');\r\n\tconst fileName = itemPathSplit.slice(-1).join('/');\r\n\tconst immediateDirectory = itemPathSplit.slice(0, -1).join('/');\r\n\tconst fullDirectory = `${directory}${itemPath}`.split('/').slice(0, -1).join('/') + '/';\r\n\tconst item = loadItem(fullDirectory, fileName);\r\n\tif (item.isIndex)\r\n\t{\r\n\t\tlodash.assignIn(accumulator, lodash.mapKeys(item.content, (_, key) => `${immediateDirectory}/${key}`));\r\n\t}\r\n\telse\r\n\t{\r\n\t\taccumulator[itemPath] = item.content;\r\n\t}\r\n\treturn accumulator;\r\n}\r\n\r\nconst events = new EventTarget();\r\nlet TABLE_COLLECTION_CACHE = undefined;\r\n\r\n/**\r\n * A collection of Tables which is loaded once at application start (or on demand after initial load).\r\n * This data is meant to be READONLY at runtime and does not reliably support changing or adding data.\r\n*/\r\nexport default class TableCollection\r\n{\r\n\r\n\t/** Event key for when the table collection is finished loading - either at app launch or user initiated. */\r\n\tstatic EVENT_ONCHANGED = 'onChanged';\r\n\r\n\t/** Returns the current iteration/collection of tables loaded from data. */\r\n\tstatic get()\r\n\t{\r\n\t\treturn TABLE_COLLECTION_CACHE;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new table collection object and loads collection from data.\r\n\t*/\r\n\tstatic initialize()\r\n\t{\r\n\t\tconsole.log('Initializing table collection');\r\n\t\tTABLE_COLLECTION_CACHE = new TableCollection();\r\n\t\tTABLE_COLLECTION_CACHE.loadTables();\r\n\t\tTableCollection.dispatchEvent(TableCollection.EVENT_ONCHANGED, null, TABLE_COLLECTION_CACHE);\r\n\t}\r\n\r\n\t/**\r\n\t * Wipes the table collection singleton and immediately reinitializes.\r\n\t*/\r\n\tstatic clear()\r\n\t{\r\n\t\tconst prev = TableCollection.get();\r\n\t\tTABLE_COLLECTION_CACHE = null;\r\n\t\tTableCollection.dispatchEvent(TableCollection.EVENT_ONCHANGED, prev, null);\r\n\r\n\t\t// Re-Initialize\r\n\t\tTableCollection.initialize();\r\n\t}\r\n\r\n\tstatic addEventListener(event, callback)\r\n\t{\r\n\t\tevents.addEventListener(event, callback);\r\n\t}\r\n\r\n\tstatic removeEventListener(event, callback)\r\n\t{\r\n\t\tevents.removeEventListener(event, callback);\r\n\t}\r\n\r\n\tstatic addOnChanged(callback)\r\n\t{\r\n\t\tTableCollection.addEventListener(TableCollection.EVENT_ONCHANGED, callback);\r\n\t}\r\n\r\n\tstatic removeOnChanged(callback)\r\n\t{\r\n\t\tTableCollection.removeEventListener(TableCollection.EVENT_ONCHANGED, callback);\r\n\t}\r\n\r\n\t// NOTE: `prev` is outdated\r\n\tstatic dispatchEvent(event, prev, next)\r\n\t{\r\n\t\tevents.dispatchEvent(new CustomEvent(event, {\r\n\t\t\tdetail: { prev, next }\r\n\t\t}));\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.tables = {};\r\n\t\tthis.npcSchema = undefined;\r\n\t}\r\n\r\n\tloadTables()\r\n\t{\r\n\t\tthis.tables = lodash.mapValues(loadItem('/', 'index').content, Table.from);\r\n\t\tconsole.log(this.tables);\r\n\t\tconsole.log('Missing Keys:', lodash.values(this.tables).reduce((accum, table) => {\r\n\t\t\tconst missingKeyDatum = {};\r\n\t\t\tif (table.entriesWithoutKeys.length > 0)\r\n\t\t\t{\r\n\t\t\t\tmissingKeyDatum.entries = table.entriesWithoutKeys;\r\n\t\t\t}\r\n\t\t\tfor (let entry of lodash.values(table.entries))\r\n\t\t\t{\r\n\t\t\t\tif (entry.childrenWithoutKeys.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tmissingKeyDatum[entry.getKey()] = entry.childrenWithoutKeys;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (Object.keys(missingKeyDatum).length > 0)\r\n\t\t\t{\r\n\t\t\t\taccum[table.getKey()] = missingKeyDatum;\r\n\t\t\t}\r\n\t\t\treturn accum;\r\n\t\t}, {}))\r\n\r\n\t\tthis.npcSchema = NpcSchema.from(loadItem('/', 'npc').content);\r\n\t}\r\n\r\n\tgetNpcSchema()\r\n\t{\r\n\t\treturn this.npcSchema;\r\n\t}\r\n\r\n\tgetTableKeys()\r\n\t{\r\n\t\treturn Object.keys(this.tables).sort();\r\n\t}\r\n\r\n\tgetTables()\r\n\t{\r\n\t\treturn Object.values(this.tables);\r\n\t}\r\n\r\n\tgetTable(key)\r\n\t{\r\n\t\treturn this.tables.hasOwnProperty(key) ? this.tables[key] : undefined\r\n\t}\r\n\r\n\tgetTableAtPath(keyPath)\r\n\t{\r\n\t\treturn this.getTable(Table.getTablePathFromKeyPath(keyPath));\r\n\t}\r\n\r\n\tgetTableTree()\r\n\t{\r\n\t\treturn this.getTableKeys().reduce((accum, key) => {\r\n\t\t\treturn lodash.set(accum, this.tables[key].getKeyPath() + '.table', this.tables[key]);\r\n\t\t}, {});\r\n\t}\r\n\r\n}","export function camelCaseToTitle(str)\r\n{\r\n\treturn str\r\n\t\t.split(/(?=[A-Z])/)\r\n\t\t.map(\r\n\t\t\t(word) => `${word[0].toUpperCase()}${word.substr(1).toLowerCase()}`\r\n\t\t).join(' ');\r\n}","import React, { useState } from 'react';\r\nimport storage from 'local-storage';\r\nimport lodash from 'lodash';\r\nimport { Accordion } from 'semantic-ui-react';\r\n\r\nexport function StorageAccordion({\r\n\tstorageKey,\r\n\tentryComponentType,\r\n\tentries,\r\n\tactive, // if the item the accordion is in is currently rendering (not collapsed)\r\n})\r\n{\r\n\tconst [expandedEntryKeys, setExpandedEntryKeys_state] = useState(storage.get(storageKey) || []);\r\n\tfunction setExpandedEntryKeys(keys)\r\n\t{\r\n\t\tif (keys.length > 0) storage.set(storageKey, keys);\r\n\t\telse storage.remove(storageKey);\r\n\t\tsetExpandedEntryKeys_state(keys);\r\n\t}\r\n\tfunction addExpandedEntryKey(key) { setExpandedEntryKeys((storage.get(storageKey) || []).concat([key])); }\r\n\tfunction removeExpandedEntryKey(key) { setExpandedEntryKeys((storage.get(storageKey) || []).filter((item) => item !== key)); }\r\n\tfunction isEntryExpanded(key) { return expandedEntryKeys.includes(key); }\r\n\r\n\tconst handleAccordionClick = (_, { index }) =>\r\n\t{\r\n\t\tif (!isEntryExpanded(index)) addExpandedEntryKey(index);\r\n\t\telse removeExpandedEntryKey(index);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Accordion style={{ margin: 0 }}>\r\n\t\t\t{lodash.toPairs(entries).map(([entryKey, entryProps]) => (\r\n\t\t\t\tReact.createElement(entryProps.storageAccordianComponent || entryComponentType, {\r\n\t\t\t\t\t...entryProps,\r\n\t\t\t\t\tkey: entryKey,\r\n\t\t\t\t\tactive: isEntryExpanded(entryKey) && (active === undefined || active === true),\r\n\t\t\t\t\tonClick: handleAccordionClick,\r\n\t\t\t\t\tforceCollapse: removeExpandedEntryKey,\r\n\t\t\t\t})\r\n\t\t\t))}\r\n\t\t</Accordion>\r\n\t);\r\n}\r\n","\r\nexport const DISPLAY_MODES = {\r\n\tReadable: 'Readable',\r\n\tDetailed: 'Detailed',\r\n};\r\n\r\nexport function getDisplayIconForMode(displayMode)\r\n{\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return 'eye';\r\n\t\tcase DISPLAY_MODES.Detailed: return 'archive';\r\n\t\tdefault: return 'question';\r\n\t}\r\n}\r\n\r\nexport function getNextDisplayMode(displayMode)\r\n{\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return DISPLAY_MODES.Detailed;\r\n\t\tcase DISPLAY_MODES.Detailed: return DISPLAY_MODES.Readable;\r\n\t\tdefault: return DISPLAY_MODES.Detailed;\r\n\t}\r\n}\r\n\r\nexport function getDisplayModeSwitchLabel(displayMode)\r\n{\r\n\treturn `Switch to ${getNextDisplayMode(displayMode).toLowerCase()} mode`;\r\n}\r\n","import storage from 'local-storage';\r\n\r\nexport default class Filter\r\n{\r\n\r\n\tstatic all()\r\n\t{\r\n\t\treturn (storage.get('filters') || {});\r\n\t}\r\n\r\n\tstatic get(key)\r\n\t{\r\n\t\treturn Filter.all()[key];\r\n\t}\r\n\r\n\tstatic set(key, filter)\r\n\t{\r\n\t\tconst allFilters = Filter.all();\r\n\t\tallFilters[key] = filter;\r\n\t\tstorage.set('filters', allFilters);\r\n\t}\r\n\r\n\tstatic remove(key)\r\n\t{\r\n\t\tconst allFilters = Filter.all();\r\n\t\tdelete allFilters[key];\r\n\t\tstorage.set('filters', allFilters);\r\n\t}\r\n\r\n\tstatic clear()\r\n\t{\r\n\t\tstorage.set('filters', {});\r\n\t}\r\n\r\n}","import React, { useState } from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\nimport Filter from '../storage/Filter';\r\nimport InputRange from 'react-input-range';\r\nimport 'react-input-range/lib/css/index.css';\r\n\r\n// For ranges: https://github.com/davidchin/react-input-range\r\nexport function TableFilter({\r\n\ttableCollection, tableKey, storageKey\r\n})\r\n{\r\n\r\n\tfunction getTable()\r\n\t{\r\n\t\treturn tableCollection ? tableCollection.getTable(tableKey) : undefined;\r\n\t}\r\n\r\n\tconst [value, setValue] = useState(Filter.get(storageKey) || undefined);\r\n\r\n\tconst table = getTable();\r\n\tif (!table) return <div />;\r\n\r\n\tfunction isValueAValidFilter(value)\r\n\t{\r\n\t\tswitch (table.getFilterType())\r\n\t\t{\r\n\t\t\tcase 'minMaxRange':\r\n\t\t\t\treturn typeof value === 'object' && value.min && value.max;\r\n\t\t\tdefault:\r\n\t\t\t\treturn Array.isArray(value) && value.length > 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onDropdownChanged(value)\r\n\t{\r\n\t\tif (isValueAValidFilter(value))\r\n\t\t{\r\n\t\t\tFilter.set(storageKey, value);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tFilter.remove(storageKey);\r\n\t\t}\r\n\t\tsetValue(value);\r\n\t}\r\n\r\n\tswitch (table.getFilterType())\r\n\t{\r\n\t\tcase 'minMaxRange':\r\n\t\t\tconst defaultFilter = table.getDefaultFilter();\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{marginTop: '15px', marginBottom: '15px'}}>\r\n\t\t\t\t\t<InputRange\r\n\t\t\t\t\t\tminValue={defaultFilter.min}\r\n\t\t\t\t\t\tmaxValue={defaultFilter.max}\r\n\t\t\t\t\t\tvalue={value || defaultFilter}\r\n\t\t\t\t\t\tonChange={onDropdownChanged}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tfluid search selection multiple\r\n\t\t\t\t\tplaceholder={'No filter'}\r\n\t\t\t\t\toptions={table ? table.getDefaultFilter() : []}\r\n\t\t\t\t\tvalue={value || []}\r\n\t\t\t\t\tonChange={(_, { value }) => onDropdownChanged(value)}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t}\r\n}\r\n","import Filter from './Filter';\r\nimport lodash from 'lodash';\r\nimport { createExecutor } from '../generator/modules/createExecutor';\r\nimport { inlineEval, PURE_VARIABLE_REGEX } from '../generator/modules/evalAtCtx';\r\nimport NpcData from './NpcData';\r\n\r\nfunction objectEqualityDeepRecursive(a, b) {\r\n\tfor(const key in a) {\r\n\t\t\tif(!(key in b) || !objectEqualityDeepRecursive(a[key], b[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t}\r\n\tfor(var key in b) {\r\n\t\t\tif(!(key in a) || !objectEqualityDeepRecursive(a[key], b[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nclass EntryLinker\r\n{\r\n\r\n\tconstructor(owner, property, onEvent)\r\n\t{\r\n\t\tthis.owner = owner;\r\n\t\tthis.property = property;\r\n\t\t// entry keys that our owner has subscribed to\r\n\t\tthis.subscribingTo = [];\r\n\t\t// entry keys that have subscribed to our owner\r\n\t\tthis.subscribed = [];\r\n\t\tthis.onEvent = onEvent;\r\n\t}\r\n\r\n\tgetEntryForPath(entryPath)\r\n\t{\r\n\t\treturn this.owner.npc.getEntry(entryPath);\r\n\t}\r\n\r\n\tsubscribe(entryPaths)\r\n\t{\r\n\t\tthis.subscribingTo = lodash.uniq(entryPaths);\r\n\t\tentryPaths.forEach((path) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(path);\r\n\t\t\tif (entry) entry[this.property].add(this.owner);\r\n\t\t});\r\n\t}\r\n\r\n\tunsubscribe(entryPaths)\r\n\t{\r\n\t\tthis.subscribingTo = this.subscribingTo.filter((key) => !entryPaths.includes(key));\r\n\t\tentryPaths.forEach((path) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(path);\r\n\t\t\tif (entry) entry[this.property].remove(this.owner);\r\n\t\t});\r\n\t}\r\n\r\n\tadd(entry)\r\n\t{\r\n\t\tthis.subscribed.push(entry.getKeyPath());\r\n\t\tthis.subscribed = lodash.uniq(this.subscribed);\r\n\t}\r\n\r\n\tremove(entry)\r\n\t{\r\n\t\tconst entryKey = entry.getKeyPath();\r\n\t\tthis.subscribed = this.subscribed.filter((key) => key !== entryKey);\r\n\t}\r\n\r\n\tgetSubscribedKeys()\r\n\t{\r\n\t\treturn this.subscribed;\r\n\t}\r\n\r\n\tdispatchToSubscriptions(evt, args, appendArgsForEntry=(a)=>a)\r\n\t{\r\n\t\tthis.subscribingTo.forEach((entryPath) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(entryPath);\r\n\t\t\tconst linker = entry ? entry[this.property] : undefined;\r\n\t\t\tconst onEvt = linker ? linker.onEvent : undefined;\r\n\t\t\tif (onEvt) onEvt(evt, appendArgsForEntry(args, entryPath));\r\n\t\t});\r\n\t}\r\n\r\n\tdispatchToSubscribers(evt, args)\r\n\t{\r\n\t\tthis.subscribed.forEach((entryPath) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(entryPath);\r\n\t\t\tconst linker = entry ? entry[this.property] : undefined;\r\n\t\t\tconst onEvt = linker ? linker.onEvent : undefined;\r\n\t\t\tif (onEvt) onEvt(evt, args);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default class GeneratedEntry\r\n{\r\n\r\n\tconstructor(npcData)\r\n\t{\r\n\t\tthis.npc = npcData;\r\n\r\n\t\tthis.events = new EventTarget();\r\n\t\tthis.schemaEntry = undefined;\r\n\r\n\t\tthis.stringifyLinker = new EntryLinker(this, 'stringifyLinker', this.onStringifyLinkerEvent.bind(this));\r\n\t\tthis.stringifyCached = undefined;\r\n\r\n\t\tthis.generationDependencyLinker = new EntryLinker(this, 'generationDependencyLinker', this.onGenerationDependencyEvent.bind(this));\r\n\t\tthis.modifyingLinker = new EntryLinker(this, 'modifyingLinker', this.onModifiersChanged.bind(this));\r\n\t\tthis.collectionLinker = new EntryLinker(this, 'collectionLinker', this.onCollectionEntriesChanged.bind(this));\r\n\t\t\r\n\t\tthis.modifierSources = {};\r\n\t\tthis.totalModifyingValue = 0;\r\n\t\tthis.forcedFilter = {};\r\n\t\tthis.postOperationModifiers = {};\r\n\r\n\t\tthis.category = undefined;\r\n\t\tthis.key = undefined;\r\n\r\n\t\tthis.generated = undefined;\r\n\t\tthis.generatedChildren = undefined;\r\n\t}\r\n\r\n\treadEntry(entry)\r\n\t{\r\n\t\tthis.schemaEntry = entry;\r\n\t\tthis.key = entry.getKey();\r\n\t}\r\n\r\n\tgetKey()\r\n\t{\r\n\t\treturn this.key;\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\tif (this.key === undefined) return undefined;\r\n\t\telse if (this.category !== undefined) return `${this.category}.${this.key}`;\r\n\t\telse if (this.parent !== undefined) return `${this.parent.getKeyPath()}.${this.key}`;\r\n\t\telse return this.key;\r\n\t}\r\n\r\n\tgetName()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tif (field.name !== undefined) return field.name;\r\n\t\tconst path = lodash.toPath(this.getKeyPath());\r\n\t\treturn path[path.length - 1]\r\n\t\t\t.split(/(?=[A-Z])/)\r\n\t\t\t.map(\r\n\t\t\t\t(word) => `${word[0].toUpperCase()}${word.substr(1).toLowerCase()}`\r\n\t\t\t).join(' ');\r\n\t}\r\n\r\n\tgetField()\r\n\t{\r\n\t\treturn this.schemaEntry;\r\n\t}\r\n\r\n\tgetGenerationMacro()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tif (!field.hasSource()) return undefined;\r\n\t\tconst macro = createExecutor(field.getSource());\r\n\t\tif (macro === undefined)\r\n\t\t{\r\n\t\t\tconsole.warn('Failed to find a valid exec source functor for field:', field);\r\n\t\t}\r\n\t\treturn macro;\r\n\t}\r\n\r\n\thasFilter(tableCollection, globalData)\r\n\t{\r\n\t\tconst sourceTableKey = this.getField().getSourceTableKey(tableCollection);\r\n\t\tconst table = sourceTableKey !== undefined ? tableCollection.getTable(inlineEval(sourceTableKey, globalData)) : undefined;\r\n\t\treturn table ? table.hasFilter() : false;\r\n\t}\r\n\r\n\tgetFilterValue()\r\n\t{\r\n\t\tconst forcedFilter = Object.values(this.forcedFilter);\r\n\t\treturn forcedFilter.length > 0 ? forcedFilter : Filter.get(this.getKeyPath());\r\n\t}\r\n\r\n\tgetCanReroll()\r\n\t{\r\n\t\treturn this.schemaEntry.getCanReroll() && (!this.parent || this.parent.getCanReroll());\r\n\t}\r\n\r\n\tclearLinking()\r\n\t{\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t\tthis.modifyingLinker.unsubscribe(this.getModifyingEntryKeys());\r\n\t\tthis.generationDependencyLinker.unsubscribe(this.getGenerationDependencies());\r\n\t\tthis.stringifyLinker.unsubscribe(this.getStringifyDependencies());\r\n\t\t\r\n\t\tthis.collectionLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t});\r\n\t\tthis.collectionLinker.unsubscribe(this.getOurCollections());\r\n\t}\r\n\r\n\tdispose()\r\n\t{\r\n\t\tthis.clearLinking();\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onDispose', { detail: { entry: this } }));\r\n\t}\r\n\r\n\tregenerate(globalData, getPreset)\r\n\t{\r\n\t\tthis.clearSaveState();\r\n\r\n\t\tif (this.generatedChildren)\r\n\t\t{\r\n\t\t\tlodash.values(this.generatedChildren).forEach((child) => child.dispose());\r\n\t\t}\r\n\t\tthis.clearLinking();\r\n\r\n\t\tconst presetData = typeof getPreset === 'function' ? getPreset(this) : undefined;\r\n\r\n\t\tlet prevValueOrKey = undefined;\r\n\t\tif (this.generated !== undefined)\r\n\t\t{\r\n\t\t\tprevValueOrKey = this.generated.value;\r\n\t\t\tif (this.generated.entry !== undefined && this.generated.entry.hasKey())\r\n\t\t\t{\r\n\t\t\t\tprevValueOrKey = this.generated.entry.getKey();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst filter = this.getFilterValue();\r\n\t\tif (filter !== undefined && filter.length === 1 && filter.includes(prevValueOrKey))\r\n\t\t{\r\n\t\t\tprevValueOrKey = undefined;\r\n\t\t}\r\n\r\n\t\tconst context = {\r\n\t\t\t...globalData,\r\n\t\t\tfilter: filter,\r\n\t\t\tignore: prevValueOrKey !== undefined ? [prevValueOrKey] : undefined,\r\n\t\t\tpreset: presetData,\r\n\t\t};\r\n\t\tthis.generated = null;\r\n\r\n\t\tif (this.schemaEntry.value)\r\n\t\t{\r\n\t\t\tthis.generated = {\r\n\t\t\t\tvalue: presetData !== undefined ? presetData : this.schemaEntry.value\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet redirectPath = [];\r\n\t\t\tdo\r\n\t\t\t{\r\n\t\t\t\tlet macro = undefined;\r\n\t\t\t\t// grab the redirector from the previous generated entry\r\n\t\t\t\tlet redirector = this.generated && this.generated.entry && this.generated.entry.hasRedirector() ? this.generated.entry.getRedirector() : undefined;\r\n\t\t\t\tif (redirector !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tmacro = createExecutor(`{roll:${redirector}}`);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmacro = this.getGenerationMacro();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (macro === undefined) break;\r\n\t\t\t\t\r\n\t\t\t\tthis.generated = macro(redirector === undefined ? context : {...context, filter: undefined});\r\n\t\t\t\tif (this.generated && this.generated.entry && this.generated.entry.hasRedirector())\r\n\t\t\t\t{\r\n\t\t\t\t\tredirectPath.push(this.generated.entry.getKey());\r\n\t\t\t\t}\r\n\t\t\t} while (this.generated && this.generated.entry && this.generated.entry.hasRedirector());\r\n\t\t\tif (this.generated && redirectPath.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.generated.redirectPath = redirectPath;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.generatedChildren = this.generated && this.generated.entry && this.generated.entry.hasChildren()\r\n\t\t\t? lodash.mapValues(this.generated.entry.getChildren(), (child) =>\r\n\t\t\t{\r\n\t\t\t\tconst clone = new GeneratedEntry(this.npc);\r\n\t\t\t\tclone.readEntry(child);\r\n\t\t\t\tclone.parent = this;\r\n\t\t\t\treturn clone;\r\n\t\t\t}) : undefined;\r\n\t\tif (this.generatedChildren === undefined && this.schemaEntry && this.schemaEntry.hasChildren())\r\n\t\t{\r\n\t\t\tthis.generatedChildren = lodash.mapValues(this.schemaEntry.getChildren(), (child) =>\r\n\t\t\t{\r\n\t\t\t\tconst clone = new GeneratedEntry(this.npc);\r\n\t\t\t\tclone.readEntry(child);\r\n\t\t\t\tclone.parent = this;\r\n\t\t\t\treturn clone;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.updateString(globalData);\r\n\t\tthis.stringifyLinker.subscribe(this.getStringifyDependencies());\r\n\r\n\t\t// temporarily modify globalData until it can be accounted for later\r\n\t\t// we should probably just mark the data as dirty here instead of passing it through functions\r\n\t\tthis.getModifiedData(globalData);\r\n\t\tthis.writeSaveState();\r\n\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChanged', { detail: {} }));\r\n\r\n\t\tthis.collectionLinker.subscribe(this.getOurCollections());\r\n\t\tthis.collectionLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t});\r\n\r\n\t\tthis.stringifyLinker.dispatchToSubscribers('onChanged', { globalData });\r\n\r\n\t\tthis.generationDependencyLinker.subscribe(this.getGenerationDependencies());\r\n\t\tthis.generationDependencyLinker.dispatchToSubscribers('onChanged', { key: this.getKeyPath(), globalData });\r\n\r\n\t\tthis.modifyingLinker.subscribe(this.getModifyingEntryKeys());\r\n\r\n\t\tthis.regenerateChildren(globalData, getPreset);\r\n\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\r\n\t\tif (this.parent) this.parent.onChildGenerated(this);\r\n\t}\r\n\r\n\tregenerateChildren(globalData, getPreset=undefined)\r\n\t{\r\n\t\tif (this.generatedChildren)\r\n\t\t{\r\n\t\t\tlodash.values(this.generatedChildren).forEach((child) => child.regenerate(globalData, getPreset));\r\n\t\t}\r\n\t}\r\n\r\n\tonChildGenerated(child)\r\n\t{\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChanged', { detail: {} }));\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t}\r\n\r\n\tgetGeneratedEntry()\r\n\t{\r\n\t\treturn this.generated ? this.generated.entry : undefined;\r\n\t}\r\n\r\n\tgetModifiedData(values)\r\n\t{\r\n\t\tconst localValue = this.getModifiedValue();\r\n\t\tlodash.set(values, this.getKeyPath(), lodash.assignIn(\r\n\t\t\ttypeof localValue === 'object' ? localValue : {},\r\n\t\t\t{\r\n\t\t\t\ttoString: () => typeof localValue === 'object' ? undefined : `${localValue}`,\r\n\t\t\t\tasString: this.toString(),\r\n\t\t\t}\r\n\t\t));\r\n\t\tif (this.hasChildren())\r\n\t\t{\r\n\t\t\tlodash.values(this.getChildren()).forEach(\r\n\t\t\t\t(child) => child.getModifiedData(values)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tgetChildModifiedData(values)\r\n\t{\r\n\t\tconst tmpValues = {};\r\n\t\tlodash.values(this.getChildren()).forEach(\r\n\t\t\t(child) => child.getModifiedData(tmpValues)\r\n\t\t);\r\n\t\tlodash.assign(values, lodash.get(tmpValues, this.getKeyPath()));\r\n\t}\r\n\r\n\taddListenerOnChanged(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onChanged', callback);\r\n\t}\r\n\r\n\tremoveListenerOnChanged(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onChanged', callback);\r\n\t}\r\n\r\n\taddListenerOnDispose(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onDispose', callback);\r\n\t}\r\n\r\n\tremoveListenerOnDispose(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onDispose', callback);\r\n\t}\r\n\r\n\t/**\r\n\t * If, when generated, the entry resulted in a tangible value (not just children and a stringify).\r\n\t**/\r\n\thasValue()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\treturn generated.value !== undefined;\r\n\t}\r\n\r\n\tgetRawValue()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\tconst generatedObjValue = generated.value !== undefined && generated.value.value !== undefined ? generated.value.value : generated.value;\r\n\t\tif (generatedObjValue !== undefined) return generatedObjValue;\r\n\t\treturn generated.entry !== undefined ? generated.entry.getKey() : undefined;\r\n\t}\r\n\r\n\tgetModifyingEntryData_internal()\r\n\t{\r\n\t\treturn (this.generated ? this.generated.modifiers : undefined) || {};\r\n\t}\r\n\r\n\tgetModifyingEntryData()\r\n\t{\r\n\t\treturn lodash.mapValues(this.getModifyingEntryData_internal(), (value, key) => this.getModifierFor(key));\r\n\t}\r\n\r\n\tgetModifierFor(keyPath)\r\n\t{\r\n\t\tconst getModifierInternal = (rawModifier) => {\r\n\t\t\tif (typeof rawModifier === 'object')\r\n\t\t\t{\r\n\t\t\t\tswitch (rawModifier.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'multiply':\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconst localData = {};\r\n\t\t\t\t\t\tthis.getChildModifiedData(localData);\r\n\t\t\t\t\t\tconst multiplier = inlineEval(rawModifier.value, localData);\r\n\t\t\t\t\t\tif (multiplier === undefined) return rawModifier;\r\n\t\t\t\t\t\tconst m = parseInt(multiplier, 10);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: rawModifier.type,\r\n\t\t\t\t\t\t\tmultiply: m,\r\n\t\t\t\t\t\t\ttoString: () => `*${m}`,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'multiplyAdd':\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconst localData = {};\r\n\t\t\t\t\t\tthis.getChildModifiedData(localData);\r\n\t\t\t\t\t\tconst multiplier = inlineEval(rawModifier.multiply, localData);\r\n\t\t\t\t\t\tconst adder = inlineEval(rawModifier.add, localData);\r\n\t\t\t\t\t\tif (multiplier === undefined || adder === undefined) return rawModifier;\r\n\t\t\t\t\t\tconst m = parseInt(multiplier, 10);\r\n\t\t\t\t\t\tconst a = parseInt(adder, 10);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: rawModifier.type,\r\n\t\t\t\t\t\t\tmultiply: m,\r\n\t\t\t\t\t\t\tadd: a,\r\n\t\t\t\t\t\t\ttoString: () => `*${m}+${a}`,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn rawModifier;\r\n\t\t};\r\n\r\n\t\tconst rawModifier = this.getModifyingEntryData_internal()[keyPath];\r\n\t\tif (Array.isArray(rawModifier)) return rawModifier.map(getModifierInternal);\r\n\t\telse return getModifierInternal(rawModifier);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the key paths of entries this item is currently modifying.\r\n\t**/\r\n\tgetModifyingEntryKeys()\r\n\t{\r\n\t\treturn Object.keys(this.getModifyingEntryData());\r\n\t}\r\n\r\n\t/**\r\n\t * Get the key paths of entries this item is currently being modified by.\r\n\t**/\r\n\tgetModifiedByEntryKeys()\r\n\t{\r\n\t\treturn {\r\n\t\t\t...this.modifierSources,\r\n\t\t\t...this.postOperationModifiers,\r\n\t\t\t...this.forcedFilter,\r\n\t\t}\r\n\t}\r\n\r\n\taddListenerOnModified(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onModified', callback);\r\n\t}\r\n\r\n\tremoveListenerOnModified(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onModified', callback);\r\n\t}\r\n\r\n\t/**\r\n\t * Called when some entry adds or removes their modifiers from the total list of things this item is modified by.\r\n\t**/\r\n\tonModifiersChanged(evt, args)\r\n\t{\r\n\t\tconst forcedFilter = lodash.cloneDeep(this.forcedFilter);\r\n\t\tif (Array.isArray(args.value)) args.value.forEach((v) => this.applyModifier(evt, args.source, v));\r\n\t\telse this.applyModifier(evt, args.source, args.value);\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onModified', { detail: {} }));\r\n\r\n\t\tconst globalData = this.npc.getModifiedData();\r\n\t\t// TODO: This check is very inefficient, but it works...\r\n\t\tif (!objectEqualityDeepRecursive(forcedFilter, this.forcedFilter))\r\n\t\t{\r\n\t\t\tthis.regenerate(globalData);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.updateString(globalData);\r\n\t\t}\r\n\t}\r\n\r\n\tapplyModifier(evt, source, value)\r\n\t{\r\n\t\tswitch (evt)\r\n\t\t{\r\n\t\t\tcase 'add':\r\n\t\t\t\t// These are forced value filters, where the value argument is the key of the desired value\r\n\t\t\t\tif (typeof value === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.forcedFilter[source] = value;\r\n\t\t\t\t}\r\n\t\t\t\t// A macro of sorts that is executed on compilation\r\n\t\t\t\telse if (typeof value === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.postOperationModifiers[source] = value;\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof value !== 'number') throw new Error(`Cannot use a modifier that is not a number: ${value}`);\r\n\t\t\t\telse if (value !== 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.modifierSources[source] = value;\r\n\t\t\t\t\tthis.totalModifyingValue += value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'remove':\r\n\t\t\t\t// These are forced value filters, where the value argument is the key of the desired value\r\n\t\t\t\tif (typeof value === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.forcedFilter[source];\r\n\t\t\t\t}\r\n\t\t\t\t// A macro of sorts that is executed on compilation\r\n\t\t\t\telse if (typeof value === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.postOperationModifiers[source];\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof value !== 'number') throw new Error(`Cannot use a modifier that is not a number: ${value}`);\r\n\t\t\t\telse if (value !== 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.modifierSources[source];\r\n\t\t\t\t\tthis.totalModifyingValue -= value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unknown modifiers changed event ${evt}, ${source}: ${value}`);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tgetModifiedValue()\r\n\t{\r\n\t\tlet value = this.getRawValue();\r\n\t\tif (typeof value === 'number')\r\n\t\t{\r\n\t\t\tconst postOperations = Object.values(this.postOperationModifiers);\r\n\t\t\tif (postOperations.length > 0)\r\n\t\t\t{\r\n\t\t\t\tvalue = postOperations.reduce((retVal, modifier) => {\r\n\t\t\t\t\tswitch (modifier.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'multiplyAdd':\r\n\t\t\t\t\t\t\treturn retVal * modifier.multiply + modifier.add;\r\n\t\t\t\t\t\tcase 'multiply':\r\n\t\t\t\t\t\t\treturn retVal;// * modifier.multiply;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthrow new Error('Cannot process modifier object', value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, value);\r\n\t\t\t}\r\n\t\t\tvalue = Math.max(value + this.totalModifyingValue, 0);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tgetStringifyTemplate()\r\n\t{\r\n\t\tconst genEntry = this.getGeneratedEntry();\r\n\t\treturn (genEntry ? genEntry.getStringifyTemplate() : undefined) || (this.schemaEntry.stringify);\r\n\t}\r\n\r\n\tgetDescription()\r\n\t{\r\n\t\tconst genEntry = this.getGeneratedEntry();\r\n\t\treturn (genEntry ? genEntry.getDescription() : undefined) || (this.schemaEntry.description);\r\n\t}\r\n\r\n\tgetStringifyDependencies()\r\n\t{\r\n\t\tconst template = this.getStringifyTemplate();\r\n\t\tif (!template) return [];\r\n\t\tconst allMatches = Array.from(template.matchAll(PURE_VARIABLE_REGEX));\r\n\t\tconst allNonlineageReplacements = allMatches.map((match) => match[1]).filter((key) => this.getChild(key) === undefined);\r\n\t\treturn allNonlineageReplacements;\r\n\t}\r\n\r\n\tupdateString(globalData)\r\n\t{\r\n\t\tconst localizedGlobalData = lodash.cloneDeep(globalData);\r\n\t\tthis.getChildModifiedData(localizedGlobalData);\r\n\r\n\t\tconst stringify = this.getStringifyTemplate();\r\n\t\tthis.stringifyCached = stringify ? inlineEval(stringify, localizedGlobalData) : `${this.getModifiedValue()}`;\r\n\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onUpdateString', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstring: this.stringifyCached\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tif (this.parent) this.parent.updateString(globalData);\r\n\t}\r\n\r\n\taddListenerOnUpdateString(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onUpdateString', callback);\r\n\t}\r\n\r\n\tremoveListenerOnUpdateString(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onUpdateString', callback);\r\n\t}\r\n\r\n\tisValueEquivalentToNone()\r\n\t{\r\n\t\treturn this.toString() === 'none';\r\n\t}\r\n\r\n\ttoString()\r\n\t{\r\n\t\treturn this.stringifyCached;\r\n\t}\r\n\r\n\tgetArticleContent(globalData)\r\n\t{\r\n\t\tconst genEntry = this.getGeneratedEntry();\r\n\t\tconst articleContent = (genEntry ? genEntry.getArticleContent() : undefined) || (this.schemaEntry.articleContent);\r\n\t\tif (articleContent === undefined) { return this.toString(); }\r\n\r\n\t\tconst localizedGlobalData = lodash.cloneDeep(globalData);\r\n\t\tthis.getChildModifiedData(localizedGlobalData);\r\n\r\n\t\treturn inlineEval(articleContent, localizedGlobalData);\r\n\t}\r\n\r\n\tgetDescriptionString(globalData)\r\n\t{\r\n\t\tconst description = this.getDescription();\r\n\t\tif (description === undefined) { return undefined; }\r\n\t\t\r\n\t\tconst localizedGlobalData = lodash.cloneDeep(globalData);\r\n\t\tthis.getChildModifiedData(localizedGlobalData);\r\n\r\n\t\treturn inlineEval(description, localizedGlobalData);\r\n\t}\r\n\r\n\tonStringifyLinkerEvent(evt, { globalData })\r\n\t{\r\n\t\tconsole.assert(evt === 'onChanged');\r\n\t\tthis.updateString(globalData);\r\n\t}\r\n\r\n\tgetGenerationDependencies()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tconst source = field.hasSource() ? field.getSource() : undefined;\r\n\t\tif (!source) return [];\r\n\t\tconst deps = [];\r\n\t\tfor (let match of source.matchAll(PURE_VARIABLE_REGEX))\r\n\t\t\tdeps.push(match[1]);\r\n\t\treturn deps;\r\n\t}\r\n\r\n\taddListenerOnUpdateCollection(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onUpdateCollection', callback);\r\n\t}\r\n\r\n\tremoveListenerOnUpdateCollection(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onUpdateCollection', callback);\r\n\t}\r\n\r\n\tonGenerationDependencyEvent(evt, { key, globalData })\r\n\t{\r\n\t\tconsole.assert(evt === 'onChanged');\r\n\t\tFilter.remove(this.getKeyPath());\r\n\t\tthis.regenerate(globalData);\r\n\t}\r\n\r\n\tgetOurCollections()\r\n\t{\r\n\t\treturn this.schemaEntry.collection !== undefined ? [this.schemaEntry.collection] : [];\r\n\t}\r\n\r\n\tgetCollectionEntryKeys()\r\n\t{\r\n\t\treturn this.collectionLinker.getSubscribedKeys();\r\n\t}\r\n\r\n\tonCollectionEntriesChanged(evt, {source})\r\n\t{\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onUpdateCollection', {\r\n\t\t\tdetail: {\r\n\t\t\t\tentryKeys: this.getCollectionEntryKeys()\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\r\n\thasChildren()\r\n\t{\r\n\t\treturn this.generatedChildren && Object.keys(this.generatedChildren).length > 0;\r\n\t}\r\n\r\n\tgetChildren()\r\n\t{\r\n\t\treturn this.hasChildren() ? this.generatedChildren : {};\r\n\t}\r\n\r\n\tgetChild(subpath)\r\n\t{\r\n\t\tconst { items, remaining } = NpcData.sever(subpath);\r\n\t\tconst children = this.getChildren();\r\n\t\tif (children.hasOwnProperty(items[0]))\r\n\t\t{\r\n\t\t\tconst child = children[items[0]];\r\n\t\t\treturn remaining.length > 0 ? child.getChild(remaining) : child;\r\n\t\t}\r\n\t\telse if (lodash.has(this.getRawValue(), subpath)) return this;\r\n\t\telse\r\n\t\t{\r\n\t\t\t//console.warn(`Could not find entry with subpath ${subpath} under entry ${this.getKeyPath()}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tgetSaveState()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\tif (generated.entry) return generated.entry.getKey();\r\n\t\telse if (typeof generated.value !== 'object') return generated.value;\r\n\t\telse return undefined;\r\n\t}\r\n\r\n\tclearSaveState()\r\n\t{\r\n\t\tthis.npc.updateSaveState(this.getKeyPath(), undefined);\r\n\t\tObject.values(this.getChildren()).forEach((child) => child.clearSaveState());\r\n\t}\r\n\r\n\twriteSaveState()\r\n\t{\r\n\t\tlet saveState = this.getSaveState();\r\n\t\tif (this.generated && Array.isArray(this.generated.redirectPath)) saveState = this.generated.redirectPath.concat([saveState]);\r\n\t\tthis.npc.updateSaveState(this.getKeyPath(), saveState);\r\n\t}\r\n\r\n}","import lodash from 'lodash';\r\nimport TableCollection from './TableCollection';\r\nimport GeneratedEntry from './GeneratedEntry';\r\nimport * as queryString from 'query-string';\r\n\r\nlet NPC_TEMPORARY_DATA = null;\r\n\r\nexport default class NpcData\r\n{\r\n\r\n\tstatic EVENTS = new EventTarget();\r\n\tstatic EVENT_INITIALIZED = 'onInitialized';\r\n\r\n\tstatic sever(fullKey, itemCount = 1)\r\n\t{\r\n\t\tconst path = lodash.toPath(fullKey);\r\n\t\treturn {\r\n\t\t\titems: path.slice(0, itemCount),\r\n\t\t\tremaining: path.slice(itemCount).join('.'),\r\n\t\t};\r\n\t}\r\n\r\n\tstatic toggleOnInitialized(status, callback)\r\n\t{\r\n\t\tswitch (status)\r\n\t\t{\r\n\t\t\tcase 'on':\r\n\t\t\t\tNpcData.EVENTS.addEventListener(NpcData.EVENT_INITIALIZED, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'off':\r\n\t\t\t\tNpcData.EVENTS.removeEventListener(NpcData.EVENT_INITIALIZED, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getSchema()\r\n\t{\r\n\t\tconst tableCollection = TableCollection.get();\r\n\t\treturn tableCollection ? tableCollection.getNpcSchema() : undefined;\r\n\t}\r\n\r\n\tstatic initialize(onInitialized)\r\n\t{\r\n\t\tconst schema = NpcData.getSchema();\r\n\t\tif (!schema) { return; }\r\n\t\t\r\n\t\tconsole.log('Initializing NPC data');\r\n\t\tconst data = new NpcData();\r\n\r\n\t\tconst fields = schema.getFields();\r\n\t\tfor (let field of fields)\r\n\t\t{\r\n\t\t\tdata.addEntry(field);\r\n\t\t}\r\n\r\n\t\tNPC_TEMPORARY_DATA = data;\r\n\r\n\t\tif (typeof onInitialized === 'function')\r\n\t\t{\r\n\t\t\tonInitialized(data);\r\n\t\t}\r\n\r\n\t\tNpcData.EVENTS.dispatchEvent(new CustomEvent(this.EVENT_INITIALIZED, {\r\n\t\t\tdetail: { npc: NPC_TEMPORARY_DATA }\r\n\t\t}));\r\n\t}\r\n\r\n\tsetState(state)\r\n\t{\r\n\t\tthis.saveState = state;\r\n\t\tthis.save();\r\n\t}\r\n\r\n\tstatic get()\r\n\t{\r\n\t\treturn NPC_TEMPORARY_DATA;\r\n\t}\r\n\r\n\tstatic clear()\r\n\t{\r\n\t\twindow.sessionStorage.removeItem('npc');\r\n\t\tNpcData.initialize((npc) => npc.regenerateAll(NpcData.getState() || {}));\r\n\t}\r\n\r\n\tstatic getState()\r\n\t{\r\n\t\treturn JSON.parse(window.sessionStorage.getItem('npc'));\r\n\t}\r\n\r\n\tstatic getCurrentLinkData()\r\n\t{\r\n\t\tconst npcDataInUrl = queryString.parse(window.location.search);\r\n\t\tif (typeof npcDataInUrl.npc === 'string') \r\n\t\t{\r\n\t\t\treturn JSON.parse(npcDataInUrl.npc);\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getLink()\r\n\t{\r\n\t\tconst stateString = JSON.stringify(NpcData.getState());\r\n\t\tconst encoded = encodeURIComponent(stateString);\r\n\t\treturn `${window.location.href.slice(0, -1)}?npc=${encoded}`;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.events = new EventTarget();\r\n\r\n\t\tthis.entries = {};\r\n\t\tthis.categories = {};\r\n\r\n\t\tthis.saveState = {};\r\n\t}\r\n\r\n\ttoggleListener(event, status, callback)\r\n\t{\r\n\t\tswitch (status)\r\n\t\t{\r\n\t\t\tcase 'on':\r\n\t\t\t\tthis.events.addEventListener(event, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'off':\r\n\t\t\t\tthis.events.removeEventListener(event, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\taddEntry(field)\r\n\t{\r\n\t\tconst entry = new GeneratedEntry(this);\r\n\t\tentry.readEntry(field);\r\n\t\tentry.category = field.getCategory();\r\n\t\tthis.entries[entry.getKeyPath()] = entry;\r\n\t\tthis.categories[field.category] = (this.categories[field.getCategory()] || []).concat([field.getKey()]);\r\n\t}\r\n\r\n\tgetEntry(keyPath)\r\n\t{\r\n\t\tconst { items, remaining } = NpcData.sever(keyPath, 2);\r\n\t\tconst entry = this.entries[`${items[0]}.${items[1]}`];\r\n\t\treturn remaining.length > 0 && entry !== undefined ? entry.getChild(remaining) : entry;\r\n\t}\r\n\r\n\tgetCategories()\r\n\t{\r\n\t\treturn Object.keys(this.categories).sort();\r\n\t}\r\n\r\n\tgetEntriesForCategory(category)\r\n\t{\r\n\t\treturn (this.categories[category] || []).sort();\r\n\t}\r\n\r\n\tregenerateAll(presetData)\r\n\t{\r\n\t\tconst schema = NpcData.getSchema();\r\n\t\tconst globalData = {};\r\n\t\tfor (let entryKey of schema.getGenerationOrder())\r\n\t\t{\r\n\t\t\tconst entry = this.entries[entryKey];\r\n\t\t\tconst getPreset = (e) => presetData !== undefined ? lodash.cloneDeep(presetData[e.getKeyPath()]) : undefined;\r\n\t\t\tentry.regenerate(globalData, getPreset);\r\n\t\t\tentry.getModifiedData(globalData);\r\n\t\t}\r\n\t\tthis.save();\r\n\t}\r\n\r\n\tforAllEntries(loop)\r\n\t{\r\n\t\tlodash.values(this.entries).forEach(loop);\r\n\t}\r\n\r\n\tgetModifiedData()\r\n\t{\r\n\t\tconst values = {}\r\n\t\tthis.forAllEntries((entry) => entry.getModifiedData(values));\r\n\t\treturn values;\r\n\t}\r\n\r\n\tupdateSaveState(key, state)\r\n\t{\r\n\t\tif (state === undefined) { delete this.saveState[key]; }\r\n\t\telse this.saveState[key] = state;\r\n\t}\r\n\r\n\tsave()\r\n\t{\r\n\t\twindow.sessionStorage.setItem('npc', JSON.stringify(this.saveState));\r\n\t}\r\n\r\n}","/*eslint no-unused-vars: [0, {\"args\": \"after-used\", \"argsIgnorePattern\": \"^_\"}]*/\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { Accordion, Icon, Button, Menu, Form, Popup, Header } from 'semantic-ui-react';\r\nimport { TableFilter } from '../TableFilter';\r\nimport { StorageAccordion } from '../StorageAccordion';\r\nimport { camelCaseToTitle } from '../../lib/str';\r\nimport NpcData from '../../storage/NpcData';\r\nimport * as shortid from 'shortid';\r\nimport { inlineEval } from '../../generator/modules/evalAtCtx';\r\nimport lodash from 'lodash';\r\n\r\n/*\r\nfunction DataViewEntryCategory({\r\n\ttitleKey, description, children,\r\n\tactive, onClick\r\n})\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Accordion.Title\r\n\t\t\t\tindex={titleKey}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t>\r\n\t\t\t\t{camelCaseToTitle(titleKey)} <Icon name='dropdown' />\r\n\t\t\t</Accordion.Title>\r\n\t\t\t<Accordion.Content active={active}>\r\n\t\t\t\t{description}\r\n\t\t\t\t{children}\r\n\t\t\t</Accordion.Content>\r\n\t\t</div>\r\n\t);\r\n}\r\n//*/\r\n\r\nfunction makeModifierPopup(title, popupTitle, itemMap)\r\n{\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\ttrigger={<label>{title} ({Object.keys(itemMap).length})</label>}\r\n\t\t\tcontent={(\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Header as='h5'>{popupTitle}</Header>\r\n\t\t\t\t\t{Object.keys(itemMap).map((key) => (\r\n\t\t\t\t\t\t<div key={key}>\r\n\t\t\t\t\t\t\t{key}: {JSON.stringify(itemMap[key])}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction EntryView({\r\n\ttableCollection, npcSchema, npc,\r\n\tpropertyKey, storageKey,\r\n\tentry, parentEntry,\r\n\tactive, onClick, forceCollapse, // from StorageAccordion\r\n})\r\n{\r\n\t// TODO: this is ineffecient, but it cant be passed in b/c passing through react copies objects, does not pass by ref.\r\n\t// maybe add functionality to cache data until it is marked as dirty.\r\n\tconst npcModifiedData = npc.getModifiedData();\r\n\tconst sourceTableKey = parentEntry.getSourceTableKey(tableCollection);\r\n\tconst isMissingSourceTable = parentEntry.isMissingSourceTable(tableCollection, (k) => inlineEval(k, npcModifiedData));\r\n\r\n\tconst refresh = React.useState(undefined)[1];\r\n\tuseEffect(() =>\r\n\t{\r\n\t\tfunction onChanged({ detail }) { refresh(shortid.generate()); }\r\n\t\tfunction onDispose({ detail }) { forceCollapse(detail.entry.getKey()); }\r\n\t\tentry.addListenerOnChanged(onChanged);\r\n\t\tentry.addListenerOnUpdateString(onChanged);\r\n\t\tentry.addListenerOnModified(onChanged);\r\n\t\tentry.addListenerOnUpdateCollection(onChanged);\r\n\t\tentry.addListenerOnDispose(onDispose);\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tentry.removeListenerOnChanged(onChanged)\r\n\t\t\tentry.removeListenerOnUpdateString(onChanged);\r\n\t\t\tentry.removeListenerOnModified(onChanged);\r\n\t\t\tentry.removeListenerOnUpdateCollection(onChanged);\r\n\t\t\tentry.removeListenerOnDispose(onDispose);\r\n\t\t};\r\n\t});\r\n\r\n\tconst rawValue = entry.getRawValue();\r\n\tconst modifiedValue = entry.getModifiedValue();\r\n\tconst hasFilter = entry.hasFilter(tableCollection, npcModifiedData);\r\n\tconst modifiersFromEntry = entry.getModifyingEntryData();\r\n\tconst modifiersFromEntryCount = entry.getModifyingEntryKeys().length;\r\n\tconst hasModifiers = modifiersFromEntryCount > 0;\r\n\tconst modifiersOfEntry = entry.getModifiedByEntryKeys();\r\n\tconst isModified = Object.keys(modifiersOfEntry).length > 0;\r\n\tconst stringifyDeps = entry.getStringifyDependencies();\r\n\tconst stringifySubscribed = entry.stringifyLinker.getSubscribedKeys();\r\n\tconst generationDependencies = entry.getGenerationDependencies();\r\n\tconst generationDependedOnBy = entry.generationDependencyLinker.getSubscribedKeys();\r\n\tconst canRegenerate = entry.getCanReroll();\r\n\tconst collectionEntryKeys = entry.getCollectionEntryKeys();\r\n\tconst collectionEntryObj = collectionEntryKeys.reduce((accum, entryKey) =>\r\n\t{\r\n\t\tconst collectionEntry = npc.getEntry(entryKey);\r\n\t\tif (collectionEntry && !collectionEntry.isValueEquivalentToNone())\r\n\t\t\taccum[entryKey] = collectionEntry.toString();\r\n\t\treturn accum;\r\n\t}, {})\r\n\r\n\tif (active)\r\n\t{\r\n\t\t//console.log(entry, hasFilter, table);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Menu secondary style={{ marginBottom: 0 }}>\r\n\t\t\t\t<Menu.Item fitted>\r\n\t\t\t\t\t<Accordion.Title\r\n\t\t\t\t\t\tindex={propertyKey}\r\n\t\t\t\t\t\tactive={!isMissingSourceTable && active}\r\n\t\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isMissingSourceTable && <Icon name='dropdown' />}\r\n\t\t\t\t\t\t{camelCaseToTitle(propertyKey)} - &nbsp;\r\n\t\t\t\t\t\t<span>{entry.toString()}</span>\r\n\t\t\t\t\t\t{isMissingSourceTable && (\r\n\t\t\t\t\t\t\t<span> - No generator available</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Accordion.Title>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t{!isMissingSourceTable && canRegenerate && <Menu.Item fitted position='right'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ margin: 2 }}\r\n\t\t\t\t\t\ticon={'refresh'}\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tentry.regenerate(npcModifiedData);\r\n\t\t\t\t\t\t\tnpc.save();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcontent={camelCaseToTitle(propertyKey)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ margin: 2 }}\r\n\t\t\t\t\t\ticon='refresh' content='Children'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tentry.regenerateChildren(npcModifiedData);\r\n\t\t\t\t\t\t\tnpc.save();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Menu.Item>}\r\n\t\t\t</Menu>\r\n\t\t\t{!isMissingSourceTable && active && <Accordion.Content\r\n\t\t\t>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tborderLeft: '2px solid rgba(34,36,38,.15)',\r\n\t\t\t\t\tpaddingLeft: '10px',\r\n\t\t\t\t\tmarginLeft: '7px',\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Form.Group widths={'equal'} style={hasFilter && !entry.hasValue() ? { margin: 0 } : {}}>\r\n\t\t\t\t\t\t\t{hasFilter && (\r\n\t\t\t\t\t\t\t\t<Form.Field\r\n\t\t\t\t\t\t\t\t\tlabel={'Filter'}\r\n\t\t\t\t\t\t\t\t\tcontrol={TableFilter}\r\n\t\t\t\t\t\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\t\t\t\t\t\ttableKey={sourceTableKey !== undefined ? inlineEval(sourceTableKey, npcModifiedData) : undefined}\r\n\t\t\t\t\t\t\t\t\tstorageKey={entry.getKeyPath()}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{entry.hasValue() && (typeof rawValue !== 'object') && <Form.Field>\r\n\t\t\t\t\t\t\t\t<label>Generated Value</label>\r\n\t\t\t\t\t\t\t\t{rawValue !== undefined ? rawValue : (\r\n\t\t\t\t\t\t\t\t\t<span style={{ color: 'red' }}>Not Generated</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t\t{entry.hasValue() && (typeof modifiedValue !== 'object') && <Form.Field>\r\n\t\t\t\t\t\t\t\t<label>Value with Modifiers</label>\r\n\t\t\t\t\t\t\t\t{modifiedValue !== undefined ? modifiedValue : (\r\n\t\t\t\t\t\t\t\t\t<span style={{ color: 'red' }}>Not Generated</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group widths={'equal'} style={\r\n\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\thasModifiers\r\n\t\t\t\t\t\t\t\t|| isModified\r\n\t\t\t\t\t\t\t\t|| stringifyDeps.length > 0\r\n\t\t\t\t\t\t\t\t|| stringifySubscribed.length > 0\r\n\t\t\t\t\t\t\t\t|| generationDependencies.length > 0\r\n\t\t\t\t\t\t\t\t|| generationDependedOnBy.length > 0\r\n\t\t\t\t\t\t\t) ? { margin: 0 } : {}\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t{hasModifiers && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Modifies', 'Modifies Entries', modifiersFromEntry\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{isModified && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Modified By', 'Modified by Entries', modifiersOfEntry\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{stringifyDeps.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'String Dependencies', 'String Dependencies', stringifyDeps\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{stringifySubscribed.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'String Subscriptions', 'String Subscriptions', stringifySubscribed\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{generationDependencies.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Dependencies', 'Generation Dependencies', generationDependencies\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{generationDependedOnBy.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Depended On By', 'Generations That Depend on entry', generationDependedOnBy\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{collectionEntryKeys.length > 0 && <Form.Field>\r\n\t\t\t\t\t\t\t\t{makeModifierPopup('Other Values', 'Collective Values', collectionEntryObj)}\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t{lodash.toPairs(collectionEntryObj).map(([entryKey, stringified]) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={entryKey}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Popup key={entryKey}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttrigger={(<p>{stringified}</p>)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent={(`Source: ${entryKey}`)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t{entry.hasChildren() && <StorageAccordion\r\n\t\t\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\t\t\tentryComponentType={EntryView}\r\n\t\t\t\t\t\tentries={lodash.toPairs(entry.getChildren()).reduce((accum, [childKey, childEntry]) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taccum[childKey] = {\r\n\t\t\t\t\t\t\t\ttableCollection: tableCollection,\r\n\t\t\t\t\t\t\t\tnpcSchema: npcSchema,\r\n\t\t\t\t\t\t\t\tnpc: npc,\r\n\t\t\t\t\t\t\t\tnpcModifiedData: npcModifiedData,\r\n\t\t\t\t\t\t\t\tpropertyKey: childKey,\r\n\t\t\t\t\t\t\t\tstorageKey: `${storageKey}.${childKey}`,\r\n\t\t\t\t\t\t\t\tentry: childEntry,\r\n\t\t\t\t\t\t\t\tparentEntry: childEntry.schemaEntry,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn accum;\r\n\t\t\t\t\t\t}, {})}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t</Accordion.Content>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DataViewEntry({\r\n\tpropertyKey, tableCollection, entryKey, storageKey,\r\n\tactive, onClick, forceCollapse,\r\n})\r\n{\r\n\tconst npcSchema = tableCollection ? tableCollection.getNpcSchema() : null;\r\n\tconst npc = NpcData.get();\r\n\tconst entry = npc.getEntry(entryKey);\r\n\r\n\tconst parentEntry = entry.getField();\r\n\r\n\treturn (\r\n\t\t<EntryView\r\n\t\t\ttableCollection={tableCollection} npcSchema={npcSchema} npc={npc}\r\n\r\n\t\t\tpropertyKey={propertyKey} storageKey={storageKey}\r\n\t\t\tentry={entry} parentEntry={parentEntry}\r\n\r\n\t\t\tactive={active} onClick={onClick} forceCollapse={forceCollapse}\r\n\t\t/>\r\n\t)\r\n}\r\n","import React from 'react';\r\nimport NpcData from '../../storage/NpcData';\r\nimport lodash from 'lodash';\r\nimport { Header, Button, List, Popup, Table } from 'semantic-ui-react';\r\nimport * as shortid from 'shortid';\r\nimport pluralize from '../../lib/pluralize';\r\n\r\nfunction toFeet(n)\r\n{\r\n\tconst realFeet = ((n * 0.393700) / 12);\r\n\tconst feet = Math.floor(realFeet);\r\n\tconst inches = Math.floor((realFeet - feet) * 12);\r\n\treturn feet + \"'\" + inches + '\"';\r\n}\r\n\r\nfunction toSentenceCase(sentence)\r\n{\r\n\treturn sentence.length <= 0 ? '' : (\r\n\t\tsentence[0].toUpperCase() + sentence.slice(1)\r\n\t);\r\n}\r\n\r\nfunction getRenderedText(text, entry, globalData)\r\n{\r\n\tif (typeof text === 'function')\r\n\t{\r\n\t\treturn text(entry);\r\n\t}\r\n\telse if (text !== undefined)\r\n\t{\r\n\t\treturn text;\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn entry.getArticleContent(globalData);\r\n\t}\r\n}\r\n\r\nfunction InlineEntryComponent({ entry, getComponent })\r\n{\r\n\tconst refresh = React.useState(undefined)[1];\r\n\tReact.useEffect(() => {\r\n\t\tfunction onChanged(evt) { refresh(shortid.generate()); }\r\n\t\tentry.addListenerOnChanged(onChanged);\r\n\t\tentry.addListenerOnUpdateString(onChanged);\r\n\t\tentry.addListenerOnModified(onChanged);\r\n\t\tentry.addListenerOnUpdateCollection(onChanged);\r\n\t\treturn () => {\r\n\t\t\tentry.removeListenerOnChanged(onChanged)\r\n\t\t\tentry.removeListenerOnUpdateString(onChanged);\r\n\t\t\tentry.removeListenerOnModified(onChanged);\r\n\t\t\tentry.removeListenerOnUpdateCollection(onChanged);\r\n\t\t};\r\n\t});\r\n\treturn getComponent(entry) || <span/>;\r\n}\r\n\r\nfunction InlineEntryItem({\r\n\tentry, rerollAs, globalData, text,\r\n})\r\n{\r\n\treturn (\r\n\t\t<InlineEntryComponent\r\n\t\t\tentry={entry}\r\n\t\t\tgetComponent={(e) => {\r\n\t\t\t\tconst renderedText = getRenderedText(text, e, globalData);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\thoverable={true}\r\n\t\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t\t<span style={{ color: \"#4400ff\", fontWeight: 'bold' }}>{renderedText}</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tcontent={(\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tpath={rerollAs || e.getKeyPath()} size='mini'\r\n\t\t\t\t\t\t\t\t\t\ticon='refresh'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\te.regenerate(globalData);\r\n\t\t\t\t\t\t\t\t\t\t\te.npc.save();\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{e.getName()}\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t{renderedText}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tpath={rerollAs || e.getKeyPath()} size='mini'\r\n\t\t\t\t\t\t\t\t\ticon='refresh' content='Children'\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\te.regenerateChildren(globalData);\r\n\t\t\t\t\t\t\t\t\t\te.npc.save();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport function ArticleContent({ usePlainText })\r\n{\r\n\tconst npc = NpcData.get();\r\n\tconst globalData = npc.getModifiedData();\r\n\r\n\tconst createEntryItem = (entry, text=undefined, rerollAs=undefined) =>\r\n\t{\r\n\t\tif (!entry) { return <div />; }\r\n\t\tif (usePlainText || !entry.getCanReroll())\r\n\t\t{\r\n\t\t\treturn getRenderedText(text, entry, globalData);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<InlineEntryItem\r\n\t\t\t\tentry={entry}\r\n\t\t\t\trerollAs={rerollAs}\r\n\t\t\t\tglobalData={globalData}\r\n\t\t\t\ttext={text}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\t\r\n\tconst strength = npc.getEntry('stats.abilityScores.strength');\r\n\tconst dexterity = npc.getEntry('stats.abilityScores.dexterity');\r\n\tconst constitution = npc.getEntry('stats.abilityScores.constitution');\r\n\tconst intelligence = npc.getEntry('stats.abilityScores.intelligence');\r\n\tconst wisdom = npc.getEntry('stats.abilityScores.wisdom');\r\n\tconst charisma = npc.getEntry('stats.abilityScores.charisma');\r\n\tconst ethicalPositive = npc.getEntry('stats.alignmentTendancies.ethical.positive');\r\n\tconst ethicalNeutral = npc.getEntry('stats.alignmentTendancies.ethical.neutral');\r\n\tconst ethicalNegative = npc.getEntry('stats.alignmentTendancies.ethical.negative');\r\n\tconst moralPositive = npc.getEntry('stats.alignmentTendancies.moral.positive');\r\n\tconst moralNeutral = npc.getEntry('stats.alignmentTendancies.moral.neutral');\r\n\tconst moralNegative = npc.getEntry('stats.alignmentTendancies.moral.negative');\r\n\r\n\tconst name = npc.getEntry('identity.name');\r\n\tconst surname = npc.getEntry('identity.surname');\r\n\tconst pronouns = npc.getEntry('identity.pronouns');\r\n\tconst genderIdentity = npc.getEntry('identity.genderIdentity');\r\n\tconst genderExpression = npc.getEntry('identity.genderExpression');\r\n\tconst sex = npc.getEntry('identity.sex');\r\n\tconst romanticIdentity = npc.getEntry('identity.romanticIdentity');\r\n\tconst sexualIdentity = npc.getEntry('identity.sexualIdentity');\r\n\tconst sexualOrientation = npc.getEntry('identity.sexualOrientation');\r\n\r\n\tconst profession = npc.getEntry('occupation.profession');\r\n\tconst occupationalArea = npc.getEntry('occupation.area');\r\n\r\n\tconst age = npc.getEntry('description.age');\r\n\tconst eyeColor = npc.getEntry('description.eyeColor');\r\n\tconst height = npc.getEntry('description.height');\r\n\tconst weight = npc.getEntry('description.weight');\r\n\tconst face = npc.getEntry('description.face');\r\n\tconst race = npc.getEntry('description.race');\r\n\tconst hair = npc.getEntry('description.race.hair');\r\n\tconst skin = npc.getEntry('description.race.skin');\r\n\tconst beard = npc.getEntry('description.race.beard');\r\n\r\n\tconst physicalTraitsMap = npc.getEntry('description.specialPhysical').getChildren();\r\n\tconst physicalTraits = lodash.values(physicalTraitsMap).map((entry) => (\r\n\t\t<List.Item key={entry.getKeyPath()} as='li'>\r\n\t\t\t{createEntryItem(entry, (e) => toSentenceCase(e.toString()))}\r\n\t\t</List.Item>\r\n\t));\r\n\r\n\tconst deity = npc.getEntry('personality.religion.deity');\r\n\tconst worship = npc.getEntry('personality.religion.worship');\r\n\tconst quirks = npc.getEntry('personality.quirks');\r\n\tconst quirkList = quirks.getCollectionEntryKeys()\r\n\t\t.map((entryKey) => npc.getEntry(entryKey))\r\n\t\t.filter((entry) => !entry.isValueEquivalentToNone())\r\n\t\t.map((entry) => (\r\n\t\t\t<List.Item key={entry.getKeyPath()} as='li'>\r\n\t\t\t\t{createEntryItem(entry, (e) => toSentenceCase(e.toString()))}\r\n\t\t\t</List.Item>\r\n\t\t));\r\n\r\n\tconst hooks = npc.getEntry('hooks.hook');\r\n\tconst relationshipStatus = npc.getEntry('relations.relationship');\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{usePlainText && (\r\n\t\t\t\t<p>View generation at <a href={NpcData.getLink()}>D&amp;D-Generator</a></p>\r\n\t\t\t)}\r\n\r\n\t\t\t<Header as='h1' content='Description' />\r\n\t\t\t<List bulleted as='ul'>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{createEntryItem(name)}{surname.hasValue() && createEntryItem(surname, (e) => ` ${e.toString()}`)}\r\n\t\t\t\t\t&nbsp; is a &nbsp;\r\n\t\t\t\t\t{createEntryItem(age)} year old &nbsp;\r\n\t\t\t\t\t{createEntryItem(race)} &nbsp;\r\n\t\t\t\t\t{createEntryItem(genderIdentity)} and &nbsp;\r\n\t\t\t\t\t{createEntryItem(profession)} ({createEntryItem(occupationalArea)})\r\n\t\t\t\t\t<InlineEntryComponent entry={profession}\r\n\t\t\t\t\t\tgetComponent={(e) => {\r\n\t\t\t\t\t\t\tconst desc = e.getDescriptionString(globalData);\r\n\t\t\t\t\t\t\tif (desc === undefined) return undefined;\r\n\t\t\t\t\t\t\treturn <span>&nbsp;({desc})</span>;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t<InlineEntryComponent entry={pronouns}\r\n\t\t\t\t\t\tgetComponent={(e) => (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{toSentenceCase(e.getRawValue().singular)}\r\n\t\t\t\t\t\t\t\t&nbsp; {pluralize(e.getRawValue(), 'has', 'have')} &nbsp;\r\n\t\t\t\t\t\t\t\t{createEntryItem(eyeColor, (e) => `${e.toString()} eyes`)}, &nbsp;\r\n\t\t\t\t\t\t\t\t{createEntryItem(hair)}, and {createEntryItem(beard)}.\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t<InlineEntryComponent entry={pronouns}\r\n\t\t\t\t\t\tgetComponent={(e) => (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{toSentenceCase(e.getRawValue().singular)}\r\n\t\t\t\t\t\t\t\t&nbsp; {pluralize(e.getRawValue(), 'has', 'have')} &nbsp;\r\n\t\t\t\t\t\t\t\t{createEntryItem(skin)}.\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t<InlineEntryComponent entry={pronouns}\r\n\t\t\t\t\t\tgetComponent={(e) => (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{toSentenceCase(e.getRawValue().singular)}\r\n\t\t\t\t\t\t\t\t&nbsp; {pluralize(e.getRawValue(), 'stands', 'stand')} &nbsp;\r\n\t\t\t\t\t\t\t\t{createEntryItem(height, (e) => `${e.toString()}cm (${toFeet(e.getModifiedValue())})`)}\r\n\t\t\t\t\t\t\t\t&nbsp; tall and {pluralize(e.getRawValue(), 'has', 'have')} a &nbsp;\r\n\t\t\t\t\t\t\t\t{createEntryItem(weight)} build.\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t<InlineEntryComponent entry={pronouns}\r\n\t\t\t\t\t\tgetComponent={(e) => (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{toSentenceCase(e.getRawValue().singular)}\r\n\t\t\t\t\t\t\t\t&nbsp; {pluralize(e.getRawValue(), 'has', 'have')} an &nbsp;\r\n\t\t\t\t\t\t\t\t{createEntryItem(face)} face.\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t{physicalTraits}\r\n\t\t\t</List>\r\n\r\n\t\t\t<Header as='h1' content='Identity' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Pronouns</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(pronouns)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Gender Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(genderIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Gender Expression</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(genderExpression)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sex</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sex)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Romantic Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(romanticIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sexual Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sexualIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sexual Orientation</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sexualOrientation)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\r\n\t\t\t<Header as='h1' content='Personality' />\r\n\t\t\t<List bulleted as='ul'>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t<InlineEntryComponent entry={pronouns}\r\n\t\t\t\t\t\tgetComponent={(e) => (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{toSentenceCase(e.getRawValue().singular)}\r\n\t\t\t\t\t\t\t\t&nbsp; {createEntryItem(worship)} {pluralize(e.getRawValue(), 'worships', 'worship')} {createEntryItem(deity)}.\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t{quirkList}\r\n\t\t\t</List>\r\n\r\n\t\t\t<Header as='h1' content='Relations' />\r\n\t\t\t<b>Relationship Status:</b>&nbsp;{createEntryItem(relationshipStatus)}\r\n\t\t\t\r\n\t\t\t<Header as='h1' content='Hooks' />\r\n\t\t\t<List bulleted as='ul'>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{createEntryItem(hooks, toSentenceCase(hooks.toString()))}\r\n\t\t\t\t</List.Item>\r\n\t\t\t</List>\r\n\r\n\t\t\t<Header as='h1' content='Stats' />\r\n\r\n\t\t\t<Header as='h2' content='Ability Scores' />\r\n\t\t\t<Table striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Strength</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{strength.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Dexterity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{dexterity.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Constitution</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{constitution.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Intelligence</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{intelligence.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Wisdom</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{wisdom.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Charisma</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{charisma.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t\t\r\n\t\t\t<Header as='h2' content='Alignment Tendencies' />\r\n\t\t\t<Header as='h3' content='Ethical' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Lawful</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalPositive)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Neutral</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalNeutral)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Chaotic</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalNegative)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t\t<Header as='h3' content='Moral' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Good</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralPositive)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Neutral</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralNeutral)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Evil</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralNegative)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport { Header, Button, Icon, Popup, Menu, Dropdown } from 'semantic-ui-react';\r\nimport {\r\n\tgetDisplayIconForMode,\r\n} from './EDisplayModes';\r\nimport NpcData from '../../storage/NpcData';\r\nimport copyToClipboard from '../../lib/clipboard';\r\nimport Filter from '../../storage/Filter';\r\nimport { renderToString } from 'react-dom/server';\r\nimport { ArticleContent } from './ArticleContent';\r\n\r\nexport function MenuBar({\r\n\tswitchDisplayMode,\r\n\tdisplayMode,\r\n\tmenuItemsRight,\r\n\tgetEntryLink,\r\n})\r\n{\r\n\t// TODO: Figure out how to keep the switch view mode popup open when the item is clicked\r\n\treturn (\r\n\t\t<Menu borderless pointing secondary>\r\n\t\t\t<Menu.Item onClick={switchDisplayMode}>\r\n\t\t\t\t<Popup\r\n\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\tcontent={'Switch view mode'/*getDisplayModeSwitchLabel(displayMode)*/}\r\n\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t<Header>\r\n\t\t\t\t\t\t\t<Icon name={getDisplayIconForMode(displayMode)} />\r\n\t\t\t\t\t\t\t<Header.Content>NPC</Header.Content>\r\n\t\t\t\t\t\t</Header>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Menu.Item>\r\n\t\t\t<Menu.Menu position='right'>\r\n\t\t\t\t{menuItemsRight || []}\r\n\t\t\t\t<Dropdown key='export' item text={'Copy To Clipboard'}>\r\n\t\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t\t<Dropdown.Item icon='linkify' text='Generator Link' onClick={() => copyToClipboard(NpcData.getLink())} />\r\n\t\t\t\t\t\t<Dropdown.Item icon='file text' text='Article' onClick={() => {\r\n\t\t\t\t\t\t\tcopyToClipboard(renderToString(\r\n\t\t\t\t\t\t\t\t<ArticleContent usePlainText={true} />\r\n\t\t\t\t\t\t\t));\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t<Dropdown.Item icon='code' text='JSON' onClick={() => copyToClipboard(JSON.stringify(NpcData.getState()))} />\r\n\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t\t<Menu.Item>\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\t\tcontent={'Clear All Filters'}\r\n\t\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\t\tonClick={Filter.clear}\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 2, marginRight: 2, }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon.Group>\r\n\t\t\t\t\t\t\t\t\t<Icon name='filter' />\r\n\t\t\t\t\t\t\t\t\t<Icon name='cancel' corner='bottom right' />\r\n\t\t\t\t\t\t\t\t</Icon.Group>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\t\tcontent={'Delete generated data'}\r\n\t\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon={'trash'}\r\n\t\t\t\t\t\t\t\tonClick={NpcData.clear}\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 2, marginRight: 2, }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t</Menu.Menu>\r\n\t\t</Menu>\r\n\t);\r\n}","import React from 'react';\r\nimport { Accordion, Icon } from 'semantic-ui-react';\r\nimport { camelCaseToTitle } from '../../lib/str';\r\nimport { StorageAccordion } from '../StorageAccordion';\r\nimport { DISPLAY_MODES } from './EDisplayModes';\r\nimport { DataViewEntry } from './DetailViewEntry';\r\nimport NpcData from '../../storage/NpcData';\r\nimport { MenuBar } from './MenuBar';\r\n\r\nfunction DetailViewCategory({\r\n\tpropertyKey, tableCollection,\r\n\tcategoryFields, storageKey,\r\n\tactive, onClick,\r\n})\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Accordion.Title\r\n\t\t\t\tindex={propertyKey}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\tstyle={{ marginBottom: 0 }}\r\n\t\t\t>\r\n\t\t\t\t<Icon name='dropdown' />\r\n\t\t\t\t{camelCaseToTitle(propertyKey)}\r\n\t\t\t</Accordion.Title>\r\n\t\t\t<Accordion.Content\r\n\t\t\t\tactive={active}\r\n\t\t\t>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tpaddingLeft: '1em'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<StorageAccordion\r\n\t\t\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\t\t\tentryComponentType={DataViewEntry}\r\n\t\t\t\t\t\tactive={active}\r\n\t\t\t\t\t\tentries={categoryFields.reduce((accum, fieldKey) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taccum[fieldKey] = {\r\n\t\t\t\t\t\t\t\tpropertyKey: fieldKey,\r\n\t\t\t\t\t\t\t\ttableCollection: tableCollection,\r\n\t\t\t\t\t\t\t\tentryKey: `${propertyKey}.${fieldKey}`,\r\n\t\t\t\t\t\t\t\tstorageKey: `${storageKey}.${fieldKey}`,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn accum;\r\n\t\t\t\t\t\t}, {})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</Accordion.Content>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DetailView(props)\r\n{\r\n\tconst npcSchema = props.tableCollection.getNpcSchema();\r\n\tconst storageKey = `npc.${DISPLAY_MODES.Detailed}.expandedEntries`;\r\n\tconsole.log(props.tableCollection, npcSchema, NpcData.get());\r\n\tconst npc = NpcData.get();\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<MenuBar\r\n\t\t\t\tswitchDisplayMode={props.switchDisplayMode}\r\n\t\t\t\tdisplayMode={props.displayMode}\r\n\t\t\t/>\r\n\r\n\t\t\t<StorageAccordion\r\n\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\tentryComponentType={DetailViewCategory}\r\n\t\t\t\tentries={npc.getCategories().reduce((accum, category) =>\r\n\t\t\t\t{\r\n\t\t\t\t\taccum[category] = {\r\n\t\t\t\t\t\tpropertyKey: category,\r\n\t\t\t\t\t\ttableCollection: props.tableCollection,\r\n\t\t\t\t\t\tcategoryFields: npc.getEntriesForCategory(category),\r\n\t\t\t\t\t\tstorageKey: `${storageKey}.${category}`,\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn accum;\r\n\t\t\t\t}, {})}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { MenuBar } from './MenuBar';\r\nimport { ArticleContent } from './ArticleContent';\r\n\r\nexport function ArticleView(props)\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<MenuBar\r\n\t\t\t\tswitchDisplayMode={props.switchDisplayMode}\r\n\t\t\t\tdisplayMode={props.displayMode}\r\n\t\t\t/>\r\n\t\t\t<ArticleContent/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport { Loader, Icon } from 'semantic-ui-react';\r\nimport shortid from 'shortid';\r\nimport { DetailView } from '../components/NPC/DetailView';\r\nimport storage from 'local-storage';\r\nimport {\r\n\tDISPLAY_MODES,\r\n\tgetNextDisplayMode,\r\n} from '../components/NPC/EDisplayModes';\r\nimport NpcData from '../storage/NpcData';\r\nimport { ArticleView } from '../components/NPC/ArticleView';\r\n\r\nconst CURRENT_DISPLAYMODE_STORAGE = `npc.displayMode`;\r\n\r\nexport function NpcView(props)\r\n{\r\n\tconst parsedNpcData = NpcData.getCurrentLinkData();\r\n\tif (parsedNpcData !== undefined)\r\n\t{\r\n\t\t// filter out the npc data\r\n\t\t// warning: this will remove ALL url params\r\n\t\twindow.location.replace(\r\n\t\t\t`${window.location.protocol}//${window.location.host}${window.location.pathname}`\r\n\t\t);\r\n\t}\r\n\r\n\tconst refreshWith = useState(0)[1];\r\n\tconst [displayMode, setDisplayMode] = useState(storage.get(CURRENT_DISPLAYMODE_STORAGE) || DISPLAY_MODES.Readable);\r\n\tconst switchDisplayMode = () => {\r\n\t\tconst nextMode = getNextDisplayMode(displayMode);\r\n\t\tstorage.set(CURRENT_DISPLAYMODE_STORAGE, nextMode);\r\n\t\tsetDisplayMode(nextMode);\r\n\t};\r\n\r\n\tuseEffect(() =>\r\n\t{\r\n\t\tfunction onTableCollectionChanged({ detail })\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tTableCollection.addOnChanged(onTableCollectionChanged);\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tTableCollection.removeOnChanged(onTableCollectionChanged);\r\n\t\t}\r\n\t});\r\n\r\n\tuseEffect(() =>\r\n\t{\r\n\t\tfunction onNpcInitialized({ detail })\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tNpcData.toggleOnInitialized('on', onNpcInitialized);\r\n\t\tif (!NpcData.get())\r\n\t\t{\r\n\t\t\tNpcData.initialize((npc) => {\r\n\t\t\t\tif (parsedNpcData !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tnpc.setState(parsedNpcData);\r\n\t\t\t\t}\r\n\t\t\t\tnpc.regenerateAll(NpcData.getState() || {});\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tNpcData.toggleOnInitialized('off', onNpcInitialized);\r\n\t\t}\r\n\t});\r\n\r\n\tconst tableCollection = TableCollection.get();\r\n\tconst npcData = NpcData.get();\r\n\tif (!tableCollection || !npcData)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Loader active>Loading</Loader>\r\n\t\t);\r\n\t}\r\n\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return (\r\n\t\t\t<ArticleView\r\n\t\t\t\tlocation={props.location}\r\n\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\tswitchDisplayMode={switchDisplayMode}\r\n\t\t\t\tdisplayMode={displayMode}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tcase DISPLAY_MODES.Detailed: return (\r\n\t\t\t<DetailView\r\n\t\t\t\tlocation={props.location}\r\n\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\tswitchDisplayMode={switchDisplayMode}\r\n\t\t\t\tdisplayMode={displayMode}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tdefault: return (\r\n\t\t\t<div>\r\n\t\t\t\tSomething went wrong, I'm confused... <Icon name='question' />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","\r\nconst EVENTS = new EventTarget();\r\n\r\nexport class View\r\n{\r\n\r\n\tstatic set(view)\r\n\t{\r\n\t\tif (view === View.get()) { return; }\r\n\t\twindow.sessionStorage.setItem(\"view\", view);\r\n\t\tEVENTS.dispatchEvent(new CustomEvent('onChanged_view', { detail: view }));\r\n\t}\r\n\r\n\tstatic get()\r\n\t{\r\n\t\treturn window.sessionStorage.getItem(\"view\");\r\n\t}\r\n\r\n\tstatic subscribeOnChanged(callback)\r\n\t{\r\n\t\tEVENTS.addEventListener('onChanged_view', callback);\r\n\t}\r\n\r\n\tstatic unsubscribeOnChanged(callback)\r\n\t{\r\n\t\tEVENTS.removeEventListener('onChanged_view', callback);\r\n\t}\r\n\r\n}\r\n\r\nexport class Table\r\n{\r\n\r\n\tstatic set(value)\r\n\t{\r\n\t\tif (value === Table.get()) { return; }\r\n\t\twindow.sessionStorage.setItem(\"table\", value);\r\n\t\tEVENTS.dispatchEvent(new CustomEvent('onChanged_table', { detail: value }));\r\n\t}\r\n\r\n\tstatic get()\r\n\t{\r\n\t\treturn window.sessionStorage.getItem(\"table\");\r\n\t}\r\n\r\n\tstatic subscribeOnChanged(callback)\r\n\t{\r\n\t\tEVENTS.addEventListener('onChanged_table', callback);\r\n\t}\r\n\r\n\tstatic unsubscribeOnChanged(callback)\r\n\t{\r\n\t\tEVENTS.removeEventListener('onChanged_table', callback);\r\n\t}\r\n\r\n}","import React from 'react';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport {useTable} from 'react-table';\r\nimport { Table, Header, Container } from 'semantic-ui-react';\r\nimport * as DataTable from '../storage/Table';\r\n\r\nfunction getDataTable(tableKey)\r\n{\r\n\tconst tableCollection = TableCollection.get();\r\n\tif (!tableCollection) { return undefined; }\r\n\treturn tableKey !== undefined ? tableCollection.getTableAtPath(tableKey) : undefined;\r\n}\r\n\r\n// ReactHooks: https://reactjs.org/docs/hooks-effect.html\r\n// Memos: https://reactjs.org/docs/hooks-reference.html#usememo\r\nexport default function DataTableView({ tableKey })\r\n{\r\n\tconst dataTable = getDataTable(tableKey);\r\n\t\r\n\tconst columns = React.useMemo(() => DataTable.default.COLUMNS, []);\r\n\r\n\tconst [rowCount, setRowCount] = React.useState(dataTable === undefined ? 0 : dataTable.length());\r\n\tReact.useEffect(() => {\r\n\r\n\t\tif (dataTable === undefined) { return; }\r\n\r\n\t\tfunction onChangedRowCount({ details })\r\n\t\t{\r\n\t\t\tsetRowCount(details.next);\r\n\t\t}\r\n\r\n\t\tdataTable.subscribeOnChangedRowCount(onChangedRowCount);\r\n\r\n\t\treturn () => {\r\n\t\t\tdataTable.unsubscribeOnChangedRowCount(onChangedRowCount);\r\n\t\t};\r\n\t});\r\n\r\n\tconst data = React.useMemo(() => {\r\n\t\tconst table = getDataTable(tableKey);\r\n\t\tif (table === undefined) { return []; }\r\n\t\treturn table.getRows();\r\n\t}, [tableKey]);\r\n\r\n\t// React-Table API: https://github.com/tannerlinsley/react-table/blob/master/docs/api.md#usetable\r\n\t// React-Table Examples: https://github.com/tannerlinsley/react-table/blob/master/docs/examples.md\r\n\tconst {\r\n\t\tgetTableProps,\r\n\t\tgetTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n\t} = useTable({\r\n\t\tcolumns, data,\r\n\t});\r\n\r\n\tif (dataTable === undefined)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t403: No table found\r\n\t\t\t</Header>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Header>{dataTable.getKey()} ({rowCount} rows)</Header>\r\n\t\t\t<Table {...getTableProps()}>\r\n\t\t\t\t<Table.Header>\r\n\t\t\t\t\t{headerGroups.map((headerGroup) => (\r\n\t\t\t\t\t\t<Table.Row {...headerGroup.getHeaderGroupProps()}>\r\n\t\t\t\t\t\t\t{headerGroup.headers.map((column) => (\r\n\t\t\t\t\t\t\t\t<Table.HeaderCell {...column.getHeaderProps()}>\r\n\t\t\t\t\t\t\t\t\t{column.render('Header')}\r\n\t\t\t\t\t\t\t\t</Table.HeaderCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Table.Header>\r\n\t\t\t\t<Table.Body {...getTableBodyProps()}>\r\n\t\t\t\t\t{rows.map((row, i) => prepareRow(row) || (\r\n\t\t\t\t\t\t<Table.Row {...row.getRowProps()}>\r\n\t\t\t\t\t\t\t{row.cells.map(cell => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Table.Cell {...cell.getCellProps()}>\r\n\t\t\t\t\t\t\t\t\t\t{cell.render('Cell')}\r\n\t\t\t\t\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t</Container>\r\n\t);\r\n}\r\n\r\n/*\r\nexport class DataTableView extends React.Component\r\n{\r\n\tgetTableData()\r\n\t{\r\n\t\tconst tableCollection = TableCollection.get();\r\n\t\tif (!tableCollection) { return undefined; }\r\n\t\tconst tableKey = this.props.tableKey;\r\n\t\treturn tableKey !== undefined ? tableCollection.getTable(tableKey) : undefined;\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconsole.log(DataTable.default.COLUMNS);\r\n\t\treturn 'T2';\r\n\t\tconsole.log(COLUMNS);\r\n\r\n\t\tconst tableData = this.getTableData();\r\n\t\tif (tableData === undefined)\r\n\t\t{\r\n\t\t}\r\n\r\n\t\tconsole.log(tableData);\r\n\r\n\t}\r\n\r\n}\r\n\t\t//*/\r\n","import React from 'react';\r\nimport lodash from 'lodash';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport Tree from 'react-animated-tree';\r\nimport { View, Table } from '../storage/Session';\r\nimport * as queryString from 'query-string';\r\nimport DataTableView from '../components/DataTableView';\r\n\r\nexport function DataView()\r\n{\r\n\tconst urlParams = queryString.parse(window.location.search);\r\n\tif (urlParams.table !== undefined)\r\n\t{\r\n\t\treturn <DataTableView tableKey={urlParams.table} />\r\n\t}\r\n\r\n\tfunction makeTreeNode([pathItem, nodeDetails])\r\n\t{\r\n\t\tconst allNodeProperties = Object.keys(nodeDetails);\r\n\t\tconst subNodeProperties = allNodeProperties.filter((item) => item !== 'table');\r\n\t\tconst hasTable = allNodeProperties.includes('table');\r\n\t\treturn (\r\n\t\t\t<Tree key={pathItem}\r\n\t\t\t\tcontent={(\r\n\t\t\t\t\thasTable ? (\r\n\t\t\t\t\t\t<a href={(\r\n\t\t\t\t\t\t\t`${window.location.protocol}//${window.location.host}${window.location.pathname}?table=${nodeDetails.table.getKeyPath()}`\r\n\t\t\t\t\t\t)}>{pathItem}</a>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tsubNodeProperties.length > 0 ? pathItem : `Unknown: ${pathItem}`\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={(\r\n\t\t\t\t\t!hasTable ? undefined : () =>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tView.set(\"data\");\r\n\t\t\t\t\t\tTable.set(nodeDetails.table.getKeyPath());\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t>\r\n\t\t\t\t{(\r\n\t\t\t\t\tsubNodeProperties.map(\r\n\t\t\t\t\t\t(propKey) => ([propKey, nodeDetails[propKey]])\r\n\t\t\t\t\t).map(makeTreeNode)\r\n\t\t\t\t)}\r\n\t\t\t</Tree>\r\n\t\t);\r\n\t}\r\n\r\n\tconst tableCollection = TableCollection.get();\r\n\tif (tableCollection)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Tree\r\n\t\t\t\tcontent={'Tables'}\r\n\t\t\t>\r\n\t\t\t\t{lodash.toPairs(tableCollection.getTableTree()).map(makeTreeNode)}\r\n\t\t\t</Tree>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport { Header } from 'semantic-ui-react';\r\n\r\nexport class HomeView extends React.Component\r\n{\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Header>HOME</Header>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport { NpcView } from \"./view/NpcView\";\r\nimport { DataView } from \"./view/DataView\";\r\nimport { HomeView } from './view/HomeView';\r\n\r\nconst routes = {\r\n\t\"home\": () => <HomeView />,\r\n\t\"npc\": () => <NpcView />,\r\n  \"data\": () => <DataView />,\r\n};\r\n\r\nexport default routes;","import React from 'react';\r\nimport { Menu } from 'semantic-ui-react';\r\nimport { View } from '../storage/Session';\r\n\r\nexport function HeaderBarLink({ path, children })\r\n{\r\n\treturn (\r\n\t\t<Menu.Item\r\n\t\t\tname={path}\r\n\t\t\tactive={View.get() === path}\r\n\t\t\tonClick={() => {\r\n\t\t\t\tView.set(path);\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Menu.Item>\r\n\t);\r\n}","import React from 'react';\r\nimport { Menu, Button, Icon } from 'semantic-ui-react';\r\nimport { HeaderBarLink } from './HeaderBarLink';\r\nimport TableCollection from '../storage/TableCollection';\r\n\r\nexport class HeaderBar extends React.Component\r\n{\r\n\r\n\tonClearStorage()\r\n\t{\r\n\t\tconsole.log('Syncing tables');\r\n\t\tTableCollection.clear();\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Menu>\r\n\t\t\t\t<HeaderBarLink path={'home'}>Home</HeaderBarLink>\r\n\t\t\t\t<HeaderBarLink path={'npc'}>NPC</HeaderBarLink>\r\n\t\t\t\t<HeaderBarLink path={'data'}>Data</HeaderBarLink>\r\n\r\n\t\t\t\t<Menu.Item position='right'>\r\n\t\t\t\t\t<Button color='red' onClick={this.onClearStorage.bind(this)}>\r\n\t\t\t\t\t\t<Icon name='sync' /> Sync\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Menu.Item>\r\n      </Menu>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport { HeaderBar } from '../components/HeaderBar';\r\nimport { Container } from 'semantic-ui-react';\r\n\r\nexport class ViewContainer extends React.Component\r\n{\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Container>\r\n\t\t\t\t<HeaderBar page={this.props.page} />\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</Container>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { Container } from \"semantic-ui-react\";\r\nimport Routes from './routes';\r\nimport { HomeView } from \"./view/HomeView\";\r\nimport shortid from 'shortid';\r\nimport TableCollection from './storage/TableCollection';\r\nimport { ViewContainer } from './view/ViewContainer';\r\nimport { View } from './storage/Session';\r\nimport NpcData from './storage/NpcData';\r\n\r\nfunction getRoute(view)\r\n{\r\n\tif (Routes.hasOwnProperty(view)) return Routes[view]();\r\n\telse return (<HomeView />);\r\n}\r\n\r\nexport default function App()\r\n{\r\n\tconst refreshWith = React.useState(undefined)[1];\r\n\r\n\tif (NpcData.getCurrentLinkData() !== undefined)\r\n\t{\r\n\t\tView.set(\"npc\");\r\n\t}\r\n \r\n\tReact.useEffect(() => {\r\n\t\tconst onViewChanged = () => refreshWith(shortid.generate());\r\n\t\tView.subscribeOnChanged(onViewChanged);\r\n\t\treturn () => {\r\n\t\t\tView.unsubscribeOnChanged(onViewChanged);\r\n\t\t};\r\n\t});\r\n\r\n\tReact.useEffect(() =>\r\n\t{\r\n\t\tfunction onTableCollectionChanged()\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tTableCollection.addOnChanged(onTableCollectionChanged);\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tTableCollection.removeOnChanged(onTableCollectionChanged);\r\n\t\t}\r\n\t});\r\n\r\n\tif (!TableCollection.get())\r\n\t{\r\n\t\tTableCollection.initialize();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container id={'App'} fluid>\r\n\t\t\t<ViewContainer page={window.location.pathname}>\r\n\t\t\t\t{getRoute(View.get())}\r\n\t\t\t</ViewContainer>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'semantic-ui-css/semantic.min.css';\r\n\r\n// https://www.npmjs.com/package/semver\r\nconsole.log('Versions:', {\r\n\treact: React.version,\r\n\tnode: process.versions.node,\r\n});\r\nconsole.log(`Serving at public url: ${process.env.PUBLIC_URL}`);\r\n\r\nReactDOM.render((\r\n\t<App />\r\n), document.getElementById('root'));","module.exports = (values) =>\r\n{\r\n\treturn values[Math.floor(Math.random() * values.length)];\r\n}","var map = {\n\t\"./tables/bonus/ability/cha/high.json\": 223,\n\t\"./tables/bonus/ability/cha/index.json\": 224,\n\t\"./tables/bonus/ability/cha/low.json\": 225,\n\t\"./tables/bonus/ability/cha/medium.json\": 226,\n\t\"./tables/bonus/ability/const/high.json\": 227,\n\t\"./tables/bonus/ability/const/index.json\": 228,\n\t\"./tables/bonus/ability/const/low.json\": 229,\n\t\"./tables/bonus/ability/const/medium.json\": 230,\n\t\"./tables/bonus/ability/dex/high.json\": 231,\n\t\"./tables/bonus/ability/dex/index.json\": 232,\n\t\"./tables/bonus/ability/dex/low.json\": 233,\n\t\"./tables/bonus/ability/dex/medium.json\": 234,\n\t\"./tables/bonus/ability/index.json\": 235,\n\t\"./tables/bonus/ability/int/high.json\": 236,\n\t\"./tables/bonus/ability/int/index.json\": 237,\n\t\"./tables/bonus/ability/int/low.json\": 238,\n\t\"./tables/bonus/ability/int/medium.json\": 239,\n\t\"./tables/bonus/ability/str/high.json\": 240,\n\t\"./tables/bonus/ability/str/index.json\": 241,\n\t\"./tables/bonus/ability/str/low.json\": 242,\n\t\"./tables/bonus/ability/str/medium.json\": 243,\n\t\"./tables/bonus/ability/wis/high.json\": 244,\n\t\"./tables/bonus/ability/wis/index.json\": 245,\n\t\"./tables/bonus/ability/wis/low.json\": 246,\n\t\"./tables/bonus/ability/wis/medium.json\": 247,\n\t\"./tables/bonus/index.json\": 248,\n\t\"./tables/common/color.json\": 249,\n\t\"./tables/common/frequency.json\": 250,\n\t\"./tables/common/index.json\": 251,\n\t\"./tables/common/language.json\": 252,\n\t\"./tables/common/rightLeft.json\": 253,\n\t\"./tables/common/rightLeftBoth.json\": 254,\n\t\"./tables/deity/archdevil.json\": 255,\n\t\"./tables/deity/demon.json\": 256,\n\t\"./tables/deity/dragon.json\": 257,\n\t\"./tables/deity/drow.json\": 258,\n\t\"./tables/deity/dwarf.json\": 259,\n\t\"./tables/deity/elf.json\": 260,\n\t\"./tables/deity/evil.json\": 261,\n\t\"./tables/deity/gnome.json\": 262,\n\t\"./tables/deity/good.json\": 263,\n\t\"./tables/deity/halfling.json\": 264,\n\t\"./tables/deity/index.json\": 265,\n\t\"./tables/deity/orc.json\": 266,\n\t\"./tables/filters.json\": 267,\n\t\"./tables/hooks/all.json\": 268,\n\t\"./tables/hooks/contest.json\": 269,\n\t\"./tables/hooks/furniture.json\": 270,\n\t\"./tables/hooks/index.json\": 271,\n\t\"./tables/hooks/organization.json\": 272,\n\t\"./tables/hooks/personality.json\": 273,\n\t\"./tables/hooks/werebeast.json\": 274,\n\t\"./tables/identity/genderExpression.json\": 275,\n\t\"./tables/identity/genderIdentity.json\": 276,\n\t\"./tables/identity/index.json\": 277,\n\t\"./tables/identity/pronouns/index.json\": 278,\n\t\"./tables/identity/pronouns/man.json\": 279,\n\t\"./tables/identity/pronouns/nonbinary.json\": 280,\n\t\"./tables/identity/pronouns/woman.json\": 281,\n\t\"./tables/identity/romanticIdentity.json\": 282,\n\t\"./tables/identity/sex.json\": 283,\n\t\"./tables/identity/sexualIdentity.json\": 284,\n\t\"./tables/identity/sexualOrientation.json\": 285,\n\t\"./tables/identity/sexualOrientation/gayLesbian/index.json\": 286,\n\t\"./tables/identity/sexualOrientation/gayLesbian/man.json\": 287,\n\t\"./tables/identity/sexualOrientation/gayLesbian/nonbinary.json\": 288,\n\t\"./tables/identity/sexualOrientation/gayLesbian/woman.json\": 289,\n\t\"./tables/identity/sexualOrientation/index.json\": 290,\n\t\"./tables/index.json\": 291,\n\t\"./tables/items/aliment.json\": 292,\n\t\"./tables/items/index.json\": 293,\n\t\"./tables/items/mundanePlural.json\": 294,\n\t\"./tables/items/precious.json\": 295,\n\t\"./tables/items/preciousPrefixed.json\": 296,\n\t\"./tables/items/weapon.json\": 297,\n\t\"./tables/items/weapon/index.json\": 298,\n\t\"./tables/items/weapon/martialfinesse.json\": 299,\n\t\"./tables/items/weapon/martialranged.json\": 300,\n\t\"./tables/items/weapon/martialweapon.json\": 301,\n\t\"./tables/items/weapon/simplefinesse.json\": 302,\n\t\"./tables/items/weapon/simpleranged.json\": 303,\n\t\"./tables/items/weapon/simpleweapon.json\": 304,\n\t\"./tables/misc/abstractWord.json\": 305,\n\t\"./tables/misc/index.json\": 306,\n\t\"./tables/misc/monster.json\": 307,\n\t\"./tables/npc-full.json\": 308,\n\t\"./tables/npc.json\": 309,\n\t\"./tables/occupation/Class/Caster.json\": 310,\n\t\"./tables/occupation/Class/Category.json\": 311,\n\t\"./tables/occupation/Class/Martial.json\": 312,\n\t\"./tables/occupation/Class/Misc.json\": 313,\n\t\"./tables/occupation/Class/index.json\": 314,\n\t\"./tables/occupation/Craftsperson.json\": 315,\n\t\"./tables/occupation/Entertainer.json\": 316,\n\t\"./tables/occupation/Government.json\": 317,\n\t\"./tables/occupation/Independent.json\": 318,\n\t\"./tables/occupation/Martial.json\": 319,\n\t\"./tables/occupation/Merchant.json\": 320,\n\t\"./tables/occupation/Outlaw.json\": 321,\n\t\"./tables/occupation/PhilosopherFields.json\": 322,\n\t\"./tables/occupation/PublicServant.json\": 323,\n\t\"./tables/occupation/Religious.json\": 324,\n\t\"./tables/occupation/Scholar.json\": 325,\n\t\"./tables/occupation/Traveller.json\": 326,\n\t\"./tables/occupation/all.json\": 327,\n\t\"./tables/occupation/index.json\": 328,\n\t\"./tables/occupation/type.json\": 329,\n\t\"./tables/personality/index.json\": 330,\n\t\"./tables/personality/worship.json\": 331,\n\t\"./tables/quirks.json\": 332,\n\t\"./tables/quirks/general.json\": 333,\n\t\"./tables/quirks/index.json\": 334,\n\t\"./tables/quirks/military.json\": 335,\n\t\"./tables/quirks/modifier/collection.json\": 336,\n\t\"./tables/quirks/modifier/index.json\": 337,\n\t\"./tables/quirks/modifier/inheritance.json\": 338,\n\t\"./tables/quirks/modifier/pet/animal.json\": 339,\n\t\"./tables/quirks/modifier/pet/index.json\": 340,\n\t\"./tables/quirks/modifier/pet/name.json\": 341,\n\t\"./tables/quirks/modifier/raceAllergy.json\": 342,\n\t\"./tables/quirks/modifier/relation.json\": 343,\n\t\"./tables/quirks/modifier/relation/familyMember.json\": 344,\n\t\"./tables/quirks/modifier/relation/index.json\": 345,\n\t\"./tables/quirks/modifier/size.json\": 346,\n\t\"./tables/quirks/nature.json\": 347,\n\t\"./tables/quirks/poor.json\": 348,\n\t\"./tables/quirks/religious.json\": 349,\n\t\"./tables/quirks/rich.json\": 350,\n\t\"./tables/quirks/traits-1.json\": 351,\n\t\"./tables/quirks/traits-2.json\": 352,\n\t\"./tables/quirks/weird.json\": 353,\n\t\"./tables/race.json\": 354,\n\t\"./tables/race/Aasimar/deity.json\": 355,\n\t\"./tables/race/Aasimar/index.json\": 356,\n\t\"./tables/race/Aasimar/name-man.json\": 357,\n\t\"./tables/race/Aasimar/name-nonbinary.json\": 358,\n\t\"./tables/race/Aasimar/name-woman.json\": 359,\n\t\"./tables/race/Aasimar/quirk-evil.json\": 360,\n\t\"./tables/race/Aasimar/quirk-good.json\": 361,\n\t\"./tables/race/Dragonborn/color.json\": 362,\n\t\"./tables/race/Dragonborn/deity.json\": 363,\n\t\"./tables/race/Dragonborn/hair.json\": 364,\n\t\"./tables/race/Dragonborn/index.json\": 365,\n\t\"./tables/race/Dragonborn/name-man.json\": 366,\n\t\"./tables/race/Dragonborn/name-nonbinary.json\": 367,\n\t\"./tables/race/Dragonborn/name-woman.json\": 368,\n\t\"./tables/race/Dragonborn/quirks.json\": 369,\n\t\"./tables/race/Dwarf.json\": 370,\n\t\"./tables/race/Dwarf/beard.json\": 371,\n\t\"./tables/race/Dwarf/deity.json\": 372,\n\t\"./tables/race/Dwarf/index.json\": 373,\n\t\"./tables/race/Dwarf/name-man.json\": 374,\n\t\"./tables/race/Dwarf/name-nonbinary.json\": 375,\n\t\"./tables/race/Dwarf/name-woman.json\": 376,\n\t\"./tables/race/Dwarf/quirks.json\": 377,\n\t\"./tables/race/Dwarf/skin.json\": 378,\n\t\"./tables/race/Dwarf/surname.json\": 379,\n\t\"./tables/race/Elf.json\": 380,\n\t\"./tables/race/Elf/Drow/index.json\": 381,\n\t\"./tables/race/Elf/Drow/quirks.json\": 382,\n\t\"./tables/race/Elf/deity.json\": 383,\n\t\"./tables/race/Elf/index.json\": 384,\n\t\"./tables/race/Elf/name-man.json\": 385,\n\t\"./tables/race/Elf/name-nonbinary.json\": 386,\n\t\"./tables/race/Elf/name-woman.json\": 387,\n\t\"./tables/race/Elf/quirks.json\": 388,\n\t\"./tables/race/Elf/skin.json\": 389,\n\t\"./tables/race/Elf/skin/color.json\": 390,\n\t\"./tables/race/Elf/skin/index.json\": 391,\n\t\"./tables/race/Elf/surname.json\": 392,\n\t\"./tables/race/Firbolg/deity.json\": 393,\n\t\"./tables/race/Firbolg/index.json\": 394,\n\t\"./tables/race/Firbolg/name-man.json\": 395,\n\t\"./tables/race/Firbolg/name-nonbinary.json\": 396,\n\t\"./tables/race/Firbolg/name-woman.json\": 397,\n\t\"./tables/race/Firbolg/quirks.json\": 398,\n\t\"./tables/race/Firbolg/skin.json\": 399,\n\t\"./tables/race/Gnome.json\": 400,\n\t\"./tables/race/Gnome/deity.json\": 401,\n\t\"./tables/race/Gnome/index.json\": 402,\n\t\"./tables/race/Gnome/name-man.json\": 403,\n\t\"./tables/race/Gnome/name-nonbinary.json\": 404,\n\t\"./tables/race/Gnome/name-woman.json\": 405,\n\t\"./tables/race/Gnome/name/any.json\": 406,\n\t\"./tables/race/Gnome/name/index.json\": 407,\n\t\"./tables/race/Gnome/name/man-1.json\": 408,\n\t\"./tables/race/Gnome/name/man-2.json\": 409,\n\t\"./tables/race/Gnome/name/man-3.json\": 410,\n\t\"./tables/race/Gnome/name/man-4.json\": 411,\n\t\"./tables/race/Gnome/name/man.json\": 412,\n\t\"./tables/race/Gnome/name/woman-1.json\": 413,\n\t\"./tables/race/Gnome/name/woman-2.json\": 414,\n\t\"./tables/race/Gnome/name/woman-3.json\": 415,\n\t\"./tables/race/Gnome/name/woman-4.json\": 416,\n\t\"./tables/race/Gnome/name/woman.json\": 417,\n\t\"./tables/race/Gnome/quirks.json\": 418,\n\t\"./tables/race/Goblin/deity.json\": 419,\n\t\"./tables/race/Goblin/index.json\": 420,\n\t\"./tables/race/Goblin/name-man.json\": 421,\n\t\"./tables/race/Goblin/name-nonbinary.json\": 422,\n\t\"./tables/race/Goblin/name-woman.json\": 423,\n\t\"./tables/race/Goliath/deity.json\": 424,\n\t\"./tables/race/Goliath/hair.json\": 425,\n\t\"./tables/race/Goliath/hairTattoos.json\": 426,\n\t\"./tables/race/Goliath/index.json\": 427,\n\t\"./tables/race/Goliath/name-man.json\": 428,\n\t\"./tables/race/Goliath/name-nonbinary.json\": 429,\n\t\"./tables/race/Goliath/name-woman.json\": 430,\n\t\"./tables/race/Goliath/names/adjective.json\": 431,\n\t\"./tables/race/Goliath/names/animal-action.json\": 432,\n\t\"./tables/race/Goliath/names/animal-noun.json\": 433,\n\t\"./tables/race/Goliath/names/craft-action.json\": 434,\n\t\"./tables/race/Goliath/names/craft-noun.json\": 435,\n\t\"./tables/race/Goliath/names/fighting-action.json\": 436,\n\t\"./tables/race/Goliath/names/fighting-noun.json\": 437,\n\t\"./tables/race/Goliath/names/index.json\": 438,\n\t\"./tables/race/Goliath/names/mystic-action.json\": 439,\n\t\"./tables/race/Goliath/names/mystic-noun.json\": 440,\n\t\"./tables/race/Goliath/names/noun.json\": 441,\n\t\"./tables/race/Goliath/quirks-1.json\": 442,\n\t\"./tables/race/Goliath/quirks-2.json\": 443,\n\t\"./tables/race/Half-Dwarf/deity.json\": 444,\n\t\"./tables/race/Half-Dwarf/index.json\": 445,\n\t\"./tables/race/Half-Dwarf/name-man.json\": 446,\n\t\"./tables/race/Half-Dwarf/name-nonbinary.json\": 447,\n\t\"./tables/race/Half-Dwarf/name-woman.json\": 448,\n\t\"./tables/race/Half-Elf/deity.json\": 449,\n\t\"./tables/race/Half-Elf/index.json\": 450,\n\t\"./tables/race/Half-Elf/name-man.json\": 451,\n\t\"./tables/race/Half-Elf/name-nonbinary.json\": 452,\n\t\"./tables/race/Half-Elf/name-woman.json\": 453,\n\t\"./tables/race/Half-Orc/deity.json\": 454,\n\t\"./tables/race/Half-Orc/index.json\": 455,\n\t\"./tables/race/Half-Orc/name-man.json\": 456,\n\t\"./tables/race/Half-Orc/name-nonbinary.json\": 457,\n\t\"./tables/race/Half-Orc/name-woman.json\": 458,\n\t\"./tables/race/Half-Orc/skin.json\": 459,\n\t\"./tables/race/Halfling.json\": 460,\n\t\"./tables/race/Halfling/deity.json\": 461,\n\t\"./tables/race/Halfling/index.json\": 462,\n\t\"./tables/race/Halfling/name-man.json\": 463,\n\t\"./tables/race/Halfling/name-nonbinary.json\": 464,\n\t\"./tables/race/Halfling/name-woman.json\": 465,\n\t\"./tables/race/Halfling/quirks.json\": 466,\n\t\"./tables/race/Halfling/surname.json\": 467,\n\t\"./tables/race/Human/deity.json\": 468,\n\t\"./tables/race/Human/index.json\": 469,\n\t\"./tables/race/Human/name-man.json\": 470,\n\t\"./tables/race/Human/name-nonbinary.json\": 471,\n\t\"./tables/race/Human/name-woman.json\": 472,\n\t\"./tables/race/Human/surname.json\": 473,\n\t\"./tables/race/Kenku/deity.json\": 474,\n\t\"./tables/race/Kenku/index.json\": 475,\n\t\"./tables/race/Kenku/name-man.json\": 476,\n\t\"./tables/race/Kenku/name-nonbinary.json\": 477,\n\t\"./tables/race/Kenku/name-woman.json\": 478,\n\t\"./tables/race/Kenku/names/index.json\": 479,\n\t\"./tables/race/Kenku/names/kenkunameanimal.json\": 480,\n\t\"./tables/race/Kenku/names/kenkunamefighting.json\": 481,\n\t\"./tables/race/Kenku/names/kenkunamemetal.json\": 482,\n\t\"./tables/race/Kenku/names/kenkunamequiet.json\": 483,\n\t\"./tables/race/Kenku/quirks.json\": 484,\n\t\"./tables/race/Kenku/skin.json\": 485,\n\t\"./tables/race/Kenku/skin/color.json\": 486,\n\t\"./tables/race/Kenku/skin/featherTexture.json\": 487,\n\t\"./tables/race/Kenku/skin/index.json\": 488,\n\t\"./tables/race/Lizardfolk/deity.json\": 489,\n\t\"./tables/race/Lizardfolk/index.json\": 490,\n\t\"./tables/race/Lizardfolk/name-man.json\": 491,\n\t\"./tables/race/Lizardfolk/name-nonbinary.json\": 492,\n\t\"./tables/race/Lizardfolk/name-woman.json\": 493,\n\t\"./tables/race/Lizardfolk/quirks-1.json\": 494,\n\t\"./tables/race/Lizardfolk/quirks-2.json\": 495,\n\t\"./tables/race/Orc/deity.json\": 496,\n\t\"./tables/race/Orc/index.json\": 497,\n\t\"./tables/race/Orc/name-man.json\": 498,\n\t\"./tables/race/Orc/name-nonbinary.json\": 499,\n\t\"./tables/race/Orc/name-woman.json\": 500,\n\t\"./tables/race/Orc/skin.json\": 501,\n\t\"./tables/race/Orc/skin/color.json\": 502,\n\t\"./tables/race/Orc/skin/index.json\": 503,\n\t\"./tables/race/Orc/surname.json\": 504,\n\t\"./tables/race/Tabaxi/deity.json\": 505,\n\t\"./tables/race/Tabaxi/index.json\": 506,\n\t\"./tables/race/Tabaxi/name-man.json\": 507,\n\t\"./tables/race/Tabaxi/name-nonbinary.json\": 508,\n\t\"./tables/race/Tabaxi/name-woman.json\": 509,\n\t\"./tables/race/Tabaxi/name/first.json\": 510,\n\t\"./tables/race/Tabaxi/name/index.json\": 511,\n\t\"./tables/race/Tabaxi/name/last.json\": 512,\n\t\"./tables/race/Tabaxi/name/noun.json\": 513,\n\t\"./tables/race/Tabaxi/name/number.json\": 514,\n\t\"./tables/race/Tabaxi/quirkObsession.json\": 515,\n\t\"./tables/race/Tabaxi/quirks.json\": 516,\n\t\"./tables/race/Tabaxi/skin.json\": 517,\n\t\"./tables/race/Tabaxi/skin/color.json\": 518,\n\t\"./tables/race/Tabaxi/skin/index.json\": 519,\n\t\"./tables/race/Tabaxi/skin/pattern.json\": 520,\n\t\"./tables/race/Tabaxi/skin/texture.json\": 521,\n\t\"./tables/race/Tiefling/deity.json\": 522,\n\t\"./tables/race/Tiefling/index.json\": 523,\n\t\"./tables/race/Tiefling/name-evil.json\": 524,\n\t\"./tables/race/Tiefling/name-good.json\": 525,\n\t\"./tables/race/Tiefling/name-man.json\": 526,\n\t\"./tables/race/Tiefling/name-nonbinary.json\": 527,\n\t\"./tables/race/Tiefling/name-woman.json\": 528,\n\t\"./tables/race/Tiefling/name/evil.json\": 529,\n\t\"./tables/race/Tiefling/name/good.json\": 530,\n\t\"./tables/race/Tiefling/name/index.json\": 531,\n\t\"./tables/race/Tiefling/name/neutral.json\": 532,\n\t\"./tables/race/Tiefling/name/unaligned.json\": 533,\n\t\"./tables/race/Tiefling/skin.json\": 534,\n\t\"./tables/race/Triton/deity.json\": 535,\n\t\"./tables/race/Triton/hair-color.json\": 536,\n\t\"./tables/race/Triton/hair.json\": 537,\n\t\"./tables/race/Triton/index.json\": 538,\n\t\"./tables/race/Triton/name-man.json\": 539,\n\t\"./tables/race/Triton/name-nonbinary.json\": 540,\n\t\"./tables/race/Triton/name-woman.json\": 541,\n\t\"./tables/race/Triton/quirks.json\": 542,\n\t\"./tables/race/Triton/skin.json\": 543,\n\t\"./tables/race/Triton/surname.json\": 544,\n\t\"./tables/race/Troglodyte/deity.json\": 545,\n\t\"./tables/race/Troglodyte/index.json\": 546,\n\t\"./tables/race/Troglodyte/name-man.json\": 547,\n\t\"./tables/race/Troglodyte/name-nonbinary.json\": 548,\n\t\"./tables/race/Troglodyte/name-woman.json\": 549,\n\t\"./tables/race/common/index.json\": 550,\n\t\"./tables/race/common/name-nonbinary.json\": 551,\n\t\"./tables/race/index.json\": 552,\n\t\"./tables/relationship/any.json\": 553,\n\t\"./tables/relationship/index.json\": 554,\n\t\"./tables/relationship/relative.json\": 555,\n\t\"./tables/relationship/status.json\": 556,\n\t\"./tables/traits/age.json\": 557,\n\t\"./tables/traits/age/additive.json\": 558,\n\t\"./tables/traits/age/bonusRegular.json\": 559,\n\t\"./tables/traits/age/bonusSmall.json\": 560,\n\t\"./tables/traits/age/index.json\": 561,\n\t\"./tables/traits/age/multiplier3.json\": 562,\n\t\"./tables/traits/age/multiplier6.json\": 563,\n\t\"./tables/traits/alignment/index.json\": 564,\n\t\"./tables/traits/alignment/tendancy.json\": 565,\n\t\"./tables/traits/alignmentMoral.json\": 566,\n\t\"./tables/traits/bodyPart.json\": 567,\n\t\"./tables/traits/bodyPart/extra/finger.json\": 568,\n\t\"./tables/traits/bodyPart/extra/index.json\": 569,\n\t\"./tables/traits/bodyPart/head.json\": 570,\n\t\"./tables/traits/bodyPart/head/index.json\": 571,\n\t\"./tables/traits/bodyPart/head/sided.json\": 572,\n\t\"./tables/traits/bodyPart/head/sidedPlural.json\": 573,\n\t\"./tables/traits/bodyPart/head/unsided.json\": 574,\n\t\"./tables/traits/bodyPart/index.json\": 575,\n\t\"./tables/traits/bodyPart/missing/eye.json\": 576,\n\t\"./tables/traits/bodyPart/missing/fingers.json\": 577,\n\t\"./tables/traits/bodyPart/missing/index.json\": 578,\n\t\"./tables/traits/bodyPart/missing/limb.json\": 579,\n\t\"./tables/traits/bodyPart/sided.json\": 580,\n\t\"./tables/traits/bodyPart/sidedPlural.json\": 581,\n\t\"./tables/traits/bodyPart/unsided.json\": 582,\n\t\"./tables/traits/brand.json\": 583,\n\t\"./tables/traits/degree/degree.json\": 584,\n\t\"./tables/traits/degree/degree2.json\": 585,\n\t\"./tables/traits/degree/index.json\": 586,\n\t\"./tables/traits/descriptor.json\": 587,\n\t\"./tables/traits/eyecolor.json\": 588,\n\t\"./tables/traits/face/attractiveness.json\": 589,\n\t\"./tables/traits/face/beard.json\": 590,\n\t\"./tables/traits/face/beard/index.json\": 591,\n\t\"./tables/traits/face/beard/length.json\": 592,\n\t\"./tables/traits/face/beard/shape.json\": 593,\n\t\"./tables/traits/face/index.json\": 594,\n\t\"./tables/traits/face/looks/bad.json\": 595,\n\t\"./tables/traits/face/looks/badModifier.json\": 596,\n\t\"./tables/traits/face/looks/good.json\": 597,\n\t\"./tables/traits/face/looks/goodModifier.json\": 598,\n\t\"./tables/traits/face/looks/index.json\": 599,\n\t\"./tables/traits/face/looks/normal.json\": 600,\n\t\"./tables/traits/face/looks/normalModifier.json\": 601,\n\t\"./tables/traits/face/shape.json\": 602,\n\t\"./tables/traits/hair.json\": 603,\n\t\"./tables/traits/hair/color.json\": 604,\n\t\"./tables/traits/hair/index.json\": 605,\n\t\"./tables/traits/hair/length.json\": 606,\n\t\"./tables/traits/hair/style.json\": 607,\n\t\"./tables/traits/height.json\": 608,\n\t\"./tables/traits/index.json\": 609,\n\t\"./tables/traits/modifier.json\": 610,\n\t\"./tables/traits/physical.json\": 611,\n\t\"./tables/traits/physical/index.json\": 612,\n\t\"./tables/traits/physical/piercingAmount.json\": 613,\n\t\"./tables/traits/physical/traits-1.json\": 614,\n\t\"./tables/traits/physical/traits-2.json\": 615,\n\t\"./tables/traits/skin/human.json\": 616,\n\t\"./tables/traits/skin/humanColor.json\": 617,\n\t\"./tables/traits/skin/index.json\": 618,\n\t\"./tables/traits/skin/nonhuman.json\": 619,\n\t\"./tables/traits/skin/nonhumanColor.json\": 620,\n\t\"./tables/traits/skin/scales.json\": 621,\n\t\"./tables/traits/skin/scalesColor.json\": 622,\n\t\"./tables/traits/skin/scalesTexture.json\": 623,\n\t\"./tables/traits/skin/textureSkin.json\": 624,\n\t\"./tables/traits/skin/tone.json\": 625,\n\t\"./tables/traits/smell/bad.json\": 626,\n\t\"./tables/traits/smell/good.json\": 627,\n\t\"./tables/traits/smell/index.json\": 628,\n\t\"./tables/traits/tattoo.json\": 629,\n\t\"./tables/traits/tattoo/animal.json\": 630,\n\t\"./tables/traits/tattoo/index.json\": 631,\n\t\"./tables/traits/tattoo/tattooadj.json\": 632,\n\t\"./tables/traits/tattoo/text.json\": 633,\n\t\"./tables/traits/weight.json\": 634\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 222;"],"sourceRoot":""}