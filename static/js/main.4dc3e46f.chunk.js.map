{"version":3,"sources":["lib/randInt.js","lib/clipboard.js","view/HomeView.jsx","generator/modules/index.js","generator/modules/roll.js","generator/modules/rand.js","generator/modules/randInt.js","generator/modules/regex.js","generator/modules/isInRange.js","generator/modules/permutate.js","generator/modules/evalAtCtx.js","generator/modules/createExecutor.js","storage/Entry.js","storage/Table.js","generator/appendModifiers.js","storage/NpcSchema.js","storage/TableCollection.js","lib/str.js","components/StorageAccordion.jsx","components/NPC/EDisplayModes.js","storage/Filter.js","components/TableFilter.jsx","storage/GeneratedEntry.js","storage/NpcData.js","components/NPC/DetailViewEntry.jsx","components/NPC/ArticleContent.jsx","components/NPC/MenuBar.jsx","components/NPC/DetailView.jsx","components/NPC/ArticleView.jsx","view/NpcView.jsx","components/DataTableView.jsx","view/DataView.jsx","routes.js","components/HeaderBarLink.jsx","components/HeaderBar.jsx","view/ViewContainer.jsx","App.jsx","index.js","lib/rand.js","data sync /^/tables.*/.json$"],"names":["module","exports","min","max","Math","ceil","floor","random","html","container","document","createElement","innerHTML","style","position","pointerEvents","opacity","body","appendChild","window","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","err","console","error","removeChild","HomeView","Header","React","Component","roll","tablePath","data","table","TableCollection","get","getTable","filter","rand","match","value","require","split","randInt","preset","undefined","params","map","str","parseInt","regex","RegExp","test","rangeParams","permutate","log","result","length","push","splice","VARIABLE_REGEX","PURE_VARIABLE_REGEX","inlineEval","text","context","replace","group","code","ctx","fullText","lodash","assign","Function","call","e","evalAtCtx","parseMacro","macro","execFunc","args","createExecutor","executor","evaledArgs","Execs","accumulateEntries","onUndefinedKey","reduce","accum","entryData","i","entry","Entry","from","key","getKey","this","weight","redirect","source","stringify","modifiers","children","canReroll","collection","idx","readFrom","index","childrenWithoutKeys","hasSource","tableCollection","evaluateWithData","getSourceTableKey","Object","keys","Table","events","EventTarget","valueMacro","entries","keyPath","obj","entriesWithoutKeys","rows","getKeyPathFromTablePath","values","dispatchOnChangedRowCount","indexOf","prev","next","dispatchEvent","CustomEvent","detail","callback","addEventListener","removeEventListener","getRows","hasFilter","type","getFilterType","getOptions","current","toAppend","cloneDeep","hasValueMacro","filterContext","getDefaultFilter","hasRedirector","redirector","getRedirector","rollable","Array","isArray","shift","presetEntry","find","totalWeight","row","getWeight","weight_sum","warn","chooseRandomWithWeight","includes","getKeyPath","hasGlobalModifiers","getGlobalModifiers","globalModifierEntry","matched","toPairs","modifier","hasOwnProperty","concat","mapValues","modifierList","targetProperty","curve","keyframes","currentIndex","nextIndex","valueInt","getInt","lowerIndex","higherIndex","lowerInput","higherInput","t","lerped","toIntOp","intOp","EVENT_ONCHANGEDFILTER","COLUMNS","accessor","Field","category","NpcSchema","fields","fieldOrder","generationOrder","categories","schema","fieldData","field","addField","getCategory","sort","loadItem","directory","fileName","isIndex","content","itemPath","accumulator","itemPathSplit","slice","join","immediateDirectory","item","assignIn","mapKeys","_","loadTableEntry","TABLE_COLLECTION_CACHE","tables","npcSchema","loadTables","EVENT_ONCHANGED","initialize","event","missingKeyDatum","getTablePathFromKeyPath","getTableKeys","set","camelCaseToTitle","word","toUpperCase","substr","toLowerCase","StorageAccordion","storageKey","entryComponentType","active","useState","storage","expandedEntryKeys","setExpandedEntryKeys_state","setExpandedEntryKeys","remove","isEntryExpanded","handleAccordionClick","removeExpandedEntryKey","Accordion","margin","entryKey","entryProps","storageAccordianComponent","onClick","DISPLAY_MODES","Readable","Detailed","getDisplayIconForMode","displayMode","getNextDisplayMode","Filter","all","allFilters","TableFilter","tableKey","setValue","onDropdownChanged","isValueAValidFilter","defaultFilter","marginTop","marginBottom","minValue","maxValue","onChange","Dropdown","fluid","search","selection","multiple","placeholder","options","EntryLinker","owner","property","onEvent","subscribingTo","subscribed","entryPath","npc","getEntry","entryPaths","uniq","forEach","path","getEntryForPath","add","evt","appendArgsForEntry","a","linker","onEvt","GeneratedEntry","npcData","schemaEntry","stringifyLinker","onStringifyLinkerEvent","bind","stringifyCached","generationDependencyLinker","onGenerationDependencyEvent","modifyingLinker","onModifiersChanged","collectionLinker","onCollectionEntriesChanged","modifierSources","totalModifyingValue","forcedFilter","postOperationModifiers","generated","generatedChildren","parent","getField","name","toPath","getSource","sourceTableKey","getCanReroll","globalData","getPreset","clearSaveState","dispatchToSubscriptions","getModifierFor","unsubscribe","getModifyingEntryKeys","getGenerationDependencies","getStringifyDependencies","getOurCollections","presetData","getFilterValue","redirectPath","getGenerationMacro","hasChildren","getChildren","child","clone","readEntry","updateString","subscribe","getModifiedData","writeSaveState","dispatchToSubscribers","regenerate","onChildGenerated","localValue","getModifiedValue","toString","asString","tmpValues","generatedObjValue","getModifyingEntryData_internal","getModifierInternal","rawModifier","localData","getChildModifiedData","multiplier","m","multiply","adder","getModifyingEntryData","v","applyModifier","objectEqualityDeepRecursive","b","Error","getRawValue","postOperations","retVal","genEntry","getGeneratedEntry","getStringifyTemplate","template","matchAll","getChild","localizedGlobalData","string","assert","deps","getSubscribedKeys","entryKeys","getCollectionEntryKeys","subpath","NpcData","sever","items","remaining","has","updateSaveState","saveState","getSaveState","NPC_TEMPORARY_DATA","fullKey","itemCount","status","EVENTS","EVENT_INITIALIZED","getNpcSchema","getSchema","getFields","addEntry","regenerateAll","stateString","JSON","getState","encoded","encodeURIComponent","process","getGenerationOrder","save","loop","forAllEntries","state","makeModifierPopup","title","popupTitle","itemMap","Popup","trigger","as","EntryView","propertyKey","parentEntry","npcModifiedData","isMissingSourceTable","k","refresh","useEffect","onChanged","details","shortid","addListenerOnChanged","addListenerOnUpdateString","addListenerOnModified","addListenerOnUpdateCollection","removeListenerOnChanged","removeListenerOnUpdateString","removeListenerOnModified","removeListenerOnUpdateCollection","rawValue","modifiedValue","modifiersFromEntry","hasModifiers","modifiersOfEntry","getModifiedByEntryKeys","isModified","stringifyDeps","stringifySubscribed","generationDependencies","generationDependedOnBy","canRegenerate","collectionEntryKeys","collectionEntryObj","collectionEntry","isValueEquivalentToNone","Menu","secondary","Item","fitted","Title","Icon","Button","icon","Content","borderLeft","paddingLeft","marginLeft","Form","Group","widths","hasValue","label","control","color","stringified","childKey","childEntry","DataViewEntry","toSentenceCase","sentence","getRenderedText","InlineEntryItem","rerollAs","renderedText","hoverable","fontWeight","size","getName","ArticleContent","usePlainText","createEntryItem","strength","dexterity","constitution","intelligence","wisdom","charisma","ethicalPositive","ethicalNeutral","ethicalNegative","moralPositive","moralNeutral","moralNegative","surname","pronouns","genderIdentity","genderExpression","sex","romanticIdentity","sexualIdentity","sexualOrientation","profession","age","eyeColor","height","face","race","hair","skin","physicalTraitsMap","physicalTraits","List","deity","worship","quirkList","href","getLink","bulleted","singular","n","realFeet","feet","toFeet","compact","striped","textAlign","Body","Row","Cell","MenuBar","switchDisplayMode","menuItemsRight","getEntryLink","borderless","pointing","copyToClipboard","renderToString","clear","marginRight","corner","DetailViewCategory","categoryFields","fieldKey","DetailView","props","getCategories","getEntriesForCategory","ArticleView","CURRENT_DISPLAYMODE_STORAGE","NpcView","parsedNpcData","npcDataInUrl","queryString","location","parse","refreshWith","setDisplayMode","nextMode","onTableCollectionChanged","generate","addOnChanged","removeOnChanged","onNpcInitialized","toggleOnInitialized","Loader","getDataTable","getTableAtPath","DataTableView","dataTable","columns","useMemo","DataTable","rowCount","setRowCount","subscribeOnChangedRowCount","onChangedRowCount","unsubscribeOnChangedRowCount","useTable","getTableProps","getTableBodyProps","headerGroups","prepareRow","Container","headerGroup","getHeaderGroupProps","headers","column","HeaderCell","getHeaderProps","render","getRowProps","cells","cell","getCellProps","DataView","basePath","routes","getTables","route","useRoutes","getTableTree","makeTreeNode","pathItem","nodeDetails","allNodeProperties","subNodeProperties","hasTable","subnodes","propKey","HeaderBarLink","activeItem","Link","HeaderBar","page","onClearStorage","ViewContainer","App","routeResult","Routes","id","pathname","react","version","node","versions","ReactDOM","getElementById","webpackContext","req","webpackContextResolve","__webpack_require__","o","resolve"],"mappings":"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","file":"static/js/main.4dc3e46f.chunk.js","sourcesContent":["/**\r\n * Returns a random integer between min (inclusive) and max (inclusive).\r\n * The value is no lower than min (or the next integer greater than min\r\n * if min isn't an integer) and no greater than max (or the next integer\r\n * lower than max if max isn't an integer).\r\n * Using Math.round() will give you a non-uniform distribution!\r\n */\r\nmodule.exports = (min, max) =>\r\n{\r\n\tmin = Math.ceil(min);\r\n\tmax = Math.floor(max);\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n}","\r\nfunction copyTextToClipboard(html)\r\n{\r\n\t// Create an iframe (isolated container) for the HTML\r\n  var container = document.createElement('div');\r\n  container.innerHTML = html;\r\n  \r\n  // Hide element\r\n  container.style.position = 'fixed';\r\n  container.style.pointerEvents = 'none';\r\n\tcontainer.style.opacity = 0;\r\n\t\r\n  // Mount the iframe to the DOM to make `contentWindow` available\r\n  document.body.appendChild(container);\r\n\r\n\t// Clear all selected nodes\r\n  window.getSelection().removeAllRanges();\r\n  \r\n  // Add the container as the only selected node\r\n  var range = document.createRange();\r\n  range.selectNode(container);\r\n  window.getSelection().addRange(range);\r\n\r\n  // Copy selected nodes to clipboard\r\n\ttry\r\n\t{\r\n\t\tdocument.execCommand('copy');\r\n\t}\r\n\tcatch (err)\r\n\t{\r\n\t\tconsole.error(err);\r\n\t}\r\n  \r\n  // Remove the iframe\r\n  document.body.removeChild(container);\r\n}\r\n\r\nmodule.exports = copyTextToClipboard;","import React from 'react';\r\nimport { Header } from 'semantic-ui-react';\r\n\r\nexport class HomeView extends React.Component\r\n{\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Header>HOME</Header>\r\n\t\t);\r\n\t}\r\n}","import roll from './roll';\r\nimport rand from './rand';\r\nimport randInt from './randInt';\r\nimport regex from './regex';\r\nimport isInRange from './isInRange';\r\nimport permutate from './permutate';\r\n\r\nexport default {\r\n\troll: roll,\r\n\trand: rand,\r\n\trandInt: randInt,\r\n\tregex: regex,\r\n\trange: isInRange,\r\n\tpermutate: permutate,\r\n};","import TableCollection from '../../storage/TableCollection';\r\n\r\nexport default function exec(tablePath, data)\r\n{\r\n\tconst table = TableCollection.get().getTable(tablePath);\r\n\tif (!table)\r\n\t{\r\n\t\t//console.error(`Could not find table for path ${tablePath}`);\r\n\t\treturn undefined;\r\n\t}\r\n\treturn table.roll(data.filter, data);\r\n}","export default function exec(match)\r\n{\r\n\treturn {\r\n\t\tvalue: require('../../lib/rand')(match.split(','))\r\n\t};\r\n}","export default function exec(match, {preset})\r\n{\r\n\tif (preset !== undefined) return { value: preset };\r\n\tconst params = match.split(',').map(str => parseInt(str, 10));\r\n\treturn {\r\n\t\tvalue: require('../../lib/randInt')(params[0], params[1])\r\n\t};\r\n}","export default function exec(match, data)\r\n{\r\n\tif (data === undefined) return false;\r\n\tconst value = `${data.value}`;\r\n\treturn new RegExp(match).test(value);\r\n}","export default function exec(match, data)\r\n{\r\n\tconst rangeParams = match.split(',').map((str) => parseInt(str, 10));\r\n\treturn data !== undefined\r\n\t\t&& typeof data.value === 'number'\r\n\t\t&& rangeParams[0] <= data.value\r\n\t\t&& data.value <= rangeParams[1];\r\n}","export default function exec(match)\r\n{\r\n\tconsole.log(match);\r\n\tconst params = match.split(',');\r\n\tconst result = [];\r\n\twhile (params.length > 0)\r\n\t{\r\n\t\t// remove a random item from params, and add to the end of result\r\n\t\tresult.push(params.splice(\r\n\t\t\t// index of the next value\r\n\t\t\tMath.floor(Math.random() * params.length),\r\n\t\t\t1\r\n\t\t)[0]);\r\n\t}\r\n\tconsole.log(result);\r\n\treturn {\r\n\t\tvalue: result\r\n\t};\r\n}","import lodash from 'lodash';\r\nimport randInt from '../../lib/randInt';\r\n\r\n// https://stackoverflow.com/questions/8403108/calling-eval-in-particular-context\r\n// https://stackoverflow.com/questions/543533/restricting-eval-to-a-narrow-scope\r\nfunction evalAtCtx(code, ctx, fullText)\r\n{\r\n\t// Ignore the eslint warning about the Function contructor just being eval.\r\n\t// Yes eval is 'evil', but this is a controlled usage with pre-approved input.\r\n\t/*eslint no-new-func: 0*/\r\n\tconst context = lodash.assign({}, ctx, {\r\n\t\trandInt: randInt\r\n\t});\r\n\ttry\r\n\t{\r\n\t\treturn (new Function(`with(this) { return ${code}; }`).call(context));\r\n\t}\r\n\tcatch (e)\r\n\t{\r\n\t\t//console.error(`Error parsing \"${code}\" in text \"${fullText}\" for context`, lodash.cloneDeep(context), e);\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n\r\n// if grouping has periods ('.'), then it definitely relies on another value external to the hierarchy\r\n// (all non-lineage values have at least a category and key, separated by a period)\r\nexport const VARIABLE_REGEX = new RegExp(/\\$\\((.*?)\\)/, 'g');\r\nexport const PURE_VARIABLE_REGEX = new RegExp(/\\$\\(([.a-zA-Z]*?)\\)/, 'g');\r\n\r\nexport function inlineEval(text, context)\r\n{\r\n\treturn text.replace(VARIABLE_REGEX, (match, group) => evalAtCtx(group, context, text));\r\n}","import Execs from './index';\r\nimport {inlineEval} from './evalAtCtx';\r\n\r\nexport function parseMacro(macro)\r\n{\r\n\tconst regex = new RegExp(`^\\\\{(.*):(.*)\\\\}$`);\r\n\tconst match = macro.match(regex);\r\n\tif (match && match.length >= 2)\r\n\t{\r\n\t\treturn {\r\n\t\t\texecFunc: match[1],\r\n\t\t\targs: match[2],\r\n\t\t};\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\nexport function createExecutor(macro)\r\n{\r\n\tconst executor = parseMacro(macro);\r\n\tif (executor)\r\n\t{\r\n\t\treturn (data) => {\r\n\t\t\tconst evaledArgs = inlineEval(executor.args, data);\r\n\t\t\treturn Execs[executor.execFunc](evaledArgs, data);\r\n\t\t};\r\n\t}\r\n\treturn undefined;\r\n}","import {parseMacro} from '../generator/modules/createExecutor';\r\n\r\nexport function accumulateEntries(data, context, onUndefinedKey=undefined)\r\n{\r\n\treturn data.reduce((accum, entryData, i) =>\r\n\t{\r\n\t\tconst entry = Entry.from(entryData, i);\r\n\t\tif (entry.key === undefined)\r\n\t\t{\r\n\t\t\tif (onUndefinedKey !== undefined && typeof onUndefinedKey === 'function')\r\n\t\t\t{\r\n\t\t\t\tonUndefinedKey(entry);\r\n\t\t\t}\r\n\t\t}\r\n\t\taccum[entry.getKey()] = entry;\r\n\t\treturn accum;\r\n\t}, {});\r\n}\r\n\r\nexport class Entry\r\n{\r\n\r\n\tstatic from(data, idx)\r\n\t{\r\n\t\tconst entry = new Entry();\r\n\t\tentry.readFrom(data, idx);\r\n\t\treturn entry;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.weight = undefined;\r\n\t\tthis.key = undefined;\r\n\r\n\t\tthis.redirect = undefined;\r\n\t\tthis.source = undefined;\r\n\r\n\t\tthis.value = undefined;\r\n\t\tthis.stringify = undefined;\r\n\t\tthis.modifiers = {};\r\n\r\n\t\tthis.children = [];\r\n\r\n\t\tthis.canReroll = undefined;\r\n\t\t/**\r\n\t\t * The key for another entry, whose value is an array,\r\n\t\t * which GeneratedEntries that this entry is a schema for,\r\n\t\t * are considered a part of during `GeneratedEntry#getModifiedData`.\r\n\t\t**/\r\n\t\tthis.collection = undefined;\r\n\t}\r\n\r\n\treadFrom(data, idx)\r\n\t{\r\n\t\tthis.weight = data.weight || 1;\r\n\t\tthis.key = data.key;\r\n\t\tthis.index = idx;\r\n\r\n\t\tthis.redirect = data.redirect;\r\n\t\tthis.source = data.source;\r\n\r\n\t\tthis.value = data.value;\r\n\t\tthis.stringify = data.stringify;\r\n\r\n\t\tthis.childrenWithoutKeys = [];\r\n\t\tthis.children = accumulateEntries(data.children || [], `entry '${this.key}'`, (i) => this.childrenWithoutKeys.push(i));\r\n\r\n\t\tthis.modifiers = data.modifiers || {};\r\n\r\n\t\tthis.canReroll = data.canReroll;\r\n\t\tthis.collection = data.collection;\r\n\t}\r\n\r\n\tgetKey()\r\n\t{\r\n\t\treturn this.key || this.index;\r\n\t}\r\n\r\n\thasSource()\r\n\t{\r\n\t\treturn typeof this.source === 'string';\r\n\t}\r\n\r\n\tgetSource()\r\n\t{\r\n\t\treturn this.source;\r\n\t}\r\n\r\n\tgetWeight()\r\n\t{\r\n\t\t// TODO: fetch from local storage\r\n\t\treturn this.weight;\r\n\t}\r\n\r\n\tgetSourceTableKey()\r\n\t{\r\n\t\tif (!this.hasSource()) return undefined;\r\n\t\tconst executor = parseMacro(this.source);\r\n\t\tif (executor.execFunc !== 'roll') return undefined;\r\n\t\treturn executor.args;\r\n\t}\r\n\r\n\tisMissingSourceTable(tableCollection, evaluateWithData)\r\n\t{\r\n\t\tif (!this.hasSource()) return false;\r\n\t\tconst tablePath = this.getSourceTableKey();\r\n\t\tif (!tablePath) return false;\r\n\t\treturn tableCollection.getTable(evaluateWithData(tablePath)) === undefined;\r\n\t}\r\n\r\n\thasRedirector()\r\n\t{\r\n\t\treturn typeof this.redirect === 'string';\r\n\t}\r\n\r\n\tgetRedirector()\r\n\t{\r\n\t\treturn this.redirect;\r\n\t}\r\n\r\n\thasChildren()\r\n\t{\r\n\t\treturn Object.keys(this.children).length > 0;\r\n\t}\r\n\r\n\tgetChildren() { return this.children; }\r\n\r\n\tgetStringifyTemplate()\r\n\t{\r\n\t\treturn this.stringify;\r\n\t}\r\n\r\n\tgetCanReroll()\r\n\t{\r\n\t\treturn this.canReroll === undefined || this.canReroll === true;\r\n\t}\r\n\r\n}","import lodash from 'lodash';\r\nimport { accumulateEntries, Entry } from './Entry';\r\nimport { createExecutor } from '../generator/modules/createExecutor';\r\nimport appendModifiers from '../generator/appendModifiers';\r\nimport { inlineEval } from '../generator/modules/evalAtCtx';\r\n\r\n/**\r\n * Picks a random item from `entries`, using `entry.getWeight()` to get the weight for any\r\n * given item (assuming a weight of 1 if the function returns a falsey value).\r\n * Returns null if it was unable to determine a value. Assumes `entries` is non-empty.\r\n*/\r\nfunction chooseRandomWithWeight(entries)\r\n{\r\n\tconst totalWeight = entries.reduce((accum, row) => accum + (row.getWeight() || 1), 0);\r\n\tconst randInt = require('../lib/randInt')(1, totalWeight);\r\n\r\n\tvar weight_sum = 0;\r\n\tvar i;\r\n\tfor (i = 0; i < entries.length; i++)\r\n\t{\r\n\t\tweight_sum += entries[i].getWeight() || 1;\r\n\t\tif (randInt <= weight_sum)\r\n\t\t{\r\n\t\t\treturn entries[i];\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.warn(`'Returning null from \\`chooseRandomWithWeight\\`. i=${i} weight_sum=${weight_sum}`, entries);\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * A READONLY collective of randomizable entries with modifiers. It is loaded by a TableCollection,\r\n * and can be used to get a weighted random entry that it contains (see the `roll` function).\r\n*/\r\nexport default class Table\r\n{\r\n\r\n\tstatic EVENT_ONCHANGEDFILTER = 'onChangedFilter';\r\n\r\n\tstatic getTablePathFromKeyPath(keyPath)\r\n\t{\r\n\t\treturn keyPath.replace(/\\./g, '/');\r\n\t}\r\n\r\n\tstatic getKeyPathFromTablePath(tablePath)\r\n\t{\r\n\t\treturn tablePath.replace(/\\//g, '.');\r\n\t}\r\n\r\n\t// takes a json object\r\n\tstatic from(obj, key)\r\n\t{\r\n\t\tconst table = new Table();\r\n\t\ttable.key = key;\r\n\t\ttable.filter = obj.filter;\r\n\t\t// turn json data for a table's entry rows into objects\r\n\t\ttable.entriesWithoutKeys = [];\r\n\t\tif (obj.valueMacro)\r\n\t\t{\r\n\t\t\ttable.valueMacro = obj.valueMacro;\r\n\t\t\ttable.entries = null;\r\n\t\t}\r\n\t\telse if (obj.rows)\r\n\t\t{\r\n\t\t\ttable.entries = accumulateEntries(obj.rows, `table '${key}'`, (i) => table.entriesWithoutKeys.push(i));\r\n\t\t}\r\n\t\ttable.modifiers = obj.modifiers;\r\n\t\ttable.redirect = obj.redirect;\r\n\t\ttable.entry = obj.entry !== undefined ? Entry.from(obj.entry, -1) : undefined;\r\n\t\treturn table;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.events = new EventTarget();\r\n\r\n\t\tthis.key = undefined;\r\n\t\tthis.filter = undefined;\r\n\t\t// The macro used to generate a value based on the filter\r\n\t\tthis.valueMacro = undefined;\r\n\t\t// All the possible options available for randomization (and filtering)\r\n\t\tthis.entries = {};\r\n\t\t// Global modifiers that can (and should) be applied to any entry after being rolled.\r\n\t\tthis.modifiers = {};\r\n\r\n\t\tthis.redirect = undefined;\r\n\t}\r\n\r\n\tgetKey()\r\n\t{\r\n\t\treturn this.key;\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\treturn Table.getKeyPathFromTablePath(this.getKey());\r\n\t}\r\n\r\n\thasValueMacro()\r\n\t{\r\n\t\treturn this.valueMacro !== undefined;\r\n\t}\r\n\r\n\tlength()\r\n\t{\r\n\t\treturn this.entries !== null ? Object.keys(this.entries).length : 1;\r\n\t}\r\n\r\n\tgetRows()\r\n\t{\r\n\t\treturn this.entries !== null ? Object.values(this.entries) : [];\r\n\t}\r\n\r\n\taddRow(entry)\r\n\t{\r\n\t\tif (this.entries === null) { return; }\r\n\t\tthis.entries.push(entry);\r\n\t\tthis.dispatchOnChangedRowCount(this.entries.length - 1, this.entries.length);\r\n\t}\r\n\r\n\tremoveRow(entry)\r\n\t{\r\n\t\tif (this.entries === null) { return; }\r\n\t\tthis.entries.splice(this.entries.indexOf(entry), 1);\r\n\t\tthis.dispatchOnChangedRowCount(this.entries.length, this.entries.length - 1);\r\n\t}\r\n\r\n\tdispatchOnChangedRowCount(prev, next)\r\n\t{\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChangedRowCount', {\r\n\t\t\tdetail: { prev, next }\r\n\t\t}));\r\n\t}\r\n\r\n\t// TODO: This will never work because Tables are deserialized from the local storage\r\n\tsubscribeOnChangedRowCount(callback)\r\n\t{\r\n\t\tconsole.error('Changed callbacks will never work on tables');\r\n\t\tthis.events.addEventListener('onChangedRowCount', callback);\r\n\t}\r\n\r\n\tunsubscribeOnChangedRowCount(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onChangedRowCount', callback);\r\n\t}\r\n\r\n\t// Viewing the table via react\r\n\r\n\tgetOptions()\r\n\t{\r\n\t\treturn this.getRows().map((entry) => ({\r\n\t\t\tkey: entry.getKey(), text: entry.getKey(), value: entry.getKey()\r\n\t\t}));\r\n\t}\r\n\r\n\thasFilter()\r\n\t{\r\n\t\treturn this.filter === undefined || this.filter !== false;\r\n\t}\r\n\r\n\tgetFilterType()\r\n\t{\r\n\t\treturn this.hasFilter() && this.filter !== undefined ? this.filter.type : undefined;\r\n\t}\r\n\r\n\tgetDefaultFilter()\r\n\t{\r\n\t\tswitch (this.getFilterType())\r\n\t\t{\r\n\t\t\tcase 'minMaxRange':\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmin: this.filter.min,\r\n\t\t\t\t\tmax: this.filter.max,\r\n\t\t\t\t};\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.getOptions();\r\n\t\t}\r\n\t}\r\n\r\n\thasGlobalModifiers()\r\n\t{\r\n\t\treturn this.modifiers !== null && this.modifiers !== undefined && Object.keys(this.modifiers).length > 0;\r\n\t}\r\n\r\n\tgetGlobalModifiers()\r\n\t{\r\n\t\treturn this.modifiers;\r\n\t}\r\n\r\n\thasRedirector()\r\n\t{\r\n\t\treturn this.redirect !== undefined;\r\n\t}\r\n\r\n\tgetRedirector()\r\n\t{\r\n\t\treturn this.redirect;\r\n\t}\r\n\r\n\t// Performing ops\r\n\r\n\troll(filter, context)\r\n\t{\r\n\t\tlet result = { value: undefined, modifiers: {} };\r\n\t\t\r\n\t\tif (this.entry !== undefined)\r\n\t\t{\r\n\t\t\tresult.value = lodash.cloneDeep(this.entry.value.value);\r\n\t\t\tresult.modifiers = lodash.cloneDeep(this.entry.value.modifiers);\r\n\t\t\tresult.entry = this.entry;\r\n\t\t}\r\n\t\telse if (this.hasValueMacro())\r\n\t\t{\r\n\t\t\tconst filterContext = { ...context, filter: (filter || this.getDefaultFilter()) };\r\n\t\t\tconst macro = createExecutor(this.valueMacro);\r\n\t\t\tif (macro === undefined) result.value = inlineEval(this.valueMacro, filterContext);\r\n\t\t\telse result.value = macro(filterContext).value;\r\n\t\t}\r\n\t\telse if (this.hasRedirector())\r\n\t\t{\r\n\t\t\tlet redirector = this.getRedirector();\r\n\r\n\t\t\tconst macro = createExecutor(`{roll:${redirector}}`);\r\n\t\t\tif (macro)\r\n\t\t\t{\r\n\t\t\t\tresult = macro({...context, filter: undefined});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconst entry = (() => {\r\n\t\t\t\tconst rollable = this.getRows();\r\n\t\t\t\tif (context.preset !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst preset = Array.isArray(context.preset) ? context.preset.shift() : context.preset;\r\n\t\t\t\t\tconst presetEntry = rollable.find((entry) => entry.getKey() === preset);\r\n\t\t\t\t\tif (presetEntry !== undefined) return presetEntry;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.error(`Could not find entry with preset key ${preset} in table ${this.getKey()}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst filtered = filter === undefined ? rollable : rollable.filter((entry) => filter.includes(entry.getKey()));\r\n\t\t\t\treturn chooseRandomWithWeight(filtered);\r\n\t\t\t})();\r\n\t\t\tif (entry === null)\r\n\t\t\t{\r\n\t\t\t\tconsole.warn('Received null generated value. Maybe there are missing keys?', this.entriesWithoutKeys, this.getKeyPath());\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tresult.value = lodash.cloneDeep(entry.value);\r\n\t\t\tresult.modifiers = lodash.cloneDeep(entry.modifiers);\r\n\t\t\tresult.entry = entry;\r\n\t\t}\r\n\r\n\t\t// Modifiers which are determined based on scales or regexs on the generated value\r\n\t\tif (this.hasGlobalModifiers())\r\n\t\t{\r\n\t\t\tfor (let globalModifierEntry of this.getGlobalModifiers())\r\n\t\t\t{\r\n\t\t\t\tlet matched = false;\r\n\t\t\t\tconst macro = createExecutor(globalModifierEntry.match);\r\n\t\t\t\tif (macro)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet matchResult = macro({ ...context, value: result.value });\r\n\t\t\t\t\tmatched = matchResult === true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmatched = result.value === globalModifierEntry.match;\r\n\t\t\t\t}\r\n\t\t\t\tif (matched)\r\n\t\t\t\t{\r\n\t\t\t\t\tresult.modifiers = appendModifiers(result.modifiers, globalModifierEntry.modifiers);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tresult.modifiers = lodash.mapValues(result.modifiers, (modifierList, targetProperty) => {\r\n\t\t\tif (!Array.isArray(modifierList)) modifierList = [modifierList];\r\n\t\t\treturn modifierList.map((modifier) => {\r\n\t\t\t\t// Preprocess each modifier to ensure that the modifiers remaining are either numbers or strings\r\n\t\t\t\tif (typeof modifier === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tswitch (modifier.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'curve':\r\n\t\t\t\t\t\t\tswitch (modifier.curve)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcase 'step':\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tconst keyframes = Object.keys(modifier.values);\r\n\t\t\t\t\t\t\t\t\t\tlet currentIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\tlet nextIndex = keyframes.length > 0 ? 0 : undefined;\r\n\t\t\t\t\t\t\t\t\t\twhile (nextIndex !== undefined\r\n\t\t\t\t\t\t\t\t\t\t\t&& parseInt(result.value, 10) > parseInt(keyframes[nextIndex], 10))\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentIndex = nextIndex;\r\n\t\t\t\t\t\t\t\t\t\t\tnextIndex++;\r\n\t\t\t\t\t\t\t\t\t\t\tif (nextIndex >= keyframes.length) nextIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn currentIndex ? modifier.values[keyframes[currentIndex]] : 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcase 'lerp':\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tconst valueInt = parseInt(result.value, 10);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst keyframes = Object.keys(modifier.values);\r\n\t\t\t\t\t\t\t\t\t\tconst getInt = (i) => parseInt(keyframes[i], 10);\r\n\t\t\t\t\t\t\t\t\t\tlet lowerIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\tlet higherIndex = keyframes.length > 0 ? 0 : undefined;\r\n\t\t\t\t\t\t\t\t\t\twhile (higherIndex !== undefined\r\n\t\t\t\t\t\t\t\t\t\t\t&& valueInt > getInt(higherIndex))\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tlowerIndex = higherIndex;\r\n\t\t\t\t\t\t\t\t\t\t\thigherIndex++;\r\n\t\t\t\t\t\t\t\t\t\t\tif (higherIndex >= keyframes.length) higherIndex = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (lowerIndex === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tlowerIndex = higherIndex;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse if (higherIndex === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\thigherIndex = lowerIndex;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst lowerInput = getInt(lowerIndex);\r\n\t\t\t\t\t\t\t\t\t\tconst higherInput = getInt(higherIndex);\r\n\t\t\t\t\t\t\t\t\t\tconst lowerMod = modifier.values[keyframes[lowerIndex]];\r\n\t\t\t\t\t\t\t\t\t\tconst higherMod = modifier.values[keyframes[higherIndex]];\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst t = (valueInt - lowerInput) / (higherInput !== lowerInput ? higherInput - lowerInput : higherInput);\r\n\t\t\t\t\t\t\t\t\t\tconst lerped = (1 - t) * lowerMod + (t * higherMod);\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (modifier.toIntOp === undefined) return lerped;\r\n\t\t\t\t\t\t\t\t\t\tconst intOp = Math[modifier.toIntOp];\r\n\t\t\t\t\t\t\t\t\t\tif (intOp === undefined)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.warn('Encountered unimplemented curve int cast operator:', modifier.toIntOp);\r\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\treturn intOp(lerped);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tdefault: break;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault: break;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn modifier;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n\r\nTable.COLUMNS = [\r\n\t{\r\n\t\taccessor: 'weight',\r\n\t\tHeader: 'Weight',\r\n\t},\r\n\t{\r\n\t\taccessor: 'key',\r\n\t\tHeader: 'Key',\r\n\t}\r\n];\r\n","import lodash from 'lodash';\r\n\r\nexport default function appendModifiers(current, toAppend) {\r\n\treturn lodash.toPairs(toAppend).reduce((accum, [key, modifier]) => {\r\n\t\t\r\n\t\tif (!accum.hasOwnProperty(key)) accum[key] = [];\r\n\t\telse if (!Array.isArray(accum[key])) accum[key] = [accum[key]];\r\n\t\t\r\n\t\tif (Array.isArray(modifier)) accum[key] = accum[key].concat(modifier);\r\n\t\telse accum[key].push(modifier);\r\n\r\n\t\treturn accum;\r\n\t}, current);\r\n};","import lodash from 'lodash';\r\nimport { Entry } from './Entry';\r\n\r\nclass Field extends Entry\r\n{\r\n\r\n\tstatic from(data)\r\n\t{\r\n\t\tconst entry = new Field();\r\n\t\tentry.readFrom(data);\r\n\t\tentry.category = data.category;\r\n\t\treturn entry;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\t\tthis.category = undefined;\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\treturn `${this.category}.${this.getKey()}`;\r\n\t}\r\n\r\n\tgetCategory()\r\n\t{\r\n\t\treturn this.category;\r\n\t}\r\n\r\n}\r\n\r\nexport default class NpcSchema\r\n{\r\n\r\n\t// takes a json object\r\n\tstatic from(obj)\r\n\t{\r\n\t\tconst schema = new NpcSchema();\r\n\r\n\t\tschema.generationOrder = obj.generationOrder;\r\n\t\t\r\n\t\tfor (let fieldData of obj.fieldOrder)\r\n\t\t{\r\n\t\t\tconst field = schema.addField(fieldData);\r\n\t\t\tschema.fieldOrder.push(field.getKeyPath());\r\n\t\t}\r\n\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.fields = {};\r\n\t\tthis.fieldOrder = [];\r\n\t\tthis.generationOrder = [];\r\n\t\tthis.categories = {};\r\n\t}\r\n\r\n\taddField(data)\r\n\t{\r\n\t\tconst field = Field.from(data);\r\n\t\tthis.fields[field.getKeyPath()] = field;\r\n\t\tthis.categories[field.getCategory()] = (this.categories[field.getCategory()] || []).concat([field.getKey()]);\r\n\t\treturn field;\r\n\t}\r\n\r\n\tgetFields()\r\n\t{\r\n\t\treturn lodash.values(this.fields);\r\n\t}\r\n\r\n\tgetField(keyPath)\r\n\t{\r\n\t\treturn this.fields[keyPath];\r\n\t}\r\n\r\n\tgetCategories()\r\n\t{\r\n\t\treturn Object.keys(this.categories).sort();\r\n\t}\r\n\r\n\tgetFieldsForCategory(category)\r\n\t{\r\n\t\treturn (this.categories[category] || []).sort();\r\n\t}\r\n\r\n\tgetFieldForCategory(category, key)\r\n\t{\r\n\t\treturn this.categories[category][key];\r\n\t}\r\n\r\n\tgetGenerationOrder()\r\n\t{\r\n\t\treturn this.generationOrder;\r\n\t}\r\n\r\n}\r\n","import lodash from 'lodash';\r\nimport Table from './Table';\r\nimport NpcSchema from './NpcSchema';\r\n\r\nfunction loadItem(directory, fileName)\r\n{\r\n\tconst data = require(`../data/tables${directory}${fileName}.json`);\r\n\tconst isIndex = Array.isArray(data);\r\n\tlet content = !isIndex ? data : data.reduce((accum, itemPath) => loadTableEntry(accum, directory, itemPath), {});\r\n\treturn { content, isIndex };\r\n}\r\n\r\nfunction loadTableEntry(accumulator, directory, itemPath)\r\n{\r\n\tconst itemPathSplit = itemPath.split('/');\r\n\tconst fileName = itemPathSplit.slice(-1).join('/');\r\n\tconst immediateDirectory = itemPathSplit.slice(0, -1).join('/');\r\n\tconst fullDirectory = `${directory}${itemPath}`.split('/').slice(0, -1).join('/') + '/';\r\n\tconst item = loadItem(fullDirectory, fileName);\r\n\tif (item.isIndex)\r\n\t{\r\n\t\tlodash.assignIn(accumulator, lodash.mapKeys(item.content, (_, key) => `${immediateDirectory}/${key}`));\r\n\t}\r\n\telse\r\n\t{\r\n\t\taccumulator[itemPath] = item.content;\r\n\t}\r\n\treturn accumulator;\r\n}\r\n\r\nconst events = new EventTarget();\r\nlet TABLE_COLLECTION_CACHE = undefined;\r\n\r\n/**\r\n * A collection of Tables which is loaded once at application start (or on demand after initial load).\r\n * This data is meant to be READONLY at runtime and does not reliably support changing or adding data.\r\n*/\r\nexport default class TableCollection\r\n{\r\n\r\n\t/** Event key for when the table collection is finished loading - either at app launch or user initiated. */\r\n\tstatic EVENT_ONCHANGED = 'onChanged';\r\n\r\n\t/** Returns the current iteration/collection of tables loaded from data. */\r\n\tstatic get()\r\n\t{\r\n\t\treturn TABLE_COLLECTION_CACHE;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new table collection object and loads collection from data.\r\n\t*/\r\n\tstatic initialize()\r\n\t{\r\n\t\tconsole.log('Initializing table collection');\r\n\t\tTABLE_COLLECTION_CACHE = new TableCollection();\r\n\t\tTABLE_COLLECTION_CACHE.loadTables();\r\n\t\tTableCollection.dispatchEvent(TableCollection.EVENT_ONCHANGED, null, TABLE_COLLECTION_CACHE);\r\n\t}\r\n\r\n\t/**\r\n\t * Wipes the table collection singleton and immediately reinitializes.\r\n\t*/\r\n\tstatic clear()\r\n\t{\r\n\t\tconst prev = TableCollection.get();\r\n\t\tTABLE_COLLECTION_CACHE = null;\r\n\t\tTableCollection.dispatchEvent(TableCollection.EVENT_ONCHANGED, prev, null);\r\n\r\n\t\t// Re-Initialize\r\n\t\tTableCollection.initialize();\r\n\t}\r\n\r\n\tstatic addEventListener(event, callback)\r\n\t{\r\n\t\tevents.addEventListener(event, callback);\r\n\t}\r\n\r\n\tstatic removeEventListener(event, callback)\r\n\t{\r\n\t\tevents.removeEventListener(event, callback);\r\n\t}\r\n\r\n\tstatic addOnChanged(callback)\r\n\t{\r\n\t\tTableCollection.addEventListener(TableCollection.EVENT_ONCHANGED, callback);\r\n\t}\r\n\r\n\tstatic removeOnChanged(callback)\r\n\t{\r\n\t\tTableCollection.removeEventListener(TableCollection.EVENT_ONCHANGED, callback);\r\n\t}\r\n\r\n\t// NOTE: `prev` is outdated\r\n\tstatic dispatchEvent(event, prev, next)\r\n\t{\r\n\t\tevents.dispatchEvent(new CustomEvent(event, {\r\n\t\t\tdetail: { prev, next }\r\n\t\t}));\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.tables = {};\r\n\t\tthis.npcSchema = undefined;\r\n\t}\r\n\r\n\tloadTables()\r\n\t{\r\n\t\tthis.tables = lodash.mapValues(loadItem('/', 'index').content, Table.from);\r\n\t\tconsole.log(this.tables);\r\n\t\tconsole.log('Missing Keys:', lodash.values(this.tables).reduce((accum, table) => {\r\n\t\t\tconst missingKeyDatum = {};\r\n\t\t\tif (table.entriesWithoutKeys.length > 0)\r\n\t\t\t{\r\n\t\t\t\tmissingKeyDatum.entries = table.entriesWithoutKeys;\r\n\t\t\t}\r\n\t\t\tfor (let entry of lodash.values(table.entries))\r\n\t\t\t{\r\n\t\t\t\tif (entry.childrenWithoutKeys.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tmissingKeyDatum[entry.getKey()] = entry.childrenWithoutKeys;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (Object.keys(missingKeyDatum).length > 0)\r\n\t\t\t{\r\n\t\t\t\taccum[table.getKey()] = missingKeyDatum;\r\n\t\t\t}\r\n\t\t\treturn accum;\r\n\t\t}, {}))\r\n\r\n\t\tthis.npcSchema = NpcSchema.from(loadItem('/', 'npc').content);\r\n\t}\r\n\r\n\tgetNpcSchema()\r\n\t{\r\n\t\treturn this.npcSchema;\r\n\t}\r\n\r\n\tgetTableKeys()\r\n\t{\r\n\t\treturn Object.keys(this.tables).sort();\r\n\t}\r\n\r\n\tgetTables()\r\n\t{\r\n\t\treturn Object.values(this.tables);\r\n\t}\r\n\r\n\tgetTable(key)\r\n\t{\r\n\t\treturn this.tables.hasOwnProperty(key) ? this.tables[key] : undefined\r\n\t}\r\n\r\n\tgetTableAtPath(keyPath)\r\n\t{\r\n\t\treturn this.getTable(Table.getTablePathFromKeyPath(keyPath));\r\n\t}\r\n\r\n\tgetTableTree()\r\n\t{\r\n\t\treturn this.getTableKeys().reduce((accum, key) => {\r\n\t\t\treturn lodash.set(accum, this.tables[key].getKeyPath() + '.table', this.tables[key]);\r\n\t\t}, {});\r\n\t}\r\n\r\n}","export function camelCaseToTitle(str)\r\n{\r\n\treturn str\r\n\t\t.split(/(?=[A-Z])/)\r\n\t\t.map(\r\n\t\t\t(word) => `${word[0].toUpperCase()}${word.substr(1).toLowerCase()}`\r\n\t\t).join(' ');\r\n}","import React, { useState } from 'react';\r\nimport storage from 'local-storage';\r\nimport lodash from 'lodash';\r\nimport { Accordion } from 'semantic-ui-react';\r\n\r\nexport function StorageAccordion({\r\n\tstorageKey,\r\n\tentryComponentType,\r\n\tentries,\r\n\tactive, // if the item the accordion is in is currently rendering (not collapsed)\r\n})\r\n{\r\n\tconst [expandedEntryKeys, setExpandedEntryKeys_state] = useState(storage.get(storageKey) || []);\r\n\tfunction setExpandedEntryKeys(keys)\r\n\t{\r\n\t\tif (keys.length > 0) storage.set(storageKey, keys);\r\n\t\telse storage.remove(storageKey);\r\n\t\tsetExpandedEntryKeys_state(keys);\r\n\t}\r\n\tfunction addExpandedEntryKey(key) { setExpandedEntryKeys(expandedEntryKeys.concat([key])); }\r\n\tfunction removeExpandedEntryKey(key) { setExpandedEntryKeys(expandedEntryKeys.filter((item) => item !== key)); }\r\n\tfunction isEntryExpanded(key) { return expandedEntryKeys.includes(key); }\r\n\r\n\tconst handleAccordionClick = (_, { index }) =>\r\n\t{\r\n\t\tif (!isEntryExpanded(index)) addExpandedEntryKey(index);\r\n\t\telse removeExpandedEntryKey(index);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Accordion style={{ margin: 0 }}>\r\n\t\t\t{lodash.toPairs(entries).map(([entryKey, entryProps]) => (\r\n\t\t\t\tReact.createElement(entryProps.storageAccordianComponent || entryComponentType, {\r\n\t\t\t\t\t...entryProps,\r\n\t\t\t\t\tkey: entryKey,\r\n\t\t\t\t\tactive: isEntryExpanded(entryKey) && (active === undefined || active === true),\r\n\t\t\t\t\tonClick: handleAccordionClick,\r\n\t\t\t\t})\r\n\t\t\t))}\r\n\t\t</Accordion>\r\n\t);\r\n}\r\n","\r\nexport const DISPLAY_MODES = {\r\n\tReadable: 'Readable',\r\n\tDetailed: 'Detailed',\r\n};\r\n\r\nexport function getDisplayIconForMode(displayMode)\r\n{\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return 'eye';\r\n\t\tcase DISPLAY_MODES.Detailed: return 'archive';\r\n\t\tdefault: return 'question';\r\n\t}\r\n}\r\n\r\nexport function getNextDisplayMode(displayMode)\r\n{\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return DISPLAY_MODES.Detailed;\r\n\t\tcase DISPLAY_MODES.Detailed: return DISPLAY_MODES.Readable;\r\n\t\tdefault: return DISPLAY_MODES.Detailed;\r\n\t}\r\n}\r\n\r\nexport function getDisplayModeSwitchLabel(displayMode)\r\n{\r\n\treturn `Switch to ${getNextDisplayMode(displayMode).toLowerCase()} mode`;\r\n}\r\n","import storage from 'local-storage';\r\n\r\nexport default class Filter\r\n{\r\n\r\n\tstatic all()\r\n\t{\r\n\t\treturn (storage.get('filters') || {});\r\n\t}\r\n\r\n\tstatic get(key)\r\n\t{\r\n\t\treturn Filter.all()[key];\r\n\t}\r\n\r\n\tstatic set(key, filter)\r\n\t{\r\n\t\tconst allFilters = Filter.all();\r\n\t\tallFilters[key] = filter;\r\n\t\tstorage.set('filters', allFilters);\r\n\t}\r\n\r\n\tstatic remove(key)\r\n\t{\r\n\t\tconst allFilters = Filter.all();\r\n\t\tdelete allFilters[key];\r\n\t\tstorage.set('filters', allFilters);\r\n\t}\r\n\r\n\tstatic clear()\r\n\t{\r\n\t\tstorage.set('filters', {});\r\n\t}\r\n\r\n}","import React, { useState } from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\nimport Filter from '../storage/Filter';\r\nimport InputRange from 'react-input-range';\r\nimport 'react-input-range/lib/css/index.css';\r\n\r\n// For ranges: https://github.com/davidchin/react-input-range\r\nexport function TableFilter({\r\n\ttableCollection, tableKey, storageKey\r\n})\r\n{\r\n\r\n\tfunction getTable()\r\n\t{\r\n\t\treturn tableCollection ? tableCollection.getTable(tableKey) : undefined;\r\n\t}\r\n\r\n\tconst [value, setValue] = useState(Filter.get(storageKey) || undefined);\r\n\r\n\tconst table = getTable();\r\n\tif (!table) return <div />;\r\n\r\n\tfunction isValueAValidFilter(value)\r\n\t{\r\n\t\tswitch (table.getFilterType())\r\n\t\t{\r\n\t\t\tcase 'minMaxRange':\r\n\t\t\t\treturn typeof value === 'object' && value.min && value.max;\r\n\t\t\tdefault:\r\n\t\t\t\treturn Array.isArray(value) && value.length > 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onDropdownChanged(value)\r\n\t{\r\n\t\tif (isValueAValidFilter(value))\r\n\t\t{\r\n\t\t\tFilter.set(storageKey, value);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tFilter.remove(storageKey);\r\n\t\t}\r\n\t\tsetValue(value);\r\n\t}\r\n\r\n\tswitch (table.getFilterType())\r\n\t{\r\n\t\tcase 'minMaxRange':\r\n\t\t\tconst defaultFilter = table.getDefaultFilter();\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{marginTop: '15px', marginBottom: '15px'}}>\r\n\t\t\t\t\t<InputRange\r\n\t\t\t\t\t\tminValue={defaultFilter.min}\r\n\t\t\t\t\t\tmaxValue={defaultFilter.max}\r\n\t\t\t\t\t\tvalue={value || defaultFilter}\r\n\t\t\t\t\t\tonChange={onDropdownChanged}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn (\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tfluid search selection multiple\r\n\t\t\t\t\tplaceholder={'No filter'}\r\n\t\t\t\t\toptions={table ? table.getDefaultFilter() : []}\r\n\t\t\t\t\tvalue={value || []}\r\n\t\t\t\t\tonChange={(_, { value }) => onDropdownChanged(value)}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t}\r\n}\r\n","import Filter from './Filter';\r\nimport lodash from 'lodash';\r\nimport { createExecutor } from '../generator/modules/createExecutor';\r\nimport { inlineEval, PURE_VARIABLE_REGEX } from '../generator/modules/evalAtCtx';\r\nimport NpcData from './NpcData';\r\n\r\nfunction objectEqualityDeepRecursive(a, b) {\r\n\tfor(const key in a) {\r\n\t\t\tif(!(key in b) || !objectEqualityDeepRecursive(a[key], b[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t}\r\n\tfor(var key in b) {\r\n\t\t\tif(!(key in a) || !objectEqualityDeepRecursive(a[key], b[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nclass EntryLinker\r\n{\r\n\r\n\tconstructor(owner, property, onEvent)\r\n\t{\r\n\t\tthis.owner = owner;\r\n\t\tthis.property = property;\r\n\t\t// entry keys that our owner has subscribed to\r\n\t\tthis.subscribingTo = [];\r\n\t\t// entry keys that have subscribed to our owner\r\n\t\tthis.subscribed = [];\r\n\t\tthis.onEvent = onEvent;\r\n\t}\r\n\r\n\tgetEntryForPath(entryPath)\r\n\t{\r\n\t\treturn this.owner.npc.getEntry(entryPath);\r\n\t}\r\n\r\n\tsubscribe(entryPaths)\r\n\t{\r\n\t\tthis.subscribingTo = lodash.uniq(entryPaths);\r\n\t\tentryPaths.forEach((path) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(path);\r\n\t\t\tif (entry) entry[this.property].add(this.owner);\r\n\t\t});\r\n\t}\r\n\r\n\tunsubscribe(entryPaths)\r\n\t{\r\n\t\tthis.subscribingTo = this.subscribingTo.filter((key) => !entryPaths.includes(key));\r\n\t\tentryPaths.forEach((path) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(path);\r\n\t\t\tif (entry) entry[this.property].remove(this.owner);\r\n\t\t});\r\n\t}\r\n\r\n\tadd(entry)\r\n\t{\r\n\t\tthis.subscribed.push(entry.getKeyPath());\r\n\t\tthis.subscribed = lodash.uniq(this.subscribed);\r\n\t}\r\n\r\n\tremove(entry)\r\n\t{\r\n\t\tconst entryKey = entry.getKeyPath();\r\n\t\tthis.subscribed = this.subscribed.filter((key) => key !== entryKey);\r\n\t}\r\n\r\n\tgetSubscribedKeys()\r\n\t{\r\n\t\treturn this.subscribed;\r\n\t}\r\n\r\n\tdispatchToSubscriptions(evt, args, appendArgsForEntry=(a)=>a)\r\n\t{\r\n\t\tthis.subscribingTo.forEach((entryPath) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(entryPath);\r\n\t\t\tconst linker = entry ? entry[this.property] : undefined;\r\n\t\t\tconst onEvt = linker ? linker.onEvent : undefined;\r\n\t\t\tif (onEvt) onEvt(evt, appendArgsForEntry(args, entryPath));\r\n\t\t});\r\n\t}\r\n\r\n\tdispatchToSubscribers(evt, args)\r\n\t{\r\n\t\tthis.subscribed.forEach((entryPath) =>\r\n\t\t{\r\n\t\t\tconst entry = this.getEntryForPath(entryPath);\r\n\t\t\tconst linker = entry ? entry[this.property] : undefined;\r\n\t\t\tconst onEvt = linker ? linker.onEvent : undefined;\r\n\t\t\tif (onEvt) onEvt(evt, args);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default class GeneratedEntry\r\n{\r\n\r\n\tconstructor(npcData)\r\n\t{\r\n\t\tthis.npc = npcData;\r\n\r\n\t\tthis.events = new EventTarget();\r\n\t\tthis.schemaEntry = undefined;\r\n\r\n\t\tthis.stringifyLinker = new EntryLinker(this, 'stringifyLinker', this.onStringifyLinkerEvent.bind(this));\r\n\t\tthis.stringifyCached = undefined;\r\n\r\n\t\tthis.generationDependencyLinker = new EntryLinker(this, 'generationDependencyLinker', this.onGenerationDependencyEvent.bind(this));\r\n\t\tthis.modifyingLinker = new EntryLinker(this, 'modifyingLinker', this.onModifiersChanged.bind(this));\r\n\t\tthis.collectionLinker = new EntryLinker(this, 'collectionLinker', this.onCollectionEntriesChanged.bind(this));\r\n\t\t\r\n\t\tthis.modifierSources = {};\r\n\t\tthis.totalModifyingValue = 0;\r\n\t\tthis.forcedFilter = {};\r\n\t\tthis.postOperationModifiers = {};\r\n\r\n\t\tthis.category = undefined;\r\n\t\tthis.key = undefined;\r\n\r\n\t\tthis.generated = undefined;\r\n\t\tthis.generatedChildren = undefined;\r\n\t}\r\n\r\n\treadEntry(entry)\r\n\t{\r\n\t\tthis.schemaEntry = entry;\r\n\t\tthis.key = entry.getKey();\r\n\t}\r\n\r\n\tgetKeyPath()\r\n\t{\r\n\t\tif (this.key === undefined) return undefined;\r\n\t\telse if (this.category !== undefined) return `${this.category}.${this.key}`;\r\n\t\telse if (this.parent !== undefined) return `${this.parent.getKeyPath()}.${this.key}`;\r\n\t\telse return this.key;\r\n\t}\r\n\r\n\tgetName()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tif (field.name !== undefined) return field.name;\r\n\t\tconst path = lodash.toPath(this.getKeyPath());\r\n\t\treturn path[path.length - 1]\r\n\t\t\t.split(/(?=[A-Z])/)\r\n\t\t\t.map(\r\n\t\t\t\t(word) => `${word[0].toUpperCase()}${word.substr(1).toLowerCase()}`\r\n\t\t\t).join(' ');\r\n\t}\r\n\r\n\tgetField()\r\n\t{\r\n\t\treturn this.schemaEntry;\r\n\t}\r\n\r\n\tgetGenerationMacro()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tif (!field.hasSource()) return undefined;\r\n\t\tconst macro = createExecutor(field.getSource());\r\n\t\tif (macro === undefined)\r\n\t\t{\r\n\t\t\tconsole.warn('Failed to find a valid exec source functor for field:', field);\r\n\t\t}\r\n\t\treturn macro;\r\n\t}\r\n\r\n\thasFilter(tableCollection)\r\n\t{\r\n\t\tconst sourceTableKey = this.getField().getSourceTableKey(tableCollection);\r\n\t\tconst table = sourceTableKey !== undefined ? tableCollection.getTable(sourceTableKey) : undefined;\r\n\t\treturn table ? table.hasFilter() : false;\r\n\t}\r\n\r\n\tgetFilterValue()\r\n\t{\r\n\t\tconst forcedFilter = Object.values(this.forcedFilter);\r\n\t\treturn forcedFilter.length > 0 ? forcedFilter : Filter.get(this.getKeyPath());\r\n\t}\r\n\r\n\tgetCanReroll()\r\n\t{\r\n\t\treturn this.schemaEntry.getCanReroll() && (!this.parent || this.parent.getCanReroll());\r\n\t}\r\n\r\n\tregenerate(globalData, getPreset)\r\n\t{\r\n\t\tthis.clearSaveState();\r\n\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t\tthis.modifyingLinker.unsubscribe(this.getModifyingEntryKeys());\r\n\t\tthis.generationDependencyLinker.unsubscribe(this.getGenerationDependencies());\r\n\t\tthis.stringifyLinker.unsubscribe(this.getStringifyDependencies());\r\n\t\t\r\n\t\tthis.collectionLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t});\r\n\t\tthis.collectionLinker.unsubscribe(this.getOurCollections());\r\n\r\n\t\tconst presetData = typeof getPreset === 'function' ? getPreset(this) : undefined;\r\n\r\n\t\t// TODO: filter out the current value so that we never \"regenerate\" into the same value.\r\n\t\t// unless of course its the only value possible, in which case, prevent generation entirely.\r\n\r\n\t\tconst context = {\r\n\t\t\t...globalData,\r\n\t\t\tfilter: this.getFilterValue(),\r\n\t\t\tpreset: presetData,\r\n\t\t};\r\n\t\tthis.generated = null;\r\n\r\n\t\tif (this.schemaEntry.value)\r\n\t\t{\r\n\t\t\tthis.generated = {\r\n\t\t\t\tvalue: presetData !== undefined ? presetData : this.schemaEntry.value\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet redirectPath = [];\r\n\t\t\tdo\r\n\t\t\t{\r\n\t\t\t\tlet macro = undefined;\r\n\t\t\t\t// grab the redirector from the previous generated entry\r\n\t\t\t\tlet redirector = this.generated && this.generated.entry && this.generated.entry.hasRedirector() ? this.generated.entry.getRedirector() : undefined;\r\n\t\t\t\tif (redirector !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\tmacro = createExecutor(`{roll:${redirector}}`);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmacro = this.getGenerationMacro();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (macro === undefined) break;\r\n\t\t\t\t\r\n\t\t\t\tthis.generated = macro(redirector === undefined ? context : {...context, filter: undefined});\r\n\t\t\t\tif (this.generated && this.generated.entry && this.generated.entry.hasRedirector())\r\n\t\t\t\t{\r\n\t\t\t\t\tredirectPath.push(this.generated.entry.getKey());\r\n\t\t\t\t}\r\n\t\t\t} while (this.generated && this.generated.entry && this.generated.entry.hasRedirector());\r\n\t\t\tif (this.generated && redirectPath.length > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.generated.redirectPath = redirectPath;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.generatedChildren = this.generated && this.generated.entry && this.generated.entry.hasChildren()\r\n\t\t\t? lodash.mapValues(this.generated.entry.getChildren(), (child) =>\r\n\t\t\t{\r\n\t\t\t\tconst clone = new GeneratedEntry(this.npc);\r\n\t\t\t\tclone.readEntry(child);\r\n\t\t\t\tclone.parent = this;\r\n\t\t\t\treturn clone;\r\n\t\t\t}) : undefined;\r\n\t\tif (this.generatedChildren === undefined && this.schemaEntry && this.schemaEntry.hasChildren())\r\n\t\t{\r\n\t\t\tthis.generatedChildren = lodash.mapValues(this.schemaEntry.getChildren(), (child) =>\r\n\t\t\t{\r\n\t\t\t\tconst clone = new GeneratedEntry(this.npc);\r\n\t\t\t\tclone.readEntry(child);\r\n\t\t\t\tclone.parent = this;\r\n\t\t\t\treturn clone;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// TODO: Check to see if the entry actually changed at all (key may have changed of the underlying generated entry),\r\n\t\t// otherwise if the value hasn't changed, all of these updates are being processed for no reason.\r\n\r\n\t\tthis.updateString(globalData);\r\n\t\tthis.stringifyLinker.subscribe(this.getStringifyDependencies());\r\n\r\n\t\t// temporarily modify globalData until it can be accounted for later\r\n\t\t// we should probably just mark the data as dirty here instead of passing it through functions\r\n\t\tthis.getModifiedData(globalData);\r\n\t\tthis.writeSaveState();\r\n\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChanged', { detail: {} }));\r\n\r\n\t\tthis.collectionLinker.subscribe(this.getOurCollections());\r\n\t\tthis.collectionLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t});\r\n\r\n\t\tthis.stringifyLinker.dispatchToSubscribers('onChanged', { globalData });\r\n\r\n\t\tthis.generationDependencyLinker.subscribe(this.getGenerationDependencies());\r\n\t\tthis.generationDependencyLinker.dispatchToSubscribers('onChanged', { key: this.getKeyPath(), globalData });\r\n\r\n\t\tthis.modifyingLinker.subscribe(this.getModifyingEntryKeys());\r\n\r\n\t\tif (this.generatedChildren)\r\n\t\t{\r\n\t\t\tlodash.values(this.generatedChildren).forEach((child) => child.regenerate(globalData, getPreset));\r\n\t\t}\r\n\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\r\n\t\tif (this.parent) this.parent.onChildGenerated(this);\r\n\t}\r\n\r\n\tonChildGenerated(child)\r\n\t{\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('remove', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onChanged', { detail: {} }));\r\n\t\tthis.modifyingLinker.dispatchToSubscriptions('add', {\r\n\t\t\tsource: this.getKeyPath()\r\n\t\t}, (args, keyPath) => ({...args, value: this.getModifierFor(keyPath)}));\r\n\t}\r\n\r\n\tgetGeneratedEntry()\r\n\t{\r\n\t\treturn this.generated ? this.generated.entry : undefined;\r\n\t}\r\n\r\n\tgetModifiedData(values)\r\n\t{\r\n\t\tconst localValue = this.getModifiedValue();\r\n\t\tlodash.set(values, this.getKeyPath(), lodash.assignIn(\r\n\t\t\ttypeof localValue === 'object' ? localValue : {},\r\n\t\t\t{\r\n\t\t\t\ttoString: () => typeof localValue === 'object' ? undefined : `${localValue}`,\r\n\t\t\t\tasString: this.toString(),\r\n\t\t\t}\r\n\t\t));\r\n\t\tif (this.hasChildren())\r\n\t\t{\r\n\t\t\tlodash.values(this.getChildren()).forEach(\r\n\t\t\t\t(child) => child.getModifiedData(values)\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tgetChildModifiedData(values)\r\n\t{\r\n\t\tconst tmpValues = {};\r\n\t\tlodash.values(this.getChildren()).forEach(\r\n\t\t\t(child) => child.getModifiedData(tmpValues)\r\n\t\t);\r\n\t\tlodash.assign(values, lodash.get(tmpValues, this.getKeyPath()));\r\n\t}\r\n\r\n\taddListenerOnChanged(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onChanged', callback);\r\n\t}\r\n\r\n\tremoveListenerOnChanged(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onChanged', callback);\r\n\t}\r\n\r\n\t/**\r\n\t * If, when generated, the entry resulted in a tangible value (not just children and a stringify).\r\n\t**/\r\n\thasValue()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\treturn generated.value !== undefined;\r\n\t}\r\n\r\n\tgetRawValue()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\tconst generatedObjValue = generated.value !== undefined && generated.value.value !== undefined ? generated.value.value : generated.value;\r\n\t\tif (generatedObjValue !== undefined) return generatedObjValue;\r\n\t\treturn generated.entry !== undefined ? generated.entry.getKey() : undefined;\r\n\t}\r\n\r\n\tgetModifyingEntryData_internal()\r\n\t{\r\n\t\treturn (this.generated ? this.generated.modifiers : undefined) || {};\r\n\t}\r\n\r\n\tgetModifyingEntryData()\r\n\t{\r\n\t\treturn lodash.mapValues(this.getModifyingEntryData_internal(), (value, key) => this.getModifierFor(key));\r\n\t}\r\n\r\n\tgetModifierFor(keyPath)\r\n\t{\r\n\t\tconst getModifierInternal = (rawModifier) => {\r\n\t\t\tif (typeof rawModifier === 'object')\r\n\t\t\t{\r\n\t\t\t\tswitch (rawModifier.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'multiply':\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconst localData = {};\r\n\t\t\t\t\t\tthis.getChildModifiedData(localData);\r\n\t\t\t\t\t\tconst multiplier = inlineEval(rawModifier.value, localData);\r\n\t\t\t\t\t\tif (multiplier === undefined) return rawModifier;\r\n\t\t\t\t\t\tconst m = parseInt(multiplier, 10);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: rawModifier.type,\r\n\t\t\t\t\t\t\tmultiply: m,\r\n\t\t\t\t\t\t\ttoString: () => `*${m}`,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'multiplyAdd':\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconst localData = {};\r\n\t\t\t\t\t\tthis.getChildModifiedData(localData);\r\n\t\t\t\t\t\tconst multiplier = inlineEval(rawModifier.multiply, localData);\r\n\t\t\t\t\t\tconst adder = inlineEval(rawModifier.add, localData);\r\n\t\t\t\t\t\tif (multiplier === undefined || adder === undefined) return rawModifier;\r\n\t\t\t\t\t\tconst m = parseInt(multiplier, 10);\r\n\t\t\t\t\t\tconst a = parseInt(adder, 10);\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: rawModifier.type,\r\n\t\t\t\t\t\t\tmultiply: m,\r\n\t\t\t\t\t\t\tadd: a,\r\n\t\t\t\t\t\t\ttoString: () => `*${m}+${a}`,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn rawModifier;\r\n\t\t};\r\n\r\n\t\tconst rawModifier = this.getModifyingEntryData_internal()[keyPath];\r\n\t\tif (Array.isArray(rawModifier)) return rawModifier.map(getModifierInternal);\r\n\t\telse return getModifierInternal(rawModifier);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the key paths of entries this item is currently modifying.\r\n\t**/\r\n\tgetModifyingEntryKeys()\r\n\t{\r\n\t\treturn Object.keys(this.getModifyingEntryData());\r\n\t}\r\n\r\n\t/**\r\n\t * Get the key paths of entries this item is currently being modified by.\r\n\t**/\r\n\tgetModifiedByEntryKeys()\r\n\t{\r\n\t\treturn {\r\n\t\t\t...this.modifierSources,\r\n\t\t\t...this.postOperationModifiers,\r\n\t\t\t...this.forcedFilter,\r\n\t\t}\r\n\t}\r\n\r\n\taddListenerOnModified(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onModified', callback);\r\n\t}\r\n\r\n\tremoveListenerOnModified(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onModified', callback);\r\n\t}\r\n\r\n\t/**\r\n\t * Called when some entry adds or removes their modifiers from the total list of things this item is modified by.\r\n\t**/\r\n\tonModifiersChanged(evt, args)\r\n\t{\r\n\t\tconst forcedFilter = lodash.cloneDeep(this.forcedFilter);\r\n\t\tif (Array.isArray(args.value)) args.value.forEach((v) => this.applyModifier(evt, args.source, v));\r\n\t\telse this.applyModifier(evt, args.source, args.value);\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onModified', { detail: {} }));\r\n\r\n\t\tconst globalData = this.npc.getModifiedData();\r\n\t\t// TODO: This check is very inefficient, but it works...\r\n\t\tif (!objectEqualityDeepRecursive(forcedFilter, this.forcedFilter))\r\n\t\t{\r\n\t\t\tthis.regenerate(globalData);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.updateString(globalData);\r\n\t\t}\r\n\t}\r\n\r\n\tapplyModifier(evt, source, value)\r\n\t{\r\n\t\tswitch (evt)\r\n\t\t{\r\n\t\t\tcase 'add':\r\n\t\t\t\t// These are forced value filters, where the value argument is the key of the desired value\r\n\t\t\t\tif (typeof value === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.forcedFilter[source] = value;\r\n\t\t\t\t}\r\n\t\t\t\t// A macro of sorts that is executed on compilation\r\n\t\t\t\telse if (typeof value === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.postOperationModifiers[source] = value;\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof value !== 'number') throw new Error(`Cannot use a modifier that is not a number: ${value}`);\r\n\t\t\t\telse if (value !== 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.modifierSources[source] = value;\r\n\t\t\t\t\tthis.totalModifyingValue += value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'remove':\r\n\t\t\t\t// These are forced value filters, where the value argument is the key of the desired value\r\n\t\t\t\tif (typeof value === 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.forcedFilter[source];\r\n\t\t\t\t}\r\n\t\t\t\t// A macro of sorts that is executed on compilation\r\n\t\t\t\telse if (typeof value === 'object')\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.postOperationModifiers[source];\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof value !== 'number') throw new Error(`Cannot use a modifier that is not a number: ${value}`);\r\n\t\t\t\telse if (value !== 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tdelete this.modifierSources[source];\r\n\t\t\t\t\tthis.totalModifyingValue -= value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unknown modifiers changed event ${evt}, ${source}: ${value}`);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tgetModifiedValue()\r\n\t{\r\n\t\tlet value = this.getRawValue();\r\n\t\tif (typeof value === 'number')\r\n\t\t{\r\n\t\t\tconst postOperations = Object.values(this.postOperationModifiers);\r\n\t\t\tif (postOperations.length > 0)\r\n\t\t\t{\r\n\t\t\t\tvalue = postOperations.reduce((retVal, modifier) => {\r\n\t\t\t\t\tswitch (modifier.type)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase 'multiplyAdd':\r\n\t\t\t\t\t\t\treturn retVal * modifier.multiply + modifier.add;\r\n\t\t\t\t\t\tcase 'multiply':\r\n\t\t\t\t\t\t\treturn retVal;// * modifier.multiply;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthrow new Error('Cannot process modifier object', value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, value);\r\n\t\t\t}\r\n\t\t\tvalue += this.totalModifyingValue;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tgetStringifyTemplate()\r\n\t{\r\n\t\tconst genEntry = this.getGeneratedEntry();\r\n\t\treturn (genEntry ? genEntry.getStringifyTemplate() : undefined) || (this.schemaEntry.stringify);\r\n\t}\r\n\r\n\tgetStringifyDependencies()\r\n\t{\r\n\t\tconst template = this.getStringifyTemplate();\r\n\t\tif (!template) return [];\r\n\t\tconst allMatches = Array.from(template.matchAll(PURE_VARIABLE_REGEX));\r\n\t\tconst allNonlineageReplacements = allMatches.map((match) => match[1]).filter((key) => this.getChild(key) === undefined);\r\n\t\treturn allNonlineageReplacements;\r\n\t}\r\n\r\n\tupdateString(globalData)\r\n\t{\r\n\t\tconst localizedGlobalData = lodash.cloneDeep(globalData);\r\n\t\tthis.getChildModifiedData(localizedGlobalData);\r\n\r\n\t\tconst stringify = this.getStringifyTemplate();\r\n\t\tthis.stringifyCached = stringify ? inlineEval(stringify, localizedGlobalData) : `${this.getModifiedValue()}`;\r\n\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onUpdateString', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstring: this.stringifyCached\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tif (this.parent) this.parent.updateString(globalData);\r\n\t}\r\n\r\n\taddListenerOnUpdateString(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onUpdateString', callback);\r\n\t}\r\n\r\n\tremoveListenerOnUpdateString(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onUpdateString', callback);\r\n\t}\r\n\r\n\tisValueEquivalentToNone()\r\n\t{\r\n\t\treturn this.toString() === 'none';\r\n\t}\r\n\r\n\ttoString()\r\n\t{\r\n\t\treturn this.stringifyCached;\r\n\t}\r\n\r\n\tonStringifyLinkerEvent(evt, { globalData })\r\n\t{\r\n\t\tconsole.assert(evt === 'onChanged');\r\n\t\tthis.updateString(globalData);\r\n\t}\r\n\r\n\tgetGenerationDependencies()\r\n\t{\r\n\t\tconst field = this.getField();\r\n\t\tconst source = field.hasSource() ? field.getSource() : undefined;\r\n\t\tif (!source) return [];\r\n\t\tconst deps = [];\r\n\t\tfor (let match of source.matchAll(PURE_VARIABLE_REGEX))\r\n\t\t\tdeps.push(match[1]);\r\n\t\treturn deps;\r\n\t}\r\n\r\n\taddListenerOnUpdateCollection(callback)\r\n\t{\r\n\t\tthis.events.addEventListener('onUpdateCollection', callback);\r\n\t}\r\n\r\n\tremoveListenerOnUpdateCollection(callback)\r\n\t{\r\n\t\tthis.events.removeEventListener('onUpdateCollection', callback);\r\n\t}\r\n\r\n\tonGenerationDependencyEvent(evt, { key, globalData })\r\n\t{\r\n\t\tconsole.assert(evt === 'onChanged');\r\n\t\tthis.regenerate(globalData);\r\n\t}\r\n\r\n\tgetOurCollections()\r\n\t{\r\n\t\treturn this.schemaEntry.collection !== undefined ? [this.schemaEntry.collection] : [];\r\n\t}\r\n\r\n\tgetCollectionEntryKeys()\r\n\t{\r\n\t\treturn this.collectionLinker.getSubscribedKeys();\r\n\t}\r\n\r\n\tonCollectionEntriesChanged(evt, {source})\r\n\t{\r\n\t\tthis.events.dispatchEvent(new CustomEvent('onUpdateCollection', {\r\n\t\t\tdetail: {\r\n\t\t\t\tentryKeys: this.getCollectionEntryKeys()\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\r\n\thasChildren()\r\n\t{\r\n\t\treturn this.generatedChildren && Object.keys(this.generatedChildren).length > 0;\r\n\t}\r\n\r\n\tgetChildren()\r\n\t{\r\n\t\treturn this.hasChildren() ? this.generatedChildren : {};\r\n\t}\r\n\r\n\tgetChild(subpath)\r\n\t{\r\n\t\tconst { items, remaining } = NpcData.sever(subpath);\r\n\t\tconst children = this.getChildren();\r\n\t\tif (children.hasOwnProperty(items[0]))\r\n\t\t{\r\n\t\t\tconst child = children[items[0]];\r\n\t\t\treturn remaining.length > 0 ? child.getChild(remaining) : child;\r\n\t\t}\r\n\t\telse if (lodash.has(this.getRawValue(), subpath)) return this;\r\n\t\telse\r\n\t\t{\r\n\t\t\t//console.warn(`Could not find entry with subpath ${subpath} under entry ${this.getKeyPath()}`);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tgetSaveState()\r\n\t{\r\n\t\tconst generated = this.generated || {};\r\n\t\tif (generated.entry) return generated.entry.getKey();\r\n\t\telse if (typeof generated.value !== 'object') return generated.value;\r\n\t\telse return undefined;\r\n\t}\r\n\r\n\tclearSaveState()\r\n\t{\r\n\t\tthis.npc.updateSaveState(this.getKeyPath(), undefined);\r\n\t\tObject.values(this.getChildren()).forEach((child) => child.clearSaveState());\r\n\t}\r\n\r\n\twriteSaveState()\r\n\t{\r\n\t\tlet saveState = this.getSaveState();\r\n\t\tif (this.generated && Array.isArray(this.generated.redirectPath)) saveState = this.generated.redirectPath.concat([saveState]);\r\n\t\tthis.npc.updateSaveState(this.getKeyPath(), saveState);\r\n\t}\r\n\r\n}","import lodash from 'lodash';\r\nimport TableCollection from './TableCollection';\r\nimport GeneratedEntry from './GeneratedEntry';\r\nimport storage from 'local-storage';\r\n\r\nlet NPC_TEMPORARY_DATA = null;\r\n\r\nexport default class NpcData\r\n{\r\n\r\n\tstatic EVENTS = new EventTarget();\r\n\tstatic EVENT_INITIALIZED = 'onInitialized';\r\n\r\n\tstatic sever(fullKey, itemCount = 1)\r\n\t{\r\n\t\tconst path = lodash.toPath(fullKey);\r\n\t\treturn {\r\n\t\t\titems: path.slice(0, itemCount),\r\n\t\t\tremaining: path.slice(itemCount).join('.'),\r\n\t\t};\r\n\t}\r\n\r\n\tstatic toggleOnInitialized(status, callback)\r\n\t{\r\n\t\tswitch (status)\r\n\t\t{\r\n\t\t\tcase 'on':\r\n\t\t\t\tNpcData.EVENTS.addEventListener(NpcData.EVENT_INITIALIZED, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'off':\r\n\t\t\t\tNpcData.EVENTS.removeEventListener(NpcData.EVENT_INITIALIZED, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getSchema()\r\n\t{\r\n\t\tconst tableCollection = TableCollection.get();\r\n\t\treturn tableCollection ? tableCollection.getNpcSchema() : undefined;\r\n\t}\r\n\r\n\tstatic initialize(presetData)\r\n\t{\r\n\t\tconst schema = NpcData.getSchema();\r\n\t\tif (!schema) { return; }\r\n\t\t\r\n\t\tconsole.log('Initializing NPC data');\r\n\t\tconst data = new NpcData();\r\n\r\n\t\tconst fields = schema.getFields();\r\n\t\tfor (let field of fields)\r\n\t\t{\r\n\t\t\tdata.addEntry(field);\r\n\t\t}\r\n\r\n\t\tNPC_TEMPORARY_DATA = data;\r\n\r\n\t\tNpcData.EVENTS.dispatchEvent(new CustomEvent(this.EVENT_INITIALIZED, {\r\n\t\t\tdetail: { npc: NPC_TEMPORARY_DATA }\r\n\t\t}));\r\n\r\n\t\tNPC_TEMPORARY_DATA.regenerateAll(presetData);\r\n\t}\r\n\r\n\tstatic get()\r\n\t{\r\n\t\treturn NPC_TEMPORARY_DATA;\r\n\t}\r\n\r\n\tstatic clear()\r\n\t{\r\n\t\tNpcData.initialize();\r\n\t}\r\n\r\n\tstatic getState()\r\n\t{\r\n\t\treturn storage.get('npc');\r\n\t}\r\n\r\n\tstatic getLink()\r\n\t{\r\n\t\tconst stateString = JSON.stringify(NpcData.getState());\r\n\t\tconst encoded = encodeURIComponent(stateString);\r\n\t\treturn `${process.env.PUBLIC_URL}/npc?npc=${encoded}`;\r\n\t}\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.events = new EventTarget();\r\n\r\n\t\tthis.entries = {};\r\n\t\tthis.categories = {};\r\n\r\n\t\tthis.saveState = {};\r\n\t}\r\n\r\n\ttoggleListener(event, status, callback)\r\n\t{\r\n\t\tswitch (status)\r\n\t\t{\r\n\t\t\tcase 'on':\r\n\t\t\t\tthis.events.addEventListener(event, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'off':\r\n\t\t\t\tthis.events.removeEventListener(event, callback);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\taddEntry(field)\r\n\t{\r\n\t\tconst entry = new GeneratedEntry(this);\r\n\t\tentry.readEntry(field);\r\n\t\tentry.category = field.getCategory();\r\n\t\tthis.entries[entry.getKeyPath()] = entry;\r\n\t\tthis.categories[field.category] = (this.categories[field.getCategory()] || []).concat([field.getKey()]);\r\n\t}\r\n\r\n\tgetEntry(keyPath)\r\n\t{\r\n\t\tconst { items, remaining } = NpcData.sever(keyPath, 2);\r\n\t\tconst entry = this.entries[`${items[0]}.${items[1]}`];\r\n\t\treturn remaining.length > 0 && entry !== undefined ? entry.getChild(remaining) : entry;\r\n\t}\r\n\r\n\tgetCategories()\r\n\t{\r\n\t\treturn Object.keys(this.categories).sort();\r\n\t}\r\n\r\n\tgetEntriesForCategory(category)\r\n\t{\r\n\t\treturn (this.categories[category] || []).sort();\r\n\t}\r\n\r\n\tregenerateAll(presetData)\r\n\t{\r\n\t\tconst schema = NpcData.getSchema();\r\n\t\tconst globalData = {};\r\n\t\tfor (let entryKey of schema.getGenerationOrder())\r\n\t\t{\r\n\t\t\tconst entry = this.entries[entryKey];\r\n\t\t\tconst getPreset = (e) => presetData !== undefined ? lodash.cloneDeep(presetData[e.getKeyPath()]) : undefined;\r\n\t\t\tentry.regenerate(globalData, getPreset);\r\n\t\t\tentry.getModifiedData(globalData);\r\n\t\t}\r\n\t\tthis.save();\r\n\t}\r\n\r\n\tforAllEntries(loop)\r\n\t{\r\n\t\tlodash.values(this.entries).forEach(loop);\r\n\t}\r\n\r\n\tgetModifiedData()\r\n\t{\r\n\t\tconst values = {}\r\n\t\tthis.forAllEntries((entry) => entry.getModifiedData(values));\r\n\t\treturn values;\r\n\t}\r\n\r\n\tupdateSaveState(key, state)\r\n\t{\r\n\t\tif (state === undefined) { delete this.saveState[key]; }\r\n\t\telse this.saveState[key] = state;\r\n\t}\r\n\r\n\tsave()\r\n\t{\r\n\t\tstorage.set('npc', this.saveState);\r\n\t}\r\n\r\n}"," /*eslint no-unused-vars: [0, {\"args\": \"after-used\", \"argsIgnorePattern\": \"^_\"}]*/\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { Accordion, Icon, Button, Menu, Form, Popup, Header } from 'semantic-ui-react';\r\nimport { TableFilter } from '../TableFilter';\r\nimport { StorageAccordion } from '../StorageAccordion';\r\nimport { camelCaseToTitle } from '../../lib/str';\r\nimport NpcData from '../../storage/NpcData';\r\nimport * as shortid from 'shortid';\r\nimport { inlineEval } from '../../generator/modules/evalAtCtx';\r\nimport lodash from 'lodash';\r\n\r\n/*\r\nfunction DataViewEntryCategory({\r\n\ttitleKey, description, children,\r\n\tactive, onClick\r\n})\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Accordion.Title\r\n\t\t\t\tindex={titleKey}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t>\r\n\t\t\t\t{camelCaseToTitle(titleKey)} <Icon name='dropdown' />\r\n\t\t\t</Accordion.Title>\r\n\t\t\t<Accordion.Content active={active}>\r\n\t\t\t\t{description}\r\n\t\t\t\t{children}\r\n\t\t\t</Accordion.Content>\r\n\t\t</div>\r\n\t);\r\n}\r\n//*/\r\n\r\nfunction makeModifierPopup(title, popupTitle, itemMap)\r\n{\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\ttrigger={<label>{title} ({Object.keys(itemMap).length})</label>}\r\n\t\t\tcontent={(\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Header as='h5'>{popupTitle}</Header>\r\n\t\t\t\t\t{Object.keys(itemMap).map((key) => (\r\n\t\t\t\t\t\t<div key={key}>\r\n\t\t\t\t\t\t\t{key}: {JSON.stringify(itemMap[key])}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction EntryView({\r\n\ttableCollection, npcSchema, npc,\r\n\tpropertyKey, storageKey,\r\n\tentry, parentEntry,\r\n\tactive, onClick, // from StorageAccordion\r\n})\r\n{\r\n\t// TODO: this is ineffecient, but it cant be passed in b/c passing through react copies objects, does not pass by ref.\r\n\t// maybe add functionality to cache data until it is marked as dirty.\r\n\tconst npcModifiedData = npc.getModifiedData();\r\n\tconst sourceTableKey = parentEntry.getSourceTableKey(tableCollection);\r\n\tconst isMissingSourceTable = parentEntry.isMissingSourceTable(tableCollection, (k) => inlineEval(k, npcModifiedData));\r\n\r\n\tconst refresh = React.useState(undefined)[1];\r\n\tuseEffect(() => {\r\n\t\tfunction onChanged({ details }) { refresh(shortid.generate()); }\r\n\t\tentry.addListenerOnChanged(onChanged);\r\n\t\tentry.addListenerOnUpdateString(onChanged);\r\n\t\tentry.addListenerOnModified(onChanged);\r\n\t\tentry.addListenerOnUpdateCollection(onChanged);\r\n\t\treturn () => {\r\n\t\t\tentry.removeListenerOnChanged(onChanged)\r\n\t\t\tentry.removeListenerOnUpdateString(onChanged);\r\n\t\t\tentry.removeListenerOnModified(onChanged);\r\n\t\t\tentry.removeListenerOnUpdateCollection(onChanged);\r\n\t\t};\r\n\t});\r\n\r\n\tconst rawValue = entry.getRawValue();\r\n\tconst modifiedValue = entry.getModifiedValue();\r\n\tconst hasFilter = entry.hasFilter(tableCollection);\r\n\tconst modifiersFromEntry = entry.getModifyingEntryData();\r\n\tconst modifiersFromEntryCount = entry.getModifyingEntryKeys().length;\r\n\tconst hasModifiers = modifiersFromEntryCount > 0;\r\n\tconst modifiersOfEntry = entry.getModifiedByEntryKeys();\r\n\tconst isModified = Object.keys(modifiersOfEntry).length > 0;\r\n\tconst stringifyDeps = entry.getStringifyDependencies();\r\n\tconst stringifySubscribed = entry.stringifyLinker.getSubscribedKeys();\r\n\tconst generationDependencies = entry.getGenerationDependencies();\r\n\tconst generationDependedOnBy = entry.generationDependencyLinker.getSubscribedKeys();\r\n\tconst canRegenerate = entry.getCanReroll();\r\n\tconst collectionEntryKeys = entry.getCollectionEntryKeys();\r\n\tconst collectionEntryObj = collectionEntryKeys.reduce((accum, entryKey) => {\r\n\t\tconst collectionEntry = npc.getEntry(entryKey);\r\n\t\tif (collectionEntry && !collectionEntry.isValueEquivalentToNone())\r\n\t\t\taccum[entryKey] = collectionEntry.toString();\r\n\t\treturn accum;\r\n\t}, {})\r\n\r\n\tif (active)\r\n\t{\r\n\t\t//console.log(entry, collectionEntryKeys);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Menu secondary style={{ marginBottom: 0 }}>\r\n\t\t\t\t<Menu.Item fitted>\r\n\t\t\t\t\t<Accordion.Title\r\n\t\t\t\t\t\tindex={propertyKey}\r\n\t\t\t\t\t\tactive={!isMissingSourceTable && active}\r\n\t\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isMissingSourceTable && <Icon name='dropdown' />}\r\n\t\t\t\t\t\t{camelCaseToTitle(propertyKey)}\r\n\t\t\t\t\t\t<span> - {entry.toString()}</span>\r\n\t\t\t\t\t\t{isMissingSourceTable && (\r\n\t\t\t\t\t\t\t<span> - No generator available</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Accordion.Title>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t\t{!isMissingSourceTable && canRegenerate && <Menu.Item fitted position='right'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ticon={'refresh'}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tentry.regenerate(npcModifiedData);\r\n\t\t\t\t\t\t\tnpc.save();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcontent={camelCaseToTitle(propertyKey)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Menu.Item>}\r\n\t\t\t</Menu>\r\n\t\t\t{!isMissingSourceTable && active && <Accordion.Content\r\n\t\t\t>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tborderLeft: '2px solid rgba(34,36,38,.15)',\r\n\t\t\t\t\tpaddingLeft: '10px',\r\n\t\t\t\t\tmarginLeft: '7px',\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Form.Group widths={'equal'} style={hasFilter && !entry.hasValue() ? {margin: 0} : {}}>\r\n\t\t\t\t\t\t\t{hasFilter && (\r\n\t\t\t\t\t\t\t\t<Form.Field\r\n\t\t\t\t\t\t\t\t\tlabel={'Filter'}\r\n\t\t\t\t\t\t\t\t\tcontrol={TableFilter}\r\n\t\t\t\t\t\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\t\t\t\t\t\ttableKey={sourceTableKey !== undefined ? inlineEval(sourceTableKey, npcModifiedData) : undefined}\r\n\t\t\t\t\t\t\t\t\tstorageKey={entry.getKeyPath()}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{entry.hasValue() && <Form.Field>\r\n\t\t\t\t\t\t\t\t<label>Generated Value</label>\r\n\t\t\t\t\t\t\t\t{rawValue !== undefined ? rawValue : (\r\n\t\t\t\t\t\t\t\t\t<span style={{ color: 'red' }}>Not Generated</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t\t{entry.hasValue() && <Form.Field>\r\n\t\t\t\t\t\t\t\t<label>Value with Modifiers</label>\r\n\t\t\t\t\t\t\t\t{modifiedValue !== undefined ? modifiedValue : (\r\n\t\t\t\t\t\t\t\t\t<span style={{ color: 'red' }}>Not Generated</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group widths={'equal'} style={\r\n\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\thasModifiers\r\n\t\t\t\t\t\t\t\t|| isModified\r\n\t\t\t\t\t\t\t\t|| stringifyDeps.length > 0\r\n\t\t\t\t\t\t\t\t|| stringifySubscribed.length > 0\r\n\t\t\t\t\t\t\t\t|| generationDependencies.length > 0\r\n\t\t\t\t\t\t\t\t|| generationDependedOnBy.length > 0\r\n\t\t\t\t\t\t\t) ? {margin: 0} : {}\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t{hasModifiers && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Modifies', 'Modifies Entries', modifiersFromEntry\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{isModified && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Modified By', 'Modified by Entries', modifiersOfEntry\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{stringifyDeps.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'String Dependencies', 'String Dependencies', stringifyDeps\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{stringifySubscribed.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'String Subscriptions', 'String Subscriptions', stringifySubscribed\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{generationDependencies.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Dependencies', 'Generation Dependencies', generationDependencies\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{generationDependedOnBy.length > 0 && <Form.Field>{makeModifierPopup(\r\n\t\t\t\t\t\t\t\t'Depended On By', 'Generations That Depend on entry', generationDependedOnBy\r\n\t\t\t\t\t\t\t)}</Form.Field>}\r\n\t\t\t\t\t\t\t{collectionEntryKeys.length > 0 && <Form.Field>\r\n\t\t\t\t\t\t\t\t{makeModifierPopup('Other Values', 'Collective Values', collectionEntryObj)}\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t{lodash.toPairs(collectionEntryObj).map(([entryKey, stringified]) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={entryKey}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Popup key={entryKey}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttrigger={(<p>{stringified}</p>)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent={(`Source: ${entryKey}`)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Form.Field>}\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t{entry.hasChildren() && <StorageAccordion\r\n\t\t\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\t\t\tentryComponentType={EntryView}\r\n\t\t\t\t\t\tentries={lodash.toPairs(entry.getChildren()).reduce((accum, [childKey, childEntry]) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taccum[childKey] = {\r\n\t\t\t\t\t\t\t\ttableCollection: tableCollection,\r\n\t\t\t\t\t\t\t\tnpcSchema: npcSchema,\r\n\t\t\t\t\t\t\t\tnpc: npc,\r\n\t\t\t\t\t\t\t\tnpcModifiedData: npcModifiedData,\r\n\t\t\t\t\t\t\t\tpropertyKey: childKey,\r\n\t\t\t\t\t\t\t\tstorageKey: `${storageKey}.${childKey}`,\r\n\t\t\t\t\t\t\t\tentry: childEntry,\r\n\t\t\t\t\t\t\t\tparentEntry: childEntry.schemaEntry,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn accum;\r\n\t\t\t\t\t\t}, {})}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t</Accordion.Content>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DataViewEntry({\r\n\tpropertyKey, tableCollection, entryKey, storageKey,\r\n\tactive, onClick,\r\n})\r\n{\r\n\tconst npcSchema = tableCollection ? tableCollection.getNpcSchema() : null;\r\n\tconst npc = NpcData.get();\r\n\tconst entry = npc.getEntry(entryKey);\r\n\r\n\tconst parentEntry = entry.getField();\r\n\r\n\treturn (\r\n\t\t<EntryView\r\n\t\t\ttableCollection={tableCollection} npcSchema={npcSchema} npc={npc}\r\n\r\n\t\t\tpropertyKey={propertyKey} storageKey={storageKey}\r\n\t\t\tentry={entry} parentEntry={parentEntry}\r\n\r\n\t\t\tactive={active} onClick={onClick}\r\n\t\t/>\r\n\t)\r\n}\r\n","import React from 'react';\r\nimport NpcData from '../../storage/NpcData';\r\nimport lodash from 'lodash';\r\nimport { Header, Button, List, Popup, Table } from 'semantic-ui-react';\r\nimport * as shortid from 'shortid';\r\n\r\nfunction toFeet(n)\r\n{\r\n\tconst realFeet = ((n * 0.393700) / 12);\r\n\tconst feet = Math.floor(realFeet);\r\n\tconst inches = Math.floor((realFeet - feet) * 12);\r\n\treturn feet + \"'\" + inches + '\"';\r\n}\r\n\r\nfunction toSentenceCase(sentence)\r\n{\r\n\treturn sentence.length <= 0 ? '' : (\r\n\t\tsentence[0].toUpperCase() + sentence.slice(1)\r\n\t);\r\n}\r\n\r\nfunction getRenderedText(text, entry)\r\n{\r\n\tif (typeof text === 'function')\r\n\t{\r\n\t\treturn text(entry);\r\n\t}\r\n\telse if (text !== undefined)\r\n\t{\r\n\t\treturn text;\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn entry.toString();\r\n\t}\r\n}\r\n\r\nfunction InlineEntryItem({\r\n\tentry, rerollAs, globalData, text,\r\n})\r\n{\r\n\tconst refresh = React.useState(undefined)[1];\r\n\tReact.useEffect(() => {\r\n\t\tfunction onChanged(evt) { refresh(shortid.generate()); }\r\n\t\tentry.addListenerOnChanged(onChanged);\r\n\t\tentry.addListenerOnUpdateString(onChanged);\r\n\t\tentry.addListenerOnModified(onChanged);\r\n\t\tentry.addListenerOnUpdateCollection(onChanged);\r\n\t\treturn () => {\r\n\t\t\tentry.removeListenerOnChanged(onChanged)\r\n\t\t\tentry.removeListenerOnUpdateString(onChanged);\r\n\t\t\tentry.removeListenerOnModified(onChanged);\r\n\t\t\tentry.removeListenerOnUpdateCollection(onChanged);\r\n\t\t};\r\n\t});\r\n\tconst renderedText = getRenderedText(text, entry);\r\n\treturn (\r\n\t\t<Popup\r\n\t\t\thoverable={true}\r\n\t\t\ttrigger={(<span style={{\r\n\t\t\t\tcolor: \"#4400ff\",\r\n\t\t\t\tfontWeight: 'bold'\r\n\t\t\t}}>{renderedText}</span>)}\r\n\t\t\tcontent={(\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tpath={rerollAs || entry.getKeyPath()} size='mini' icon='refresh'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tentry.regenerate(globalData);\r\n\t\t\t\t\t\t\tentry.npc.save();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label>{entry.getName()}: {renderedText}</label>\r\n\t\t\t\t</span>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport function ArticleContent({ usePlainText })\r\n{\r\n\tconst npc = NpcData.get();\r\n\tconst globalData = npc.getModifiedData();\r\n\r\n\t\r\n\tconst createEntryItem = (entry, text=undefined, rerollAs=undefined) =>\r\n\t{\r\n\t\tif (!entry) { return <div />; }\r\n\t\tif (usePlainText || !entry.getCanReroll())\r\n\t\t{\r\n\t\t\treturn getRenderedText(text, entry);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<InlineEntryItem\r\n\t\t\t\tentry={entry}\r\n\t\t\t\trerollAs={rerollAs}\r\n\t\t\t\tglobalData={globalData}\r\n\t\t\t\ttext={text}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\t\r\n\tconst strength = npc.getEntry('stats.abilityScores.strength');\r\n\tconst dexterity = npc.getEntry('stats.abilityScores.dexterity');\r\n\tconst constitution = npc.getEntry('stats.abilityScores.constitution');\r\n\tconst intelligence = npc.getEntry('stats.abilityScores.intelligence');\r\n\tconst wisdom = npc.getEntry('stats.abilityScores.wisdom');\r\n\tconst charisma = npc.getEntry('stats.abilityScores.charisma');\r\n\tconst ethicalPositive = npc.getEntry('stats.alignmentTendancies.ethical.positive');\r\n\tconst ethicalNeutral = npc.getEntry('stats.alignmentTendancies.ethical.neutral');\r\n\tconst ethicalNegative = npc.getEntry('stats.alignmentTendancies.ethical.negative');\r\n\tconst moralPositive = npc.getEntry('stats.alignmentTendancies.moral.positive');\r\n\tconst moralNeutral = npc.getEntry('stats.alignmentTendancies.moral.neutral');\r\n\tconst moralNegative = npc.getEntry('stats.alignmentTendancies.moral.negative');\r\n\r\n\tconst name = npc.getEntry('identity.name');\r\n\tconst surname = npc.getEntry('identity.surname');\r\n\tconst pronouns = npc.getEntry('identity.pronouns');\r\n\tconst genderIdentity = npc.getEntry('identity.genderIdentity');\r\n\tconst genderExpression = npc.getEntry('identity.genderExpression');\r\n\tconst sex = npc.getEntry('identity.sex');\r\n\tconst romanticIdentity = npc.getEntry('identity.romanticIdentity');\r\n\tconst sexualIdentity = npc.getEntry('identity.sexualIdentity');\r\n\tconst sexualOrientation = npc.getEntry('identity.sexualOrientation');\r\n\r\n\tconst profession = npc.getEntry('occupation.profession');\r\n\r\n\tconst age = npc.getEntry('description.age');\r\n\tconst eyeColor = npc.getEntry('description.eyeColor');\r\n\tconst height = npc.getEntry('description.height');\r\n\tconst weight = npc.getEntry('description.weight');\r\n\tconst face = npc.getEntry('description.face');\r\n\tconst race = npc.getEntry('description.race');\r\n\tconst hair = npc.getEntry('description.race.hair');\r\n\tconst skin = npc.getEntry('description.race.skin');\r\n\r\n\tconst physicalTraitsMap = npc.getEntry('description.specialPhysical').getChildren();\r\n\tconst physicalTraits = lodash.values(physicalTraitsMap).map((entry) => (\r\n\t\t<List.Item key={entry.getKeyPath()} as='li'>\r\n\t\t\t{createEntryItem(entry, (e) => toSentenceCase(e.toString()))}\r\n\t\t</List.Item>\r\n\t));\r\n\r\n\tconst deity = npc.getEntry('personality.religion.deity');\r\n\tconst worship = npc.getEntry('personality.religion.worship');\r\n\tconst quirks = npc.getEntry('personality.quirks');\r\n\tconst quirkList = quirks.getCollectionEntryKeys()\r\n\t\t.map((entryKey) => npc.getEntry(entryKey))\r\n\t\t.filter((entry) => !entry.isValueEquivalentToNone())\r\n\t\t.map((entry) => (\r\n\t\t\t<List.Item key={entry.getKeyPath()} as='li'>\r\n\t\t\t\t{createEntryItem(entry, (e) => toSentenceCase(e.toString()))}\r\n\t\t\t</List.Item>\r\n\t\t));\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{usePlainText && (\r\n\t\t\t\t<p>View generation at <a href={NpcData.getLink()}>D&amp;D-Generator</a></p>\r\n\t\t\t)}\r\n\r\n\t\t\t<Header as='h1' content='Description' />\r\n\t\t\t<List bulleted as='ul'>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{createEntryItem(name)}{surname.hasValue() && createEntryItem(surname, (e) => ` ${e.toString()}`)}\r\n\t\t\t\t\t&nbsp; is a &nbsp;\r\n\t\t\t\t\t{createEntryItem(age)} year old &nbsp;\r\n\t\t\t\t\t{createEntryItem(genderIdentity)} &nbsp;\r\n\t\t\t\t\t{createEntryItem(race)} &nbsp;\r\n\t\t\t\t\t{createEntryItem(profession, undefined, 'occupation.type')}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; has &nbsp;\r\n\t\t\t\t\t{createEntryItem(eyeColor, (e) => `${e.toString()} eyes`)}\r\n\t\t\t\t\t&nbsp; and &nbsp;\r\n\t\t\t\t\t{createEntryItem(hair)}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; has &nbsp;\r\n\t\t\t\t\t{createEntryItem(skin)}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; stands &nbsp;\r\n\t\t\t\t\t{createEntryItem(height, (e) => `${e.toString()}cm (${toFeet(e.getModifiedValue())})`)}\r\n\t\t\t\t\t&nbsp; tall and has a &nbsp;\r\n\t\t\t\t\t{createEntryItem(weight)} build.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; has an &nbsp;\r\n\t\t\t\t\t{createEntryItem(face)} face.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t{physicalTraits}\r\n\t\t\t</List>\r\n\r\n\t\t\t<Header as='h1' content='Identity' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Pronouns</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(pronouns)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Gender Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(genderIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Gender Expression</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(genderExpression)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sex</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sex)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Romantic Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(romanticIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sexual Identity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sexualIdentity)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Sexual Orientation</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(sexualOrientation)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\r\n\t\t\t<Header as='h1' content='Personality' />\r\n\t\t\t<List bulleted as='ul'>\r\n\t\t\t\t<List.Item as='li'>\r\n\t\t\t\t\t{toSentenceCase(pronouns.getRawValue().singular)}\r\n\t\t\t\t\t&nbsp; {createEntryItem(worship)} worships {createEntryItem(deity)}.\r\n\t\t\t\t</List.Item>\r\n\t\t\t\t{quirkList}\r\n\t\t\t</List>\r\n\r\n\t\t\t<Header as='h1' content='Stats' />\r\n\r\n\t\t\t<Header as='h2' content='Ability Scores' />\r\n\t\t\t<Table striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Strength</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{strength.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Dexterity</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{dexterity.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Constitution</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{constitution.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Intelligence</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{intelligence.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Wisdom</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{wisdom.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Charisma</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{charisma.toString()}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t\t\r\n\t\t\t<Header as='h2' content='Alignment Tendencies' />\r\n\t\t\t<Header as='h3' content='Ethical' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Lawful</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalPositive)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Neutral</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalNeutral)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Chaotic</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(ethicalNegative)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t\t<Header as='h3' content='Moral' />\r\n\t\t\t<Table compact='very' size='small' striped textAlign='center'>\r\n\t\t\t\t<Table.Body>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Good</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralPositive)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Neutral</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralNeutral)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t<Table.Row>\r\n\t\t\t\t\t\t<Table.Cell>Evil</Table.Cell>\r\n\t\t\t\t\t\t<Table.Cell>{createEntryItem(moralNegative)}</Table.Cell>\r\n\t\t\t\t\t</Table.Row>\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\r\n\t\t\t{/*<Header as='h1' content='Plot Hook' />*/}\r\n\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport { Header, Button, Icon, Popup, Menu, Dropdown } from 'semantic-ui-react';\r\nimport {\r\n\tgetDisplayIconForMode,\r\n} from './EDisplayModes';\r\nimport NpcData from '../../storage/NpcData';\r\nimport copyToClipboard from '../../lib/clipboard';\r\nimport Filter from '../../storage/Filter';\r\nimport { renderToString } from 'react-dom/server';\r\nimport { ArticleContent } from './ArticleContent';\r\n\r\nexport function MenuBar({\r\n\tswitchDisplayMode,\r\n\tdisplayMode,\r\n\tmenuItemsRight,\r\n\tgetEntryLink,\r\n})\r\n{\r\n\t// TODO: Figure out how to keep the switch view mode popup open when the item is clicked\r\n\treturn (\r\n\t\t<Menu borderless pointing secondary>\r\n\t\t\t<Menu.Item onClick={switchDisplayMode}>\r\n\t\t\t\t<Popup\r\n\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\tcontent={'Switch view mode'/*getDisplayModeSwitchLabel(displayMode)*/}\r\n\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t<Header>\r\n\t\t\t\t\t\t\t<Icon name={getDisplayIconForMode(displayMode)} />\r\n\t\t\t\t\t\t\t<Header.Content>NPC</Header.Content>\r\n\t\t\t\t\t\t</Header>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Menu.Item>\r\n\t\t\t<Menu.Menu position='right'>\r\n\t\t\t\t{menuItemsRight || []}\r\n\t\t\t\t<Dropdown key='export' item text={'Copy To Clipboard'}>\r\n\t\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t\t<Dropdown.Item icon='linkify' text='Generator Link' onClick={() => copyToClipboard(NpcData.getLink())} />\r\n\t\t\t\t\t\t<Dropdown.Item icon='file text' text='Article' onClick={() => {\r\n\t\t\t\t\t\t\tcopyToClipboard(renderToString(\r\n\t\t\t\t\t\t\t\t<ArticleContent usePlainText={true} />\r\n\t\t\t\t\t\t\t));\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t<Dropdown.Item icon='code' text='JSON' onClick={() => copyToClipboard(JSON.stringify(NpcData.getState()))} />\r\n\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t\t<Menu.Item>\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\t\tcontent={'Clear All Filters'}\r\n\t\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\t\tonClick={Filter.clear}\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 2, marginRight: 2, }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon.Group>\r\n\t\t\t\t\t\t\t\t\t<Icon name='filter' />\r\n\t\t\t\t\t\t\t\t\t<Icon name='cancel' corner='bottom right' />\r\n\t\t\t\t\t\t\t\t</Icon.Group>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Popup\r\n\t\t\t\t\t\tposition='bottom right'\r\n\t\t\t\t\t\tcontent={'Delete generated data'}\r\n\t\t\t\t\t\ttrigger={(\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon={'trash'}\r\n\t\t\t\t\t\t\t\tonClick={NpcData.clear}\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 2, marginRight: 2, }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t</Menu.Menu>\r\n\t\t</Menu>\r\n\t);\r\n}","import React from 'react';\r\nimport { Accordion, Icon } from 'semantic-ui-react';\r\nimport { camelCaseToTitle } from '../../lib/str';\r\nimport { StorageAccordion } from '../StorageAccordion';\r\nimport { DISPLAY_MODES } from './EDisplayModes';\r\nimport { DataViewEntry } from './DetailViewEntry';\r\nimport NpcData from '../../storage/NpcData';\r\nimport { MenuBar } from './MenuBar';\r\n\r\nfunction DetailViewCategory({\r\n\tpropertyKey, tableCollection,\r\n\tcategoryFields, storageKey,\r\n\tactive, onClick,\r\n})\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Accordion.Title\r\n\t\t\t\tindex={propertyKey}\r\n\t\t\t\tactive={active}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\tstyle={{ marginBottom: 0 }}\r\n\t\t\t>\r\n\t\t\t\t<Icon name='dropdown' />\r\n\t\t\t\t{camelCaseToTitle(propertyKey)}\r\n\t\t\t</Accordion.Title>\r\n\t\t\t<Accordion.Content\r\n\t\t\t\tactive={active}\r\n\t\t\t>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tpaddingLeft: '1em'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<StorageAccordion\r\n\t\t\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\t\t\tentryComponentType={DataViewEntry}\r\n\t\t\t\t\t\tactive={active}\r\n\t\t\t\t\t\tentries={categoryFields.reduce((accum, fieldKey) =>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\taccum[fieldKey] = {\r\n\t\t\t\t\t\t\t\tpropertyKey: fieldKey,\r\n\t\t\t\t\t\t\t\ttableCollection: tableCollection,\r\n\t\t\t\t\t\t\t\tentryKey: `${propertyKey}.${fieldKey}`,\r\n\t\t\t\t\t\t\t\tstorageKey: `${storageKey}.${fieldKey}`,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn accum;\r\n\t\t\t\t\t\t}, {})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</Accordion.Content>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DetailView(props)\r\n{\r\n\tconst npcSchema = props.tableCollection.getNpcSchema();\r\n\tconst storageKey = `npc.${DISPLAY_MODES.Detailed}.expandedEntries`;\r\n\tconsole.log(props.tableCollection, npcSchema, NpcData.get());\r\n\tconst npc = NpcData.get();\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<MenuBar\r\n\t\t\t\tswitchDisplayMode={props.switchDisplayMode}\r\n\t\t\t\tdisplayMode={props.displayMode}\r\n\t\t\t/>\r\n\r\n\t\t\t<StorageAccordion\r\n\t\t\t\tstorageKey={storageKey}\r\n\t\t\t\tentryComponentType={DetailViewCategory}\r\n\t\t\t\tentries={npc.getCategories().reduce((accum, category) =>\r\n\t\t\t\t{\r\n\t\t\t\t\taccum[category] = {\r\n\t\t\t\t\t\tpropertyKey: category,\r\n\t\t\t\t\t\ttableCollection: props.tableCollection,\r\n\t\t\t\t\t\tcategoryFields: npc.getEntriesForCategory(category),\r\n\t\t\t\t\t\tstorageKey: `${storageKey}.${category}`,\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn accum;\r\n\t\t\t\t}, {})}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { MenuBar } from './MenuBar';\r\nimport { ArticleContent } from './ArticleContent';\r\n\r\nexport function ArticleView(props)\r\n{\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<MenuBar\r\n\t\t\t\tswitchDisplayMode={props.switchDisplayMode}\r\n\t\t\t\tdisplayMode={props.displayMode}\r\n\t\t\t/>\r\n\t\t\t<ArticleContent/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport { Loader, Icon } from 'semantic-ui-react';\r\nimport shortid from 'shortid';\r\nimport { DetailView } from '../components/NPC/DetailView';\r\nimport storage from 'local-storage';\r\nimport {\r\n\tDISPLAY_MODES,\r\n\tgetNextDisplayMode,\r\n} from '../components/NPC/EDisplayModes';\r\nimport NpcData from '../storage/NpcData';\r\nimport { ArticleView } from '../components/NPC/ArticleView';\r\nimport * as queryString from 'query-string';\r\n\r\nconst CURRENT_DISPLAYMODE_STORAGE = `npc.displayMode`;\r\n\r\nexport function NpcView(props)\r\n{\r\n\tconst parsedNpcData = (() => {\r\n\t\tconst npcDataInUrl = queryString.parse(window.location.search);\r\n\t\tif (typeof npcDataInUrl.npc === 'string') \r\n\t\t{\r\n\t\t\treturn JSON.parse(npcDataInUrl.npc);\r\n\t\t}\r\n\t\treturn undefined;\r\n\t})();\r\n\r\n\tconst refreshWith = useState(0)[1];\r\n\tconst [displayMode, setDisplayMode] = useState(storage.get(CURRENT_DISPLAYMODE_STORAGE) || DISPLAY_MODES.Readable);\r\n\tconst switchDisplayMode = () => {\r\n\t\tconst nextMode = getNextDisplayMode(displayMode);\r\n\t\tstorage.set(CURRENT_DISPLAYMODE_STORAGE, nextMode);\r\n\t\tsetDisplayMode(nextMode);\r\n\t};\r\n\r\n\tuseEffect(() =>\r\n\t{\r\n\t\tfunction onTableCollectionChanged({ detail })\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tTableCollection.addOnChanged(onTableCollectionChanged);\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tTableCollection.removeOnChanged(onTableCollectionChanged);\r\n\t\t}\r\n\t});\r\n\r\n\tuseEffect(() =>\r\n\t{\r\n\t\tfunction onNpcInitialized({ detail })\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tNpcData.toggleOnInitialized('on', onNpcInitialized);\r\n\t\tif (!NpcData.get())\r\n\t\t{\r\n\t\t\tNpcData.initialize(parsedNpcData);\r\n\t\t}\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tNpcData.toggleOnInitialized('off', onNpcInitialized);\r\n\t\t}\r\n\t});\r\n\r\n\tconst tableCollection = TableCollection.get();\r\n\tconst npcData = NpcData.get();\r\n\tif (!tableCollection || !npcData)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Loader active>Loading</Loader>\r\n\t\t);\r\n\t}\r\n\r\n\tswitch (displayMode)\r\n\t{\r\n\t\tcase DISPLAY_MODES.Readable: return (\r\n\t\t\t<ArticleView\r\n\t\t\t\tlocation={props.location}\r\n\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\tswitchDisplayMode={switchDisplayMode}\r\n\t\t\t\tdisplayMode={displayMode}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tcase DISPLAY_MODES.Detailed: return (\r\n\t\t\t<DetailView\r\n\t\t\t\tlocation={props.location}\r\n\t\t\t\ttableCollection={tableCollection}\r\n\t\t\t\tswitchDisplayMode={switchDisplayMode}\r\n\t\t\t\tdisplayMode={displayMode}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tdefault: return (\r\n\t\t\t<div>\r\n\t\t\t\tSomething went wrong, I'm confused... <Icon name='question' />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport {useTable} from 'react-table';\r\nimport { Table, Header, Container } from 'semantic-ui-react';\r\nimport * as DataTable from '../storage/Table';\r\n\r\nfunction getDataTable(tableKey)\r\n{\r\n\tconst tableCollection = TableCollection.get();\r\n\tif (!tableCollection) { return undefined; }\r\n\treturn tableKey !== undefined ? tableCollection.getTableAtPath(tableKey) : undefined;\r\n}\r\n\r\n// ReactHooks: https://reactjs.org/docs/hooks-effect.html\r\n// Memos: https://reactjs.org/docs/hooks-reference.html#usememo\r\nexport default function DataTableView({ tableKey })\r\n{\r\n\tconst dataTable = getDataTable(tableKey);\r\n\t\r\n\tconst columns = React.useMemo(() => DataTable.default.COLUMNS, []);\r\n\r\n\tconst [rowCount, setRowCount] = React.useState(dataTable === undefined ? 0 : dataTable.length());\r\n\tReact.useEffect(() => {\r\n\r\n\t\tif (dataTable === undefined) { return; }\r\n\r\n\t\tfunction onChangedRowCount({ details })\r\n\t\t{\r\n\t\t\tsetRowCount(details.next);\r\n\t\t}\r\n\r\n\t\tdataTable.subscribeOnChangedRowCount(onChangedRowCount);\r\n\r\n\t\treturn () => {\r\n\t\t\tdataTable.unsubscribeOnChangedRowCount(onChangedRowCount);\r\n\t\t};\r\n\t});\r\n\r\n\tconst data = React.useMemo(() => {\r\n\t\tconst table = getDataTable(tableKey);\r\n\t\tif (table === undefined) { return []; }\r\n\t\treturn table.getRows();\r\n\t}, [tableKey]);\r\n\r\n\t// React-Table API: https://github.com/tannerlinsley/react-table/blob/master/docs/api.md#usetable\r\n\t// React-Table Examples: https://github.com/tannerlinsley/react-table/blob/master/docs/examples.md\r\n\tconst {\r\n\t\tgetTableProps,\r\n\t\tgetTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n\t} = useTable({\r\n\t\tcolumns, data,\r\n\t});\r\n\r\n\tif (dataTable === undefined)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Header>\r\n\t\t\t\t403: No table found\r\n\t\t\t</Header>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Header>{dataTable.getKey()} ({rowCount} rows)</Header>\r\n\t\t\t<Table {...getTableProps()}>\r\n\t\t\t\t<Table.Header>\r\n\t\t\t\t\t{headerGroups.map((headerGroup) => (\r\n\t\t\t\t\t\t<Table.Row {...headerGroup.getHeaderGroupProps()}>\r\n\t\t\t\t\t\t\t{headerGroup.headers.map((column) => (\r\n\t\t\t\t\t\t\t\t<Table.HeaderCell {...column.getHeaderProps()}>\r\n\t\t\t\t\t\t\t\t\t{column.render('Header')}\r\n\t\t\t\t\t\t\t\t</Table.HeaderCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Table.Header>\r\n\t\t\t\t<Table.Body {...getTableBodyProps()}>\r\n\t\t\t\t\t{rows.map((row, i) => prepareRow(row) || (\r\n\t\t\t\t\t\t<Table.Row {...row.getRowProps()}>\r\n\t\t\t\t\t\t\t{row.cells.map(cell => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Table.Cell {...cell.getCellProps()}>\r\n\t\t\t\t\t\t\t\t\t\t{cell.render('Cell')}\r\n\t\t\t\t\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Table.Row>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Table.Body>\r\n\t\t\t</Table>\r\n\t\t</Container>\r\n\t);\r\n}\r\n\r\n/*\r\nexport class DataTableView extends React.Component\r\n{\r\n\tgetTableData()\r\n\t{\r\n\t\tconst tableCollection = TableCollection.get();\r\n\t\tif (!tableCollection) { return undefined; }\r\n\t\tconst tableKey = this.props.tableKey;\r\n\t\treturn tableKey !== undefined ? tableCollection.getTable(tableKey) : undefined;\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconsole.log(DataTable.default.COLUMNS);\r\n\t\treturn 'T2';\r\n\t\tconsole.log(COLUMNS);\r\n\r\n\t\tconst tableData = this.getTableData();\r\n\t\tif (tableData === undefined)\r\n\t\t{\r\n\t\t}\r\n\r\n\t\tconsole.log(tableData);\r\n\r\n\t}\r\n\r\n}\r\n\t\t//*/\r\n","import React from 'react';\r\nimport lodash from 'lodash';\r\nimport { Link, useRoutes } from 'raviger';\r\nimport DataTableView from '../components/DataTableView';\r\nimport TableCollection from '../storage/TableCollection';\r\nimport Tree from 'react-animated-tree';\r\n\r\nexport function DataView({ basePath })\r\n{\r\n\tconst tableCollection = TableCollection.get();\r\n\tconst routes = (tableCollection ? tableCollection.getTables() : [])\r\n\t\t.reduce((routes, table) => {\r\n\t\t\troutes[`/${table.getKeyPath()}`] = () => <DataTableView tableKey={table.getKey()} />;\r\n\t\t\treturn routes;\r\n\t\t}, {});\r\n\tconst route = useRoutes(routes, { basePath: basePath });\r\n\tif (route) return route;\r\n\r\n\tfunction makeTreeNode([pathItem, nodeDetails])\r\n\t{\r\n\t\tconst allNodeProperties = Object.keys(nodeDetails);\r\n\t\tconst subNodeProperties = allNodeProperties.filter((item) => item !== 'table');\r\n\t\tconst hasTable = allNodeProperties.includes('table');\r\n\t\tconst content = !hasTable ? pathItem : (\r\n\t\t\t<span>\r\n\t\t\t\t<Link href={`${basePath}/${nodeDetails.table.getKeyPath()}`}>{pathItem}</Link>\r\n\t\t\t</span>\r\n\t\t);\r\n\t\tif (subNodeProperties.length === 0)\r\n\t\t{\r\n\t\t\tif (hasTable)\r\n\t\t\t{\r\n\t\t\t\t// Just a leaf for an actual table\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tree key={pathItem}\r\n\t\t\t\t\t\tcontent={content}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn <Tree key={pathItem} content={`Unknown: ${pathItem}`} />;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconst subnodes = subNodeProperties.reduce((accum, propKey) => {\r\n\t\t\t\taccum[propKey] = nodeDetails[propKey];\r\n\t\t\t\treturn accum;\r\n\t\t\t}, {});\r\n\t\t\treturn (\r\n\t\t\t\t<Tree key={pathItem} content={content} >\r\n\t\t\t\t\t{lodash.toPairs(subnodes).map(makeTreeNode)}\r\n\t\t\t\t</Tree>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif (tableCollection)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Tree\r\n\t\t\t\tcontent={'Tables'}\r\n\t\t\t>\r\n\t\t\t\t{lodash.toPairs(tableCollection.getTableTree()).map(makeTreeNode)}\r\n\t\t\t</Tree>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport { HomeView } from \"./view/HomeView\";\r\nimport { NpcView } from \"./view/NpcView\";\r\nimport { DataView } from \"./view/DataView\";\r\n\r\nconst routes = {\r\n  \"/\": () => <HomeView />,\r\n\t\"/npc\": () => <NpcView />,\r\n\t// todo move table param to match all sub route https://github.com/Paratron/hookrouter/blob/master/src-docs/pages/en/02_routing.md#url-parameters\r\n  \"/data*\": () => <DataView basePath='/data' />,\r\n};\r\n\r\nexport default routes;","import React from 'react';\r\nimport { Menu } from 'semantic-ui-react';\r\nimport { Link } from 'raviger';\r\n\r\nexport function HeaderBarLink({ name, activeItem, path, onClick, children })\r\n{\r\n\treturn (\r\n\t\t<Menu.Item\r\n\t\t\t\tas={Link}\r\n\t\t\t\tname={name}\r\n\t\t\t\tactive={activeItem === path}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\thref={`${process.env.PUBLIC_URL}${path}`}\r\n\t\t\t>\r\n\t\t\t{children}\r\n\t\t</Menu.Item>\r\n\t);\r\n}","import React from 'react';\r\nimport { Menu, Button, Icon } from 'semantic-ui-react';\r\nimport { HeaderBarLink } from './HeaderBarLink';\r\nimport TableCollection from '../storage/TableCollection';\r\n\r\nexport class HeaderBar extends React.Component\r\n{\r\n\r\n\tonClearStorage()\r\n\t{\r\n\t\tconsole.log('Syncing tables');\r\n\t\tTableCollection.clear();\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Menu>\r\n\t\t\t\t<HeaderBarLink name={'home'} path={'/'} activeItem={this.props.page}>Home</HeaderBarLink>\r\n\t\t\t\t<HeaderBarLink name={'npc'} path={'/npc'} activeItem={this.props.page}>NPC</HeaderBarLink>\r\n\t\t\t\t<HeaderBarLink name={'data'} path={'/data'} activeItem={this.props.page}>Data</HeaderBarLink>\r\n\r\n\t\t\t\t<Menu.Item position='right'>\r\n\t\t\t\t\t<Button color='red' onClick={this.onClearStorage.bind(this)}>\r\n\t\t\t\t\t\t<Icon name='sync' /> Sync\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Menu.Item>\r\n      </Menu>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport { HeaderBar } from '../components/HeaderBar';\r\nimport { Container } from 'semantic-ui-react';\r\n\r\nexport class ViewContainer extends React.Component\r\n{\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Container>\r\n\t\t\t\t<HeaderBar page={this.props.page} />\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t</Container>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport { Container } from \"semantic-ui-react\";\r\nimport { useRoutes } from 'raviger';\r\nimport Routes from './routes';\r\nimport shortid from 'shortid';\r\nimport TableCollection from './storage/TableCollection';\r\nimport { ViewContainer } from './view/ViewContainer';\r\n\r\nexport default function App()\r\n{\r\n\t// https://kyeotic.github.io/raviger/\r\n\tconst routeResult = useRoutes(Routes, { basePath: process.env.PUBLIC_URL });\r\n\tconst refreshWith = React.useState(undefined)[1];\r\n \r\n\tReact.useEffect(() =>\r\n\t{\r\n\t\tfunction onTableCollectionChanged()\r\n\t\t{\r\n\t\t\trefreshWith(shortid.generate());\r\n\t\t};\r\n\t\tTableCollection.addOnChanged(onTableCollectionChanged);\r\n\t\treturn () =>\r\n\t\t{\r\n\t\t\tTableCollection.removeOnChanged(onTableCollectionChanged);\r\n\t\t}\r\n\t});\r\n\r\n\tif (!TableCollection.get())\r\n\t{\r\n\t\tTableCollection.initialize();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container id={'App'} fluid>\r\n\t\t\t<ViewContainer page={window.location.pathname}>\r\n\t\t\t\t{routeResult}\r\n\t\t\t</ViewContainer>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'semantic-ui-css/semantic.min.css';\r\n\r\n// https://www.npmjs.com/package/semver\r\nconsole.log('Versions:', {\r\n\treact: React.version,\r\n\tnode: process.versions.node,\r\n});\r\nconsole.log(`Serving at public url: ${process.env.PUBLIC_URL}`);\r\n\r\nReactDOM.render((<App />), document.getElementById('root'));","module.exports = (values) =>\r\n{\r\n\treturn values[Math.floor(Math.random() * values.length)];\r\n}","var map = {\n\t\"./tables/bonus/ability/cha/high.json\": 314,\n\t\"./tables/bonus/ability/cha/index.json\": 315,\n\t\"./tables/bonus/ability/cha/low.json\": 316,\n\t\"./tables/bonus/ability/cha/medium.json\": 317,\n\t\"./tables/bonus/ability/const/high.json\": 318,\n\t\"./tables/bonus/ability/const/index.json\": 319,\n\t\"./tables/bonus/ability/const/low.json\": 320,\n\t\"./tables/bonus/ability/const/medium.json\": 321,\n\t\"./tables/bonus/ability/dex/high.json\": 322,\n\t\"./tables/bonus/ability/dex/index.json\": 323,\n\t\"./tables/bonus/ability/dex/low.json\": 324,\n\t\"./tables/bonus/ability/dex/medium.json\": 325,\n\t\"./tables/bonus/ability/index.json\": 326,\n\t\"./tables/bonus/ability/int/high.json\": 327,\n\t\"./tables/bonus/ability/int/index.json\": 328,\n\t\"./tables/bonus/ability/int/low.json\": 329,\n\t\"./tables/bonus/ability/int/medium.json\": 330,\n\t\"./tables/bonus/ability/str/high.json\": 331,\n\t\"./tables/bonus/ability/str/index.json\": 332,\n\t\"./tables/bonus/ability/str/low.json\": 333,\n\t\"./tables/bonus/ability/str/medium.json\": 334,\n\t\"./tables/bonus/ability/wis/high.json\": 335,\n\t\"./tables/bonus/ability/wis/index.json\": 336,\n\t\"./tables/bonus/ability/wis/low.json\": 337,\n\t\"./tables/bonus/ability/wis/medium.json\": 338,\n\t\"./tables/bonus/index.json\": 339,\n\t\"./tables/common/color.json\": 340,\n\t\"./tables/common/frequency.json\": 341,\n\t\"./tables/common/index.json\": 342,\n\t\"./tables/common/language.json\": 343,\n\t\"./tables/common/rightLeft.json\": 344,\n\t\"./tables/common/rightLeftBoth.json\": 345,\n\t\"./tables/deity/archdevil.json\": 346,\n\t\"./tables/deity/demon.json\": 347,\n\t\"./tables/deity/dragon.json\": 348,\n\t\"./tables/deity/drow.json\": 349,\n\t\"./tables/deity/dwarf.json\": 350,\n\t\"./tables/deity/elf.json\": 351,\n\t\"./tables/deity/evil.json\": 352,\n\t\"./tables/deity/gnome.json\": 353,\n\t\"./tables/deity/good.json\": 354,\n\t\"./tables/deity/halfling.json\": 355,\n\t\"./tables/deity/index.json\": 356,\n\t\"./tables/deity/orc.json\": 357,\n\t\"./tables/filters.json\": 358,\n\t\"./tables/hooks.json\": 359,\n\t\"./tables/hooks/index.json\": 360,\n\t\"./tables/identity/genderExpression.json\": 361,\n\t\"./tables/identity/genderIdentity.json\": 362,\n\t\"./tables/identity/index.json\": 363,\n\t\"./tables/identity/pronouns/index.json\": 364,\n\t\"./tables/identity/pronouns/man.json\": 365,\n\t\"./tables/identity/pronouns/nonbinary.json\": 366,\n\t\"./tables/identity/pronouns/woman.json\": 367,\n\t\"./tables/identity/romanticIdentity.json\": 368,\n\t\"./tables/identity/sex.json\": 369,\n\t\"./tables/identity/sexualIdentity.json\": 370,\n\t\"./tables/identity/sexualOrientation.json\": 371,\n\t\"./tables/identity/sexualOrientation/gayLesbian/index.json\": 372,\n\t\"./tables/identity/sexualOrientation/gayLesbian/man.json\": 373,\n\t\"./tables/identity/sexualOrientation/gayLesbian/nonbinary.json\": 374,\n\t\"./tables/identity/sexualOrientation/gayLesbian/woman.json\": 375,\n\t\"./tables/identity/sexualOrientation/index.json\": 376,\n\t\"./tables/index.json\": 377,\n\t\"./tables/items/aliment.json\": 378,\n\t\"./tables/items/index.json\": 379,\n\t\"./tables/items/mundanePlural.json\": 380,\n\t\"./tables/items/precious.json\": 381,\n\t\"./tables/items/preciousPrefixed.json\": 382,\n\t\"./tables/items/weapon.json\": 383,\n\t\"./tables/items/weapon/index.json\": 384,\n\t\"./tables/items/weapon/martialfinesse.json\": 385,\n\t\"./tables/items/weapon/martialranged.json\": 386,\n\t\"./tables/items/weapon/martialweapon.json\": 387,\n\t\"./tables/items/weapon/simplefinesse.json\": 388,\n\t\"./tables/items/weapon/simpleranged.json\": 389,\n\t\"./tables/items/weapon/simpleweapon.json\": 390,\n\t\"./tables/misc/abstractWord.json\": 391,\n\t\"./tables/misc/index.json\": 392,\n\t\"./tables/misc/monster.json\": 393,\n\t\"./tables/npc-full.json\": 394,\n\t\"./tables/npc.json\": 395,\n\t\"./tables/occupation/Class/Caster.json\": 396,\n\t\"./tables/occupation/Class/Category.json\": 397,\n\t\"./tables/occupation/Class/Martial.json\": 398,\n\t\"./tables/occupation/Class/Misc.json\": 399,\n\t\"./tables/occupation/Class/index.json\": 400,\n\t\"./tables/occupation/Job/Category.json\": 401,\n\t\"./tables/occupation/Job/Entertainer.json\": 402,\n\t\"./tables/occupation/Job/Learned.json\": 403,\n\t\"./tables/occupation/Job/Lesser Nobility.json\": 404,\n\t\"./tables/occupation/Job/Martial.json\": 405,\n\t\"./tables/occupation/Job/Professional.json\": 406,\n\t\"./tables/occupation/Job/Underclass.json\": 407,\n\t\"./tables/occupation/Job/Working Class.json\": 408,\n\t\"./tables/occupation/Job/index.json\": 409,\n\t\"./tables/occupation/index.json\": 410,\n\t\"./tables/occupation/type.json\": 411,\n\t\"./tables/personality/index.json\": 412,\n\t\"./tables/personality/worship.json\": 413,\n\t\"./tables/quirks.json\": 414,\n\t\"./tables/quirks/general.json\": 415,\n\t\"./tables/quirks/index.json\": 416,\n\t\"./tables/quirks/military.json\": 417,\n\t\"./tables/quirks/modifier/collection.json\": 418,\n\t\"./tables/quirks/modifier/index.json\": 419,\n\t\"./tables/quirks/modifier/inheritance.json\": 420,\n\t\"./tables/quirks/modifier/pet/animal.json\": 421,\n\t\"./tables/quirks/modifier/pet/index.json\": 422,\n\t\"./tables/quirks/modifier/pet/name.json\": 423,\n\t\"./tables/quirks/modifier/raceAllergy.json\": 424,\n\t\"./tables/quirks/modifier/relation.json\": 425,\n\t\"./tables/quirks/modifier/relation/familyMember.json\": 426,\n\t\"./tables/quirks/modifier/relation/index.json\": 427,\n\t\"./tables/quirks/modifier/size.json\": 428,\n\t\"./tables/quirks/nature.json\": 429,\n\t\"./tables/quirks/poor.json\": 430,\n\t\"./tables/quirks/religious.json\": 431,\n\t\"./tables/quirks/rich.json\": 432,\n\t\"./tables/quirks/traits-1.json\": 433,\n\t\"./tables/quirks/traits-2.json\": 434,\n\t\"./tables/quirks/weird.json\": 435,\n\t\"./tables/race.json\": 436,\n\t\"./tables/race/Aasimar/deity.json\": 437,\n\t\"./tables/race/Aasimar/index.json\": 438,\n\t\"./tables/race/Aasimar/name-man.json\": 439,\n\t\"./tables/race/Aasimar/name-nonbinary.json\": 440,\n\t\"./tables/race/Aasimar/name-woman.json\": 441,\n\t\"./tables/race/Aasimar/quirk-evil.json\": 442,\n\t\"./tables/race/Aasimar/quirk-good.json\": 443,\n\t\"./tables/race/Dragonborn/color.json\": 444,\n\t\"./tables/race/Dragonborn/deity.json\": 445,\n\t\"./tables/race/Dragonborn/hair.json\": 446,\n\t\"./tables/race/Dragonborn/index.json\": 447,\n\t\"./tables/race/Dragonborn/name-man.json\": 448,\n\t\"./tables/race/Dragonborn/name-nonbinary.json\": 449,\n\t\"./tables/race/Dragonborn/name-woman.json\": 450,\n\t\"./tables/race/Dragonborn/quirks.json\": 451,\n\t\"./tables/race/Dwarf.json\": 452,\n\t\"./tables/race/Dwarf/beard.json\": 453,\n\t\"./tables/race/Dwarf/deity.json\": 454,\n\t\"./tables/race/Dwarf/index.json\": 455,\n\t\"./tables/race/Dwarf/name-man.json\": 456,\n\t\"./tables/race/Dwarf/name-nonbinary.json\": 457,\n\t\"./tables/race/Dwarf/name-woman.json\": 458,\n\t\"./tables/race/Dwarf/quirks.json\": 459,\n\t\"./tables/race/Dwarf/skin.json\": 460,\n\t\"./tables/race/Dwarf/surname.json\": 461,\n\t\"./tables/race/Elf.json\": 462,\n\t\"./tables/race/Elf/Drow/index.json\": 463,\n\t\"./tables/race/Elf/Drow/quirks.json\": 464,\n\t\"./tables/race/Elf/deity.json\": 465,\n\t\"./tables/race/Elf/index.json\": 466,\n\t\"./tables/race/Elf/name-man.json\": 467,\n\t\"./tables/race/Elf/name-nonbinary.json\": 468,\n\t\"./tables/race/Elf/name-woman.json\": 469,\n\t\"./tables/race/Elf/quirks.json\": 470,\n\t\"./tables/race/Elf/skin.json\": 471,\n\t\"./tables/race/Elf/skin/color.json\": 472,\n\t\"./tables/race/Elf/skin/index.json\": 473,\n\t\"./tables/race/Elf/surname.json\": 474,\n\t\"./tables/race/Firbolg/deity.json\": 475,\n\t\"./tables/race/Firbolg/index.json\": 476,\n\t\"./tables/race/Firbolg/name-man.json\": 477,\n\t\"./tables/race/Firbolg/name-nonbinary.json\": 478,\n\t\"./tables/race/Firbolg/name-woman.json\": 479,\n\t\"./tables/race/Firbolg/quirks.json\": 480,\n\t\"./tables/race/Firbolg/skin.json\": 481,\n\t\"./tables/race/Gnome.json\": 482,\n\t\"./tables/race/Gnome/deity.json\": 483,\n\t\"./tables/race/Gnome/index.json\": 484,\n\t\"./tables/race/Gnome/name-man.json\": 485,\n\t\"./tables/race/Gnome/name-nonbinary.json\": 486,\n\t\"./tables/race/Gnome/name-woman.json\": 487,\n\t\"./tables/race/Gnome/name/any.json\": 488,\n\t\"./tables/race/Gnome/name/index.json\": 489,\n\t\"./tables/race/Gnome/name/man-1.json\": 490,\n\t\"./tables/race/Gnome/name/man-2.json\": 491,\n\t\"./tables/race/Gnome/name/man-3.json\": 492,\n\t\"./tables/race/Gnome/name/man-4.json\": 493,\n\t\"./tables/race/Gnome/name/man.json\": 494,\n\t\"./tables/race/Gnome/name/woman-1.json\": 495,\n\t\"./tables/race/Gnome/name/woman-2.json\": 496,\n\t\"./tables/race/Gnome/name/woman-3.json\": 497,\n\t\"./tables/race/Gnome/name/woman-4.json\": 498,\n\t\"./tables/race/Gnome/name/woman.json\": 499,\n\t\"./tables/race/Gnome/quirks.json\": 500,\n\t\"./tables/race/Goblin/deity.json\": 501,\n\t\"./tables/race/Goblin/index.json\": 502,\n\t\"./tables/race/Goblin/name-man.json\": 503,\n\t\"./tables/race/Goblin/name-nonbinary.json\": 504,\n\t\"./tables/race/Goblin/name-woman.json\": 505,\n\t\"./tables/race/Goliath/deity.json\": 506,\n\t\"./tables/race/Goliath/hair.json\": 507,\n\t\"./tables/race/Goliath/hairTattoos.json\": 508,\n\t\"./tables/race/Goliath/index.json\": 509,\n\t\"./tables/race/Goliath/name-man.json\": 510,\n\t\"./tables/race/Goliath/name-nonbinary.json\": 511,\n\t\"./tables/race/Goliath/name-woman.json\": 512,\n\t\"./tables/race/Goliath/names/adjective.json\": 513,\n\t\"./tables/race/Goliath/names/animal-action.json\": 514,\n\t\"./tables/race/Goliath/names/animal-noun.json\": 515,\n\t\"./tables/race/Goliath/names/craft-action.json\": 516,\n\t\"./tables/race/Goliath/names/craft-noun.json\": 517,\n\t\"./tables/race/Goliath/names/fighting-action.json\": 518,\n\t\"./tables/race/Goliath/names/fighting-noun.json\": 519,\n\t\"./tables/race/Goliath/names/index.json\": 520,\n\t\"./tables/race/Goliath/names/mystic-action.json\": 521,\n\t\"./tables/race/Goliath/names/mystic-noun.json\": 522,\n\t\"./tables/race/Goliath/names/noun.json\": 523,\n\t\"./tables/race/Goliath/quirks-1.json\": 524,\n\t\"./tables/race/Goliath/quirks-2.json\": 525,\n\t\"./tables/race/Half-Dwarf/deity.json\": 526,\n\t\"./tables/race/Half-Dwarf/index.json\": 527,\n\t\"./tables/race/Half-Dwarf/name-man.json\": 528,\n\t\"./tables/race/Half-Dwarf/name-nonbinary.json\": 529,\n\t\"./tables/race/Half-Dwarf/name-woman.json\": 530,\n\t\"./tables/race/Half-Dwarf/skin.json\": 531,\n\t\"./tables/race/Half-Elf/deity.json\": 532,\n\t\"./tables/race/Half-Elf/index.json\": 533,\n\t\"./tables/race/Half-Elf/name-man.json\": 534,\n\t\"./tables/race/Half-Elf/name-nonbinary.json\": 535,\n\t\"./tables/race/Half-Elf/name-woman.json\": 536,\n\t\"./tables/race/Half-Elf/skin.json\": 537,\n\t\"./tables/race/Half-Orc/deity.json\": 538,\n\t\"./tables/race/Half-Orc/index.json\": 539,\n\t\"./tables/race/Half-Orc/name-man.json\": 540,\n\t\"./tables/race/Half-Orc/name-nonbinary.json\": 541,\n\t\"./tables/race/Half-Orc/name-woman.json\": 542,\n\t\"./tables/race/Half-Orc/skin.json\": 543,\n\t\"./tables/race/Halfling.json\": 544,\n\t\"./tables/race/Halfling/deity.json\": 545,\n\t\"./tables/race/Halfling/index.json\": 546,\n\t\"./tables/race/Halfling/name-man.json\": 547,\n\t\"./tables/race/Halfling/name-nonbinary.json\": 548,\n\t\"./tables/race/Halfling/name-woman.json\": 549,\n\t\"./tables/race/Halfling/quirks.json\": 550,\n\t\"./tables/race/Halfling/surname.json\": 551,\n\t\"./tables/race/Human/deity.json\": 552,\n\t\"./tables/race/Human/index.json\": 553,\n\t\"./tables/race/Human/name-man.json\": 554,\n\t\"./tables/race/Human/name-nonbinary.json\": 555,\n\t\"./tables/race/Human/name-woman.json\": 556,\n\t\"./tables/race/Human/surname.json\": 557,\n\t\"./tables/race/Kenku/deity.json\": 558,\n\t\"./tables/race/Kenku/index.json\": 559,\n\t\"./tables/race/Kenku/name-man.json\": 560,\n\t\"./tables/race/Kenku/name-nonbinary.json\": 561,\n\t\"./tables/race/Kenku/name-woman.json\": 562,\n\t\"./tables/race/Kenku/names/index.json\": 563,\n\t\"./tables/race/Kenku/names/kenkunameanimal.json\": 564,\n\t\"./tables/race/Kenku/names/kenkunamefighting.json\": 565,\n\t\"./tables/race/Kenku/names/kenkunamemetal.json\": 566,\n\t\"./tables/race/Kenku/names/kenkunamequiet.json\": 567,\n\t\"./tables/race/Kenku/quirks.json\": 568,\n\t\"./tables/race/Kenku/skin.json\": 569,\n\t\"./tables/race/Kenku/skin/color.json\": 570,\n\t\"./tables/race/Kenku/skin/featherTexture.json\": 571,\n\t\"./tables/race/Kenku/skin/index.json\": 572,\n\t\"./tables/race/Lizardfolk/deity.json\": 573,\n\t\"./tables/race/Lizardfolk/index.json\": 574,\n\t\"./tables/race/Lizardfolk/name-man.json\": 575,\n\t\"./tables/race/Lizardfolk/name-nonbinary.json\": 576,\n\t\"./tables/race/Lizardfolk/name-woman.json\": 577,\n\t\"./tables/race/Lizardfolk/quirks-1.json\": 578,\n\t\"./tables/race/Lizardfolk/quirks-2.json\": 579,\n\t\"./tables/race/Orc/deity.json\": 580,\n\t\"./tables/race/Orc/index.json\": 581,\n\t\"./tables/race/Orc/name-man.json\": 582,\n\t\"./tables/race/Orc/name-nonbinary.json\": 583,\n\t\"./tables/race/Orc/name-woman.json\": 584,\n\t\"./tables/race/Orc/skin.json\": 585,\n\t\"./tables/race/Orc/skin/color.json\": 586,\n\t\"./tables/race/Orc/skin/index.json\": 587,\n\t\"./tables/race/Orc/surname.json\": 588,\n\t\"./tables/race/Tabaxi/deity.json\": 589,\n\t\"./tables/race/Tabaxi/index.json\": 590,\n\t\"./tables/race/Tabaxi/name-man.json\": 591,\n\t\"./tables/race/Tabaxi/name-nonbinary.json\": 592,\n\t\"./tables/race/Tabaxi/name-woman.json\": 593,\n\t\"./tables/race/Tabaxi/name/first.json\": 594,\n\t\"./tables/race/Tabaxi/name/index.json\": 595,\n\t\"./tables/race/Tabaxi/name/last.json\": 596,\n\t\"./tables/race/Tabaxi/name/noun.json\": 597,\n\t\"./tables/race/Tabaxi/name/number.json\": 598,\n\t\"./tables/race/Tabaxi/quirkObsession.json\": 599,\n\t\"./tables/race/Tabaxi/quirks.json\": 600,\n\t\"./tables/race/Tabaxi/skin.json\": 601,\n\t\"./tables/race/Tabaxi/skin/color.json\": 602,\n\t\"./tables/race/Tabaxi/skin/index.json\": 603,\n\t\"./tables/race/Tabaxi/skin/pattern.json\": 604,\n\t\"./tables/race/Tabaxi/skin/texture.json\": 605,\n\t\"./tables/race/Tiefling/deity.json\": 606,\n\t\"./tables/race/Tiefling/index.json\": 607,\n\t\"./tables/race/Tiefling/name-evil.json\": 608,\n\t\"./tables/race/Tiefling/name-good.json\": 609,\n\t\"./tables/race/Tiefling/name-man.json\": 610,\n\t\"./tables/race/Tiefling/name-nonbinary.json\": 611,\n\t\"./tables/race/Tiefling/name-woman.json\": 612,\n\t\"./tables/race/Tiefling/name/evil.json\": 613,\n\t\"./tables/race/Tiefling/name/good.json\": 614,\n\t\"./tables/race/Tiefling/name/index.json\": 615,\n\t\"./tables/race/Tiefling/name/neutral.json\": 616,\n\t\"./tables/race/Tiefling/name/unaligned.json\": 617,\n\t\"./tables/race/Tiefling/skin.json\": 618,\n\t\"./tables/race/Triton/deity.json\": 619,\n\t\"./tables/race/Triton/hair-color.json\": 620,\n\t\"./tables/race/Triton/hair.json\": 621,\n\t\"./tables/race/Triton/index.json\": 622,\n\t\"./tables/race/Triton/name-man.json\": 623,\n\t\"./tables/race/Triton/name-nonbinary.json\": 624,\n\t\"./tables/race/Triton/name-woman.json\": 625,\n\t\"./tables/race/Triton/skin.json\": 626,\n\t\"./tables/race/Triton/surname.json\": 627,\n\t\"./tables/race/Troglodyte/deity.json\": 628,\n\t\"./tables/race/Troglodyte/index.json\": 629,\n\t\"./tables/race/Troglodyte/name-man.json\": 630,\n\t\"./tables/race/Troglodyte/name-nonbinary.json\": 631,\n\t\"./tables/race/Troglodyte/name-woman.json\": 632,\n\t\"./tables/race/common/index.json\": 633,\n\t\"./tables/race/common/name-nonbinary.json\": 634,\n\t\"./tables/race/index.json\": 635,\n\t\"./tables/relationship/index.json\": 636,\n\t\"./tables/relationship/relative.json\": 637,\n\t\"./tables/todo/contest.json\": 638,\n\t\"./tables/todo/evilworship.json\": 639,\n\t\"./tables/todo/furniture.json\": 640,\n\t\"./tables/todo/highattractiveness.json\": 641,\n\t\"./tables/todo/hooks1.json\": 642,\n\t\"./tables/todo/hooks2.json\": 643,\n\t\"./tables/todo/index.json\": 644,\n\t\"./tables/todo/organisation.json\": 645,\n\t\"./tables/todo/personality.json\": 646,\n\t\"./tables/todo/profession.json\": 647,\n\t\"./tables/todo/racedwarf.json\": 648,\n\t\"./tables/todo/raceelf.json\": 649,\n\t\"./tables/todo/racegnome.json\": 650,\n\t\"./tables/todo/racehalfling.json\": 651,\n\t\"./tables/todo/relationshipstatus.json\": 652,\n\t\"./tables/todo/tritonquirks.json\": 653,\n\t\"./tables/todo/werebeast.json\": 654,\n\t\"./tables/traits/age.json\": 655,\n\t\"./tables/traits/age/additive.json\": 656,\n\t\"./tables/traits/age/bonusRegular.json\": 657,\n\t\"./tables/traits/age/bonusSmall.json\": 658,\n\t\"./tables/traits/age/index.json\": 659,\n\t\"./tables/traits/age/multiplier3.json\": 660,\n\t\"./tables/traits/age/multiplier6.json\": 661,\n\t\"./tables/traits/alignment/index.json\": 662,\n\t\"./tables/traits/alignment/tendancy.json\": 663,\n\t\"./tables/traits/alignmentMoral.json\": 664,\n\t\"./tables/traits/bodyPart.json\": 665,\n\t\"./tables/traits/bodyPart/extra/finger.json\": 666,\n\t\"./tables/traits/bodyPart/extra/index.json\": 667,\n\t\"./tables/traits/bodyPart/head.json\": 668,\n\t\"./tables/traits/bodyPart/head/index.json\": 669,\n\t\"./tables/traits/bodyPart/head/sided.json\": 670,\n\t\"./tables/traits/bodyPart/head/sidedPlural.json\": 671,\n\t\"./tables/traits/bodyPart/head/unsided.json\": 672,\n\t\"./tables/traits/bodyPart/index.json\": 673,\n\t\"./tables/traits/bodyPart/missing/eye.json\": 674,\n\t\"./tables/traits/bodyPart/missing/fingers.json\": 675,\n\t\"./tables/traits/bodyPart/missing/index.json\": 676,\n\t\"./tables/traits/bodyPart/missing/limb.json\": 677,\n\t\"./tables/traits/bodyPart/sided.json\": 678,\n\t\"./tables/traits/bodyPart/sidedPlural.json\": 679,\n\t\"./tables/traits/bodyPart/unsided.json\": 680,\n\t\"./tables/traits/brand.json\": 681,\n\t\"./tables/traits/degree/degree.json\": 682,\n\t\"./tables/traits/degree/degree2.json\": 683,\n\t\"./tables/traits/degree/index.json\": 684,\n\t\"./tables/traits/descriptor.json\": 685,\n\t\"./tables/traits/eyecolor.json\": 686,\n\t\"./tables/traits/face/attractiveness.json\": 687,\n\t\"./tables/traits/face/beard.json\": 688,\n\t\"./tables/traits/face/beard/index.json\": 689,\n\t\"./tables/traits/face/beard/length.json\": 690,\n\t\"./tables/traits/face/beard/shape.json\": 691,\n\t\"./tables/traits/face/index.json\": 692,\n\t\"./tables/traits/face/looks/bad.json\": 693,\n\t\"./tables/traits/face/looks/badModifier.json\": 694,\n\t\"./tables/traits/face/looks/good.json\": 695,\n\t\"./tables/traits/face/looks/goodModifier.json\": 696,\n\t\"./tables/traits/face/looks/index.json\": 697,\n\t\"./tables/traits/face/looks/normal.json\": 698,\n\t\"./tables/traits/face/looks/normalModifier.json\": 699,\n\t\"./tables/traits/face/shape.json\": 700,\n\t\"./tables/traits/hair.json\": 701,\n\t\"./tables/traits/hair/color.json\": 702,\n\t\"./tables/traits/hair/index.json\": 703,\n\t\"./tables/traits/hair/length.json\": 704,\n\t\"./tables/traits/hair/style.json\": 705,\n\t\"./tables/traits/height.json\": 706,\n\t\"./tables/traits/index.json\": 707,\n\t\"./tables/traits/modifier.json\": 708,\n\t\"./tables/traits/physical.json\": 709,\n\t\"./tables/traits/physical/index.json\": 710,\n\t\"./tables/traits/physical/piercingAmount.json\": 711,\n\t\"./tables/traits/physical/traits-1.json\": 712,\n\t\"./tables/traits/physical/traits-2.json\": 713,\n\t\"./tables/traits/skin/human.json\": 714,\n\t\"./tables/traits/skin/humanColor.json\": 715,\n\t\"./tables/traits/skin/index.json\": 716,\n\t\"./tables/traits/skin/nonhuman.json\": 717,\n\t\"./tables/traits/skin/nonhumanColor.json\": 718,\n\t\"./tables/traits/skin/scales.json\": 719,\n\t\"./tables/traits/skin/scalesColor.json\": 720,\n\t\"./tables/traits/skin/scalesTexture.json\": 721,\n\t\"./tables/traits/skin/textureSkin.json\": 722,\n\t\"./tables/traits/skin/tone.json\": 723,\n\t\"./tables/traits/smell/bad.json\": 724,\n\t\"./tables/traits/smell/good.json\": 725,\n\t\"./tables/traits/smell/index.json\": 726,\n\t\"./tables/traits/tattoo.json\": 727,\n\t\"./tables/traits/tattoo/animal.json\": 728,\n\t\"./tables/traits/tattoo/index.json\": 729,\n\t\"./tables/traits/tattoo/tattooadj.json\": 730,\n\t\"./tables/traits/tattoo/text.json\": 731,\n\t\"./tables/traits/weight.json\": 732\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 313;"],"sourceRoot":""}